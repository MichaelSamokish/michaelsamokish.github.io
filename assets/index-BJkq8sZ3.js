var Zt=Object.defineProperty;var Kt=(n,e,t)=>e in n?Zt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>Kt(n,typeof e!="symbol"?e+"":e,t);import{d as G,g as gt,c as ie,r as se,a as z,b as g,o as f,u as te,R as jt,e as b,f as p,_ as Y,v as wt,h as Vt,i as $,j as Ke,k as Ie,w as le,l as W,m as A,t as R,n as oe,p as fe,F as j,q as we,s as O,T as Jt,x as Qt,y as ve,z as xt,A as Oe,B as Lt,C as Fe,D as Pt,E as We,G as $t,H as It,I as es,J as ts,K as yt,L as ss,M as os,N as ns,O as is,P as as,Q as rs,V as ls}from"./vendor-_RevpGiJ.js";import{w as Rt,F as L,i as re,f as u,v as V,L as Dt,a as lt,b as Le,d as Ge,m as B,n as Tt,c as qe,s as Ye,u as _,e as nt,g as ft,h as U,j as At,k as ne,p as us,l as Ue,o as ds,q as Ze,r as K,t as Xt,M as Bt,D as St,P as Gt,x as _t,y as cs,z as hs,A as Je,B as Pe,S as fs,C as ps,E as ms,G as Ne,H as He,I as Qe,J as vs,K as gs,W as ws,N as Vs,O as ys,Q as Ss,R as _s,T as bs,U as Ct,V as xs,X as et,Y as Ps,Z as Se,_ as ot,$ as Is,a0 as Ae,a1 as Cs,a2 as he,a3 as Ns,a4 as pt,a5 as Yt,a6 as it,a7 as Xe,a8 as tt,a9 as Be,aa as Nt,ab as ct,ac as Ms,ad as Et}from"./three-CJGEr-Sp.js";import{i as ks}from"./icons-CNPGi31y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const Os={key:1,class:"gpu-error-box disable-user-select"},Ls={class:"gpu-error-message-box"},$s={style:{"font-size":"100px","text-align":"center",color:"var(--vt-c-red)"}},Rs=G({__name:"App",setup(n){const e=gt(),t=localStorage.getItem("userLang");t&&e!=null&&(e.appContext.config.globalProperties.$i18n.locale=t);const s=ie(()=>navigator.gpu);return(o,i)=>{const a=se("font-awesome-icon");return s.value?(f(),z(te(jt),{key:0})):(f(),g("div",Os,[b("div",Ls,[b("div",$s,[p(a,{icon:["fas","circle-xmark"]})]),i[0]||(i[0]=b("h1",null,"WebGPU is not supported on this browser.",-1))])]))}}}),Ds=Y(Rs,[["__scopeId","data-v-286205d8"]]);class Ht{constructor(){r(this,"Id",wt());r(this,"In",null);r(this,"Out",null);r(this,"IsSelected",!1)}SetSelected(e){var s,o,i;var t=this.In!=null?(s=this.In.ParentNode)==null?void 0:s.ParentGraph:(i=(o=this.Out)==null?void 0:o.ParentNode)==null?void 0:i.ParentGraph;t!=null&&e==!0&&t.DeselectAll(),this.IsSelected=e}DeleteLinkFromTerminals(){var s,o;var e=(s=this.In)==null?void 0:s.Links.indexOf(this);e!=null&&this.In!=null&&this.In.Links.splice(e,1);var t=(o=this.Out)==null?void 0:o.Links.indexOf(this);t!=null&&this.Out!=null&&this.Out.Links.splice(t,1)}}class k{constructor(e,t){r(this,"X",0);r(this,"Y",0);this.X=e,this.Y=t}get Length(){return Math.sqrt(this.X*this.X+this.Y*this.Y)}get Normalized(){return k.Div(this,this.Length)}Reset(){this.X=0,this.Y=0}static Add(e,t){return t instanceof k?new k(e.X+t.X,e.Y+t.Y):typeof t=="number"?new k(e.X+t,e.Y+t):e}static Sub(e,t){return t instanceof k?new k(e.X-t.X,e.Y-t.Y):typeof t=="number"?new k(e.X-t,e.Y-t):e}static Mul(e,t){return t instanceof k?new k(e.X*t.X,e.Y*t.Y):typeof t=="number"?new k(e.X*t,e.Y*t):e}static Div(e,t){return t instanceof k?new k(e.X/t.X,e.Y/t.Y):typeof t=="number"?new k(e.X/t,e.Y/t):e}}var Ut=(n=>(n[n.none=0]="none",n[n.Buffer=1]="Buffer",n[n.Primitives=2]="Primitives",n[n.GeoPrimitives=3]="GeoPrimitives",n[n.Warps=4]="Warps",n[n.Adjastments=5]="Adjastments",n[n.Profile=6]="Profile",n[n.Filters=7]="Filters",n[n.Erosion=8]="Erosion",n[n.Snow=9]="Snow",n[n.Water=10]="Water",n[n.Data=11]="Data",n[n.Color=12]="Color",n[n.Render=13]="Render",n[n.Output=14]="Output",n))(Ut||{}),ke=(n=>(n[n.NotCalculated=0]="NotCalculated",n[n.Calculation=1]="Calculation",n[n.Calculated=2]="Calculated",n))(ke||{});class x{constructor(e,t,s,o=0,i=0,a="",l=""){r(this,"Name","");r(this,"Description","");r(this,"Value");r(this,"Min",-10);r(this,"Max",10);r(this,"Suffix");r(this,"Category");r(this,"Step");r(this,"valueList");r(this,"Default");this.Name=e,this.Value=t,this.Default=t,this.Min=typeof s=="number"?s:0,this.Max=o,this.Suffix=l,this.Category=a,this.Step=i,this.valueList=s instanceof Array?s:void 0}Reset(){this.Value=this.Default}}class J{constructor(){r(this,"Id",wt());r(this,"Position",new k(0,0));r(this,"LastPosition",new k(0,0));r(this,"Name","");r(this,"Category",Ut.none);r(this,"Properties");r(this,"Inputs",[]);r(this,"Outputs",[]);r(this,"IsSelected",!1);r(this,"Height",0);r(this,"Width",0);r(this,"IsCalculated",!1);r(this,"ParentGraph",null);r(this,"CalculationState",ke.NotCalculated);r(this,"IsRealtimeUpdate",!1);r(this,"DefaultOutput",0)}Move(e,t){this.Position=new k(e,t)}SetSize(e,t){this.Height=e,this.Width=t}SetSelected(e){this.IsSelected=e;const t=ge();e?t.SelectedNode=this:t.SelectedNode==this&&(t.SelectedNode=null)}SetLastPosition(e,t){this.LastPosition.X=e,this.LastPosition.Y=t}BaseCalculate(){this.Outputs.forEach(e=>{e.Links.forEach(t=>{var s,o;(o=(s=t==null?void 0:t.Out)==null?void 0:s.ParentNode)==null||o.SetNotCalculated()})}),this.Inputs.forEach(e=>{var t,s,o,i;e.IsConnected&&((s=(t=e.Links[0].In)==null?void 0:t.ParentNode)==null||s.Calculate(),(i=(o=e.Links[0].In)==null?void 0:o.ParentNode)==null||i.SetCalculated())})}SetNotCalculated(){this.CalculationState=ke.NotCalculated,this.Outputs.forEach(e=>{e.Links.forEach(t=>{var s,o;(o=(s=t==null?void 0:t.Out)==null?void 0:s.ParentNode)==null||o.SetNotCalculated()})})}SetCalculated(){this.CalculationState=ke.Calculated}Calculate(){}}class T{constructor(e,t,s){r(this,"Guid",wt());r(this,"Links",new Array);r(this,"IsInput",!1);r(this,"ParentNode",null);r(this,"Position",new k(0,0));r(this,"OffsetPosition",new k(0,0));r(this,"Value",null);r(this,"Name","");this.ParentNode=t,this.IsInput=e,this.Name=s}get IsConnected(){return this.Links.length>0}SetOffset(e,t){this.OffsetPosition=new k(e,t)}SetPosition(e,t){this.Position=new k(e,t)}}const at=Vt("drag",()=>{const n=$(!1),e=$(),t=$(),s=$();function o(a){s.value=a}function i(){return s.value}return{setNode:o,getNode:i,SourceTerminal:e,DestinationTerminal:t,IsDragging:n}}),ge=Vt("nodes",()=>{const n=$(),e=$();return{SelectedNode:n,LockedNode:e}}),pe=Vt("renderer",()=>{const n=$(!1),e=$(),t=i=>{e.value=i},s=()=>e.value,o=$();return{ChangeEvent:n,Resolution:o,SetRenderer:t,GetRenderer:s}}),Ts=G({__name:"HeapMonitor",setup(n){const e=$(0),t=$(0),s=()=>{setInterval(o,1e3)};Ke(()=>{s()});const o=()=>{performance&&performance.memory&&(e.value=performance.memory.usedJSHeapSize/1024/1024/1024,t.value=performance.memory.jsHeapSizeLimit/1024/1024/1024)};return(i,a)=>{const l=se("font-awesome-icon"),h=Ie("tooltip");return f(),g("div",{onContextmenu:a[0]||(a[0]=le(()=>{},["prevent"])),class:"memory-usage"},[W((f(),g("span",null,[p(l,{icon:["fas","memory"]}),A(" "+R(e.value.toFixed(2))+" / "+R(t.value.toFixed(2))+" ",1),a[1]||(a[1]=b("span",null," GB",-1))])),[[h,"Heap memory usage",void 0,{up:!0}]])],32)}}}),As=Y(Ts,[["__scopeId","data-v-72365581"]]),Xs={class:"status-bar-grid disable-user-select"},Bs={class:"working-status"},Gs=G({__name:"StatusBar",setup(n){pe();const e=$(0);return ie(()=>e.value),(t,s)=>{const o=se("font-awesome-icon");return f(),g("div",Xs,[b("div",Bs,[p(o,{icon:["fas","bars-progress"]}),s[0]||(s[0]=A(" Idle "))]),b("div",null,[p(As)])])}}}),Ys=Y(Gs,[["__scopeId","data-v-ddd0f7cf"]]),Es={class:"collapse"},Hs={class:"carete"},Us={key:0,class:"collapse-body"},Ws=G({__name:"Collapse",setup(n){var e=$(!1);const t=()=>{e.value=!e.value};return(s,o)=>{const i=se("font-awesome-icon");return f(),g("div",Es,[b("div",{onClick:t,class:"header"},[b("div",Hs,[te(e)?(f(),z(i,{key:0,icon:["fas","angle-right"]})):(f(),z(i,{key:1,icon:["fas","angle-down"]}))]),fe(s.$slots,"header",{},void 0,!0)]),te(e)?oe("",!0):(f(),g("div",Us,[fe(s.$slots,"default",{},void 0,!0)]))])}}}),Wt=Y(Ws,[["__scopeId","data-v-ed8ad461"]]),st=L(([n])=>{const e=V(n).toVar();e.assign(e.modInt(u(289)));const t=u(u(34).mul(e.x).add(1).mul(e.x).modInt(289).add(e.y)).toVar();return t.assign(u(34).mul(t).add(u(1)).mul(t).modInt(289)),t.assign(Le(t.div(u(41))).mul(u(2)).sub(1)),Tt(V(t.sub(lt(t.add(.5))),qe(t).sub(.5)))}).setLayout({name:"gradientNoiseDir",type:"vec2",inputs:[{name:"p",type:"vec2"}]}),zs=L(([n])=>{const e=V(n).toVar(),t=V(lt(e)).toVar(),s=V(Le(e)).toVar(),o=u(Ge(st(t),s)).toVar(),i=u(Ge(st(t.add(V(u(0),u(1)))),s.sub(V(u(0),u(1))))).toVar(),a=u(Ge(st(t.add(V(u(1),u(0)))),s.sub(V(u(1),u(0))))).toVar(),l=u(Ge(st(t.add(V(u(1),u(1)))),s.sub(V(u(1),u(1))))).toVar();return s.assign(s.mul(s).mul(s).mul(s.mul(s.mul(u(6)).sub(u(15))).add(u(10)))),B(B(o,i,s.y),B(a,l,s.y),s.x)}).setLayout({name:"gradientNoise",type:"float",inputs:[{name:"p",type:"vec2"}]}),zt=L(([n])=>zs(n).add(.5)),ut=L(([n,e,t,s])=>{const o=re(e).toVar(),i=u(s).toVar(),a=V(t.x,t.y).toVar(),l=V(n.x,n.y).sub(u(.5)).mul(i).toVar();l.addAssign(a);const h=u(0).toVar(),d=u(1).div(2).toVar();return Dt(o,({i:c})=>{const v=l.mul(u(2).pow(u(c))).toVar(),m=zt(v).mul(d).toVar();d.divAssign(2),h.addAssign(m)}),h}).setLayout({name:"perlinNoise",type:"float",inputs:[{name:"UV",type:"vec2"},{name:"octaves",type:"int"},{name:"offset",type:"vec2"},{name:"scale",type:"float"}]}),Fs=Rt(`
fn cracks(uv: vec2<f32>, angle: f32, scale: f32, thickness: f32) -> f32  {
	let st: vec2<f32> = (uv - 0.5) * scale;
	let i_st: vec2<f32> = floor(st);
	let f_st: vec2<f32> = fract(st);
	var m1: f32 = 1.;
	var m2: f32 = 1.;

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let neighbor: vec2<f32> = vec2<f32>(x, y);
			var point: vec2<f32> = random2(i_st + neighbor);
			point = 0.5 + 0.5 * sin(angle + 6.2831 * point);
			let diff: vec2<f32> = neighbor + point - f_st;
			let dist: f32 = length(diff);
			let cond: f32 = step(dist, m1);
			m2 = mix(min(max(m1, dist), m2), m1, cond);
			m1 = mix(m1, dist, cond);
		}

	}

	let edge: f32 = smoothstep(0.01, thickness, m2 - m1);
	return edge;
} 

fn random2(p: vec2<f32>) -> vec2<f32> {
	return fract(sin(vec2<f32>(dot(p, vec2<f32>(127.1, 311.7)), dot(p, vec2<f32>(269.5, 183.3)))) * 43758.547);
} 
`),ht=Rt(`
fn voronoi(UV: vec2<f32>, angleOffset: f32, cellDensity: f32) -> vec2<f32> {
	let g: vec2<f32> = floor((UV - 0.5) * cellDensity);
	let f: vec2<f32> = fract((UV - 0.5) * cellDensity);
	var res: vec3<f32> = vec3<f32>(8., 0., 0.);

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let lattice: vec2<f32> = vec2<f32>(x, y);
			let offset: vec2<f32> = voronoiNoiseRandomVector(lattice + g, angleOffset);
			let d: f32 = distance(lattice + offset, f);
			res = mix(res, vec3<f32>(d, offset.x, offset.y), step(d, res.x));
		}

	}

	return vec2<f32>(res.x, res.y);
} 

fn voronoiNoiseRandomVector(UV: vec2<f32>, offset: f32) -> vec2<f32> {
	var UV_var = UV;
	let m: mat2x2<f32> = mat2x2<f32>(15.27, 47.63, 99.41, 89.98);
	UV_var = fract(sin(UV_var * m) * 46839.32);
	return vec2<f32>(sin(UV_var.y * offset) * 0.5 + 0.5, cos(UV_var.x * offset) * 0.5 + 0.5);
}
`);class qs extends J{constructor(){super(...arguments);r(this,"Name","nodes.perlinNoise");r(this,"Outputs",[new T(!1,this,"Output")]);r(this,"Properties",[new x("Scale",10,0,100,0,"Transform","%"),new x("Octaves Count",10,1,50,1,"Noise",""),new x("Offset X",0,-100,100,0,"Transform",""),new x("Offset Y",0,-100,100,0,"Transform",""),new x("Warp Scale",0,0,1,.001,"Warp","%"),new x("Seed",0,0,99999,0,"Random",""),new x("Height",.4,0,1,0,"Noise","")]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0);r(this,"Random",L(([t])=>{const s=V(t).toVar();return Le(Ye(Ge(s,V(12.9898,78.233))).mul(43758.5453))}))}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value);_(this.Properties[4].Value);const a=_(this.Properties[5].Value),l=_(this.Properties[6].Value);this.Outputs[0].Value=L(([h])=>{const d=V(h.x,h.y).toVar();return d.addAssign(this.Random(V(a).mul(a))),ut(d,s,V(o,i),t).mul(l)})}}const Zs=G({__name:"DraggableNode",props:{GraphNode:{type:Function,required:!0}},setup(n){const e=at(),t=n,s=$(),o=d=>{var v;if((v=d.dataTransfer)==null||v.setData("string","1"),t.GraphNode!=null&&t.GraphNode!=null){var c=t.GraphNode;e.setNode(new c)}};var i=void 0;const a=d=>{var m;i=(m=s.value)==null?void 0:m.cloneNode(!0);var c=i.getBoundingClientRect();if(i.style.position="fixed",i.style.left=`${d.touches[0].pageX-c.width/2}px`,i.style.top=`${d.touches[0].pageY-c.height/2}px`,i.style.zIndex="1000",document.body.appendChild(i),t.GraphNode!=null&&t.GraphNode!=null){var v=t.GraphNode;e.setNode(new v)}},l=d=>{if(i!=null){var c=i.getBoundingClientRect();i.style.left=`${d.touches[0].pageX-c.width/2}px`,i.style.top=`${d.touches[0].pageY-c.height/2}px`}},h=d=>{if(i!=null){document.body.removeChild(i),i=void 0,d.preventDefault(),d.stopPropagation();var c=d.changedTouches[0],v=document.elementFromPoint(c.clientX,c.clientY);console.log(v)}};return window.addEventListener("touchmove",l),window.addEventListener("touchend",h),(d,c)=>(f(),g("div",{onTouchstart:a,onDragstart:o,draggable:"true",class:"node",ref_key:"selfEl",ref:s},[fe(d.$slots,"default",{},void 0,!0)],544))}}),Ks=Y(Zs,[["__scopeId","data-v-ee47cd3c"]]);class q{static register(e){var t=new e;this.classMap.set(t.constructor.name,e)}static registerStr(e,t,s){this.classMap.set(e,s),this.groupsMap.has(t)||this.groupsMap.set(t,new Map);var o=this.groupsMap.get(t);o==null||o.set(e,s)}static create(e,...t){const s=this.classMap.get(e);if(!s)throw new Error(`Class ${e} not registered`);return new s(...t)}static getGroups(){return this.groupsMap}}r(q,"classMap",new Map),r(q,"groupsMap",new Map);const js={class:"node-list"},Js=G({__name:"NodeList",setup(n){var e=q.getGroups();return(t,s)=>{const o=se("font-awesome-icon");return f(),g("div",js,[(f(!0),g(j,null,we(te(e),([i,a])=>(f(),g(j,null,[i!=""?(f(),z(Wt,{key:0},{header:O(()=>[A(R(t.$t(i)),1)]),default:O(()=>[(f(!0),g(j,null,we(a,([l,h])=>(f(),z(Ks,{"-graph-node":h},{default:O(()=>[p(o,{icon:["fas","circle-nodes"]}),A(" "+R(t.$t(l)),1)]),_:2},1032,["-graph-node"]))),256))]),_:2},1024)):oe("",!0)],64))),256))])}}}),Qs=Y(Js,[["__scopeId","data-v-ff1a0b3e"]]),eo={class:"padding"},to={class:"header disable-user-select"},so={class:"body disable-user-select"},oo=G({__name:"FrameTab",props:{wheelFocus:{type:Boolean,default:!0}},setup(n){const e=n,t=$(),s=o=>{t.value&&e.wheelFocus&&t.value.focus()};return(o,i)=>(f(),g("div",eo,[b("div",{class:"main",tabindex:"0",ref_key:"selfEl",ref:t,onWheel:s},[b("div",to,[fe(o.$slots,"header",{},void 0,!0)]),b("div",so,[fe(o.$slots,"default",{},void 0,!0)])],544)]))}}),rt=Y(oo,[["__scopeId","data-v-1982f366"]]);class Me extends J{constructor(){super(...arguments);r(this,"Name","nodes.buffer");r(this,"Inputs",[new T(!0,this,"")]);r(this,"Outputs",[new T(!1,this,"")])}Calculate(){this.BaseCalculate();var t=this.Inputs[0].Links[0].In,s=this.Outputs[0];s.Value=t==null?void 0:t.Value}}class mt{constructor(e,t,s,o){r(this,"X",0);r(this,"Y",0);r(this,"Height",0);r(this,"Width",0);this.X=e,this.Y=t,this.Height=s,this.Width=o}ContainsRect(e){return this.X<=e.X&&e.X+e.Width<=this.X+this.Width&&this.Y<=e.Y&&e.Y+e.Height<=this.Y+this.Height}ContainsPoint(e,t){return this.X<=e&&e<this.X+this.Width&&this.Y<=t&&t<this.Y+this.Height}IntersectsWith(e){return e.X<this.X+this.Width&&this.X<e.X+e.Width&&e.Y<this.Y+this.Height&&this.Y<e.Y+e.Height}static Intersects(e,t){return e.X<t.X+t.Width&&t.X<e.X+e.Width&&e.Y<t.Y+t.Height&&t.Y<e.Y+e.Height}}const no=G({__name:"ContextMenu",props:{CloseOnAnyClick:{type:Boolean,default:!0},CloseOnMouseOut:{type:Boolean,default:!0}},emits:["lost-focus"],setup(n,{expose:e,emit:t}){const s=$(!1),o=$(),i=t,a=n,l=y=>{s.value=!0,ve(()=>{o.value!=null&&o.value!=null&&(o.value.style.left=y.pageX+"px",o.value.style.top=y.pageY+"px",d(),window.addEventListener("mousedown",S))})},h=y=>{ve(()=>{o.value!=null&&(o.value.style.width=y+"px")})},d=()=>{if(o.value!=null&&o.value!=null){const P=o.value.getBoundingClientRect();if(P.y+P.height>window.innerHeight){var y=P.y+P.height-window.innerHeight;o.value.style.top=P.y-y+"px"}if(P.y<0&&(o.value.style.top="0px"),P.x+P.width>window.innerWidth){var y=P.x+P.width-window.innerWidth;o.value.style.left=P.x-y+"px"}P.x<0&&(o.value.style.left="0px")}},c=y=>{s.value=!0,ve(()=>{if(o.value!=null&&o.value!=null){var P=y.getBoundingClientRect();o.value.style.left=P.x+"px",o.value.style.top=P.y+P.height+"px",d(),window.addEventListener("mousedown",S)}})},v=y=>{s.value=!0,ve(()=>{if(o.value!=null&&o.value!=null){var P=y.getBoundingClientRect(),N=o.value.getBoundingClientRect();o.value.style.left=P.x-N.width+"px",o.value.style.top=P.y+"px",d(),window.addEventListener("mousedown",S)}})},m=y=>{s.value=!0,ve(()=>{if(o.value!=null&&o.value!=null){var P=y.getBoundingClientRect();o.value.style.left=P.x+P.width+"px",o.value.style.top=P.y+"px",d(),window.addEventListener("mousedown",S)}})},C=()=>{window.removeEventListener("mousedown",S),s.value=!1},S=y=>{if(a.CloseOnMouseOut&&o.value!=null){var P=o.value.getBoundingClientRect(),N=new mt(P.x,P.y,P.height,P.width);N.ContainsPoint(y.clientX,y.clientY)||(s.value=!1,window.removeEventListener("mousedown",S),i("lost-focus"))}};return e({Open:l,Close:C,OpenUnder:c,OpenLeft:v,OpenRight:m,SetWidth:h,isOpened:s}),(y,P)=>(f(),z(Qt,{name:"open"},{default:O(()=>[(f(),z(Jt,{to:"body"},[s.value?(f(),g("div",{key:0,onContextmenu:P[0]||(P[0]=le(()=>{},["prevent"])),onMousedown:P[1]||(P[1]=le(()=>{},["stop"])),ref_key:"ContextMenu",ref:o,class:"context-menu disable-user-select"},[fe(y.$slots,"default",{},void 0,!0)],544)):oe("",!0)]))]),_:3}))}}),dt=Y(no,[["__scopeId","data-v-bc41e1a3"]]);class Ft{constructor(){r(this,"IsSubGraph",!1);r(this,"Nodes",new Array);r(this,"Links",new Array)}get HasSelected(){return this.Nodes.some(e=>e.IsSelected)||this.Links.some(e=>e.IsSelected)}AddNode(e,t=!0){var s=this.Nodes.indexOf(e);s==-1&&(e.ParentGraph=this,this.Nodes.push(e),t&&ce.PushState(this))}DeleteLink(e,t=!0){var s=this.Links.indexOf(e);s!=-1&&(e.DeleteLinkFromTerminals(),this.Links.splice(s,1),t&&ce.PushState(this))}AddLink(e,t,s=!0){if(!(e.IsInput&&t.IsInput||!e.IsInput&&!t.IsInput)){var o=new Ht;e.IsInput?(o.In=t,o.Out=e):(o.In=e,o.Out=t),t.Links.push(o),e.Links.push(o),this.Links.push(o),s&&ce.PushState(this)}}DeleteNode(e,t=!0){if(e!=null){var s=ge();s.SelectedNode==e&&(s.SelectedNode=null),s.LockedNode==e&&(s.LockedNode=null),e.Inputs.forEach(i=>{var a=i.Links.map(l=>l);a.forEach(l=>{this.DeleteLink(l)})}),e.Outputs.forEach(i=>{var a=i.Links.map(l=>l);a.forEach(l=>{this.DeleteLink(l)})});var o=this.Nodes.indexOf(e);o!=-1&&this.Nodes.splice(o,1),t&&ce.PushState(this)}}DeleteSelected(e=!0){this.Nodes.filter(s=>s.IsSelected).forEach(s=>this.DeleteNode(s,!1));var t=ge();t.SelectedNode=void 0,this.Links.filter(s=>s.IsSelected).forEach(s=>this.DeleteLink(s,!1)),e&&ce.PushState(this)}DeselectAll(){var e=ge();e.SelectedNode=void 0,this.Nodes.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1)),this.Links.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1))}SelectAll(){this.Nodes.forEach(e=>e.SetSelected(!0))}}class ze{static Serialize(e){var a,l,h,d,c,v,m,C;var t=new io;if(e.Nodes!=null&&e.Nodes.length>0)for(const S of e.Nodes){var s=new ao;if(s.NodeType=S.Name,s.NodeGuid=S.Id,s.NodePostition=S.Position,S.Properties!=null&&S.Properties.length>0)for(const y of S.Properties){var o=new ro;o.Value=y.Value,s.Properties==null&&(s.Properties=new Array),s.Properties.push(o)}t.Nodes==null&&(t.Nodes=new Array),t.Nodes.push(s)}if(e.Links!=null&&e.Links.length>0)for(const S of e.Links){var i=new lo;i.FromNodeGuid=(l=(a=S.In)==null?void 0:a.ParentNode)==null?void 0:l.Id,i.ToNodeGuid=(d=(h=S.Out)==null?void 0:h.ParentNode)==null?void 0:d.Id,i.FromTerminalIndex=(v=(c=S.In)==null?void 0:c.ParentNode)==null?void 0:v.Outputs.indexOf(S.In),i.ToTerminalIndex=(C=(m=S.Out)==null?void 0:m.ParentNode)==null?void 0:C.Inputs.indexOf(S.Out),t.Links==null&&(t.Links=new Array),t.Links.push(i)}return t}static Deserialize(e){var t=new Ft;if(e.Nodes!=null&&e.Nodes.length>0)for(var s of e.Nodes){var o=q.create(s.NodeType);if(o.Id=s.NodeGuid,o.Move(s.NodePostition.X,s.NodePostition.Y),s.Properties!=null&&s.Properties.length>0)for(var i=0;i<s.Properties.length;i++)o.Properties[i].Value=s.Properties[i].Value;t.AddNode(o,!1)}if(e.Links!=null&&e.Links.length>0)for(var a of e.Links){var l=xt(t.Nodes).firstOrDefault(d=>d.Id==a.FromNodeGuid),h=xt(t.Nodes).firstOrDefault(d=>d.Id==a.ToNodeGuid);l==null||h==null||t.AddLink(l.Outputs[a.FromTerminalIndex],h.Inputs[a.ToTerminalIndex],!1)}return t}}class io{constructor(){r(this,"Nodes");r(this,"Links")}static ToJson(e){return JSON.stringify(e)}}class ao{constructor(){r(this,"NodeGuid");r(this,"NodeType");r(this,"NodePostition");r(this,"Properties")}}class ro{constructor(){r(this,"Value")}}class lo{constructor(){r(this,"FromNodeGuid");r(this,"ToNodeGuid");r(this,"FromTerminalIndex");r(this,"ToTerminalIndex")}}class uo{constructor(e){r(this,"buffer");r(this,"capacity");r(this,"head",0);r(this,"tail",0);r(this,"size",0);r(this,"poppedItems",[]);if(e<=0)throw new Error("Capacity must be greater than 0");this.capacity=e,this.buffer=new Array(e)}get hasValues(){return this.size>0}get hasPoppedItems(){return this.poppedItems.length>0}push(e){this.poppedItems=[],this.size===this.capacity?(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.head=(this.head+1)%this.capacity):(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++)}pop(){if(!this.hasValues)return;this.tail=(this.tail-1+this.capacity)%this.capacity;const e=this.buffer[this.tail];return this.size--,this.poppedItems.push(e),e}unpop(){if(!this.hasPoppedItems)return;const e=this.poppedItems.pop();return this.size===this.capacity&&(this.head=(this.head+1)%this.capacity),this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++,e}toArray(){const e=[];for(let t=0;t<this.size;t++){const s=(this.head+t)%this.capacity;e.push(this.buffer[s])}return e}peek(){if(this.hasValues)return this.buffer[(this.tail-1+this.capacity)%this.capacity]}get length(){return this.size}}class ce{static get HasValues(){return this.ActionHistoryBuffer.hasValues}static get HasPopped(){return this.ActionHistoryBuffer.hasPoppedItems}static PushState(e){this.ActionHistoryBuffer.push(ze.Serialize(e))}static UnpopState(){if(this.ActionHistoryBuffer.hasPoppedItems){var e=this.ActionHistoryBuffer.unpop();return ze.Deserialize(e)}return null}static PopState(){if(this.ActionHistoryBuffer.hasValues){var e=this.ActionHistoryBuffer.pop();return ze.Deserialize(e)}return null}}r(ce,"ActionHistoryBuffer",new uo(25));class Mt{static pathExists(e,t){if(e===t)return!0;const s=new Set;return this.dfs(e,t,s)}static dfs(e,t,s){if(e===t)return!0;if(s.has(e))return!1;s.add(e);for(const o of e.Outputs)for(const i of o.Links)if(i.Out!=null&&i.Out!=null){const a=i.Out.ParentNode;if(this.dfs(a,t,s))return!0}return!1}}const co=G({__name:"TerminalRenderer",props:{Term:{type:T,required:!0}},setup(n,{expose:e}){const t=at(),s=n,o=c=>{t.SourceTerminal=s.Term,t.IsDragging=!0,window.addEventListener("mouseup",i)},i=c=>{var S,y,P;window.removeEventListener("mouseup",i),t.IsDragging=!1;var v=t.DestinationTerminal,m=t.SourceTerminal;if(v!=null&&v!=m&&!(m!=null&&m.IsInput&&v.IsInput)&&(m==null?void 0:m.ParentNode)!=v.ParentNode){if(m!=null&&m.IsInput){if(Mt.pathExists(m==null?void 0:m.ParentNode,v.ParentNode))return;m.Links.forEach(N=>{var X,ee;(ee=(X=m==null?void 0:m.ParentNode)==null?void 0:X.ParentGraph)==null||ee.DeleteLink(N)})}if(v.IsInput){if(Mt.pathExists(v==null?void 0:v.ParentNode,m==null?void 0:m.ParentNode))return;v.Links.forEach(N=>{var X,ee;(ee=(X=v==null?void 0:v.ParentNode)==null?void 0:X.ParentGraph)==null||ee.DeleteLink(N)})}(y=(S=s.Term.ParentNode)==null?void 0:S.ParentGraph)==null||y.AddLink(v,m);var C=pe();(P=s.Term.ParentNode)!=null&&P.IsRealtimeUpdate&&(C.ChangeEvent=!C.ChangeEvent)}},a=c=>{t.IsDragging&&(t.DestinationTerminal=s.Term)},l=c=>{t.IsDragging&&(t.DestinationTerminal=null)},h=$();Ke(()=>{ve(()=>{d()})});const d=()=>{var m,C,S,y;var c=((m=h.value)==null?void 0:m.offsetLeft)+((C=h.value)==null?void 0:C.offsetWidth)/2+2,v=((S=h.value)==null?void 0:S.offsetTop)+((y=h.value)==null?void 0:y.offsetHeight)/2+2;s.Term.SetOffset(c,v)};return e({SetOffset:d}),(c,v)=>{const m=Ie("tooltip");return W((f(),g("div",{class:Oe(["node-terminal",{connected:s.Term.IsConnected},"disable-user-select"]),onMousedown:[v[0]||(v[0]=le(()=>{},["right","stop"])),le(o,["left"])],onMouseover:a,onMouseleave:l,ref_key:"selfEl",ref:h},null,34)),[[m,{content:s.Term.Name,placement:s.Term.IsInput?"left":"right"}]])}}}),kt=Y(co,[["__scopeId","data-v-278bc81c"]]),ho=G({__name:"ContextMenuItem",props:{Active:{type:Boolean,default:!1}},setup(n){return(e,t)=>(f(),g("button",{class:Oe([["btn",{active:n.Active}],"btn"]),style:{padding:"5px"}},[fe(e.$slots,"default",{},void 0,!0)],2))}}),de=Y(ho,[["__scopeId","data-v-3e13e567"]]),fo={},po={class:"loader"};function mo(n,e){return f(),g("span",po)}const qt=Y(fo,[["render",mo],["__scopeId","data-v-8c5c5c6f"]]),vo={class:"node-container"},go={class:"node-terminals left"},wo={class:"node-center"},Vo={class:"node-name"},yo={class:"node-terminals right"},So=G({__name:"NodeRenderer",props:{Offset:{type:k,required:!0},Zoom:{type:Number,required:!0},Node:{type:J,required:!0},AllNodes:{type:Array,default:new Array}},setup(n){Lt(w=>({ffff5e60:c.value,"383b061b":h.value,"61bc17fe":d.value,b65c9c1c:v.value}));var e=n;const t=$(),s=Fe("contextMenu"),o=Fe("terminals");Ke(()=>{window.addEventListener("mousemove",E),window.addEventListener("mouseup",_e),ve(()=>{var w=e.Node,I=t.value;if(w.SetSize(I.offsetHeight,I.offsetWidth),w.Move(w.Position.X-w.Width/2,w.Position.Y-w.Height/2),t!=null){var M=new ResizeObserver(y);M.observe(t.value)}})});const i=$(new k(0,0)),a=$(!1),l=ie(()=>{var w=ge();return w.LockedNode==e.Node}),h=ie(()=>{var w=e.Node.Position.Y;return w+"px"}),d=ie(()=>{var w=e.Node.Position.X;return w+"px"}),c=ie(()=>a.value?"grabbing":"default"),v=ie(()=>e.Node.IsSelected?"1":"0"),m=ie(()=>{var w=ge(),I=w.LockedNode;return I!=null&&I==e.Node}),C=w=>{var I;(I=s.value)==null||I.Open(w)},S=()=>{var w;(w=s.value)==null||w.Close()},y=()=>{var w;o.value!=null&&((w=o.value)==null||w.forEach(I=>{I==null||I.SetOffset()}))},P=()=>{var w=ge(),I=pe();w.LockedNode==e.Node?w.LockedNode=null:(w.LockedNode=e.Node,e.Node.SetSelected(!0),I.ChangeEvent=!I.ChangeEvent)},N=(w,I,M)=>{var D,Z,Q,me,Ce;if(a.value=!0,i.value.X=w,i.value.Y=I,M)e.Node.SetSelected(!((D=e.Node)!=null&&D.IsSelected));else{var H=(Z=e.Node.ParentGraph)==null?void 0:Z.Nodes.filter(ae=>ae.IsSelected);H.length>1?e.Node.IsSelected==!1&&((Q=e.Node.ParentGraph)==null||Q.DeselectAll(),e.Node.SetSelected(!0)):((me=e.Node.ParentGraph)==null||me.DeselectAll(),e.Node.SetSelected(!0))}(Ce=e.Node.ParentGraph)==null||Ce.Nodes.filter(ae=>ae.IsSelected).forEach(ae=>{ae.SetLastPosition(ae.Position.X,ae.Position.Y)}),ce.PushState(e.Node.ParentGraph)},X=w=>{if(o.value!=null&&o.value.some(H=>H.$el==w.target||H==w.target))return;let I=w.touches[0].clientX,M=w.touches[0].clientY;N(I,M,!1)},ee=w=>{o.value!=null&&o.value.some(I=>I.$el==w.target||I==w.target)||N(w.clientX,w.clientY,w.shiftKey)},_e=w=>{a.value=!1},be=w=>{a.value=!1},ue=w=>{let I=w.touches[0].clientX,M=w.touches[0].clientY;F(I,M)},F=(w,I)=>{var D;if(a.value){var M=(w-i.value.X)/e.Zoom,H=(I-i.value.Y)/e.Zoom;(D=e.Node.ParentGraph)==null||D.Nodes.filter(Z=>Z.IsSelected).forEach(Z=>{Z.Move(Z.LastPosition.X+M,Z.LastPosition.Y+H)})}},E=w=>{F(w.clientX,w.clientY)};return(w,I)=>{const M=se("font-awesome-icon"),H=Ie("tooltip");return f(),g("div",{class:Oe([{node:!(n.Node instanceof te(Me))},{"node-buffer":n.Node instanceof te(Me)},"disable-user-select",{"not-calculated":n.Node.CalculationState==te(ke).NotCalculated&&!(n.Node instanceof te(Me))},{selected:n.Node.IsSelected},{lockedPreview:l.value},{"node-without-inputs":n.Node.Inputs.length==0}]),ref_key:"rootEl",ref:t,onMousedown:[le(ee,["left"]),le(C,["right"])],onTouchmove:ue,onTouchstart:X,onTouchend:be},[b("div",vo,[b("div",go,[(f(!0),g(j,null,we(n.Node.Inputs,D=>(f(),z(kt,{ref_for:!0,ref_key:"terminals",ref:o,key:D.Guid,Term:D},null,8,["Term"]))),128))]),b("div",wo,[n.Node instanceof te(Me)?oe("",!0):(f(),g(j,{key:0},[W((f(),g("a",{class:"lock-icon",onClick:I[0]||(I[0]=D=>P())},[m.value?(f(),z(M,{key:0,icon:["fas","lock"]})):(f(),z(M,{key:1,icon:["fas","lock-open"]}))])),[[H,{content:w.$t("tt.lockPreview"),placement:"bottom"}]]),b("div",Vo,R(w.$t(n.Node.Name)),1),n.Node.CalculationState==te(ke).Calculation?(f(),z(qt,{key:0})):oe("",!0)],64))]),b("div",yo,[(f(!0),g(j,null,we(n.Node.Outputs,D=>(f(),z(kt,{ref_for:!0,ref_key:"terminals",ref:o,key:D.Guid,Term:D},null,8,["Term"]))),128))])]),p(dt,{ref_key:"contextMenu",ref:s,CloseOnAnyClick:!0},{default:O(()=>[p(de,null,{default:O(()=>[p(M,{icon:["far","copy"]}),A(" "+R(w.$t("tt.copy")),1)]),_:1}),p(de,{onClick:I[1]||(I[1]=D=>{var Z,Q;(Z=n.Node.ParentGraph)==null||Z.DeleteNode(n.Node),(Q=n.Node.ParentGraph)==null||Q.DeleteSelected(),S()}),style:{color:"var(--vt-c-red)"}},{default:O(()=>[p(M,{icon:["far","trash-can"]}),A(" "+R(w.$t("tt.delete")),1)]),_:1}),I[3]||(I[3]=b("hr",null,null,-1)),p(de,{onClick:I[2]||(I[2]=D=>{P(),S()})},{default:O(()=>[m.value?(f(),z(M,{key:0,icon:["fas","lock"]})):(f(),z(M,{key:1,icon:["fas","lock-open"]})),m.value?(f(),g(j,{key:2},[A("  "+R(w.$t("tt.unlockPreview")),1)],64)):(f(),g(j,{key:3},[A("  "+R(w.$t("tt.lockPreview")),1)],64))]),_:1})]),_:1,__:[3]},512)],34)}}}),_o=Y(So,[["__scopeId","data-v-1ec07e1f"]]),bo={},xo={class:"canvas",xmlns:"http://www.w3.org/2000/svg"};function Po(n,e){return f(),g("svg",xo,[fe(n.$slots,"default",{},void 0,!0)])}const Io=Y(bo,[["render",Po],["__scopeId","data-v-81940268"]]),Co=["points"],No=G({computed:{Points(){var t,s,o,i,a,l;var n=k.Add((s=(t=this.Link.In)==null?void 0:t.ParentNode)==null?void 0:s.Position,(o=this.Link.In)==null?void 0:o.OffsetPosition),e=k.Add((a=(i=this.Link.Out)==null?void 0:i.ParentNode)==null?void 0:a.Position,(l=this.Link.Out)==null?void 0:l.OffsetPosition);return`${n.X},${n.Y} ${n.X+20},${n.Y} ${e.X-20},${e.Y} ${e.X},${e.Y}`}}}),Mo=G({...No,__name:"LinkRenderer",props:{Link:{type:Ht,required:!0}},setup(n){const e=n,t=()=>{e.Link.SetSelected(!0)},s=o=>{var d;var i=e.Link.In,a=e.Link.Out;if(!(i==null||a==null)){var l=new Me;l.Move(o.offsetX,o.offsetY);var h=(d=i.ParentNode)==null?void 0:d.ParentGraph;h!=null&&(h.DeleteLink(e.Link),h.AddNode(l),h.AddLink(i,l.Inputs[0]),h.AddLink(l.Outputs[0],a))}};return(o,i)=>(f(),g("polyline",{onClick:t,onDblclick:s,points:o.Points,class:Oe(["line",{selected:e.Link.IsSelected}])},null,42,Co))}}),ko=Y(Mo,[["__scopeId","data-v-a61d9acd"]]),Oo={},Lo={class:"tool-bar-container"};function $o(n,e){return f(),g("div",Lo,[fe(n.$slots,"default",{},void 0,!0)])}const vt=Y(Oo,[["render",$o],["__scopeId","data-v-b20ca96b"]]),Ro={},Do={class:"tool-bar-body"};function To(n,e){return f(),g("div",Do,[fe(n.$slots,"default")])}const ye=Y(Ro,[["render",To]]),Ao={key:0,class:"selection-box"},Xo={class:"offset-container",ref:"offset_container"},Bo=["points"],Go={key:1,style:{"pointer-events":"none",height:"100%",width:"100%",padding:"30px"}},Yo=G({props:{MinScale:{type:Number,default:.5},MaxScale:{type:Number,default:2}},data(){return{Offset:new k(0,0),SelectionBox:new mt(0,0,0,0),SelectionBoxVisibility:!1,LastMouse:new k(0,0),LastOffset:new k(0,0),Zoom:1,isDragging:!1,_Graph:new Ft,dragStore:at(),points:"",GridSize:20,isDragOver:!1}},computed:{Nodes:function(){return this._Graph.Nodes},OffsetXStyle:function(){return this.Offset.X+"px"},OffsetYStyle:function(){return this.Offset.Y+"px"},EditorCursor:function(){return this.isDragging?"grabbing":"default"},SelectionBoxX:function(){return this.SelectionBox.X+"px"},SelectionBoxY:function(){return this.SelectionBox.Y+"px"},SelectionBoxHeight:function(){return this.SelectionBox.Height+"px"},SelectionBoxWidth:function(){return this.SelectionBox.Width+"px"},OffsetStyle:function(){var n=this.GridSize/2*this.Zoom;return this.Offset.X-n+"px "+(this.Offset.Y-n)+"px"},ScaleGridStyle:function(){var n=(this.GridSize*this.Zoom).toString();return`${n}px ${n}px`}},created(){window.addEventListener("mousemove",this.OnMouseMove),window.addEventListener("mouseup",this.OnMouseUp)},mounted(){this.$nextTick(()=>{var e;this.$el;var n=((e=this.$parent)==null?void 0:e.$el).parentElement;n!=null&&(n.onkeydown=this.KeysHandler)})},methods:{SaveGraph(){var n=ze.Serialize(this._Graph),e=JSON.stringify(n);console.log(e);var t=JSON.parse(e);console.log(t);var s=ze.Deserialize(t);console.log(s)},Undo(){var n=ce.PopState();n!=null&&(this._Graph=n)},Redo(){var n=ce.UnpopState();n!=null&&(this._Graph=n)},isChild(n,e){for(var t=e.parentNode;t!=null;){if(t==n)return!0;t=t.parentNode}return!1},dragenter(){this.isDragOver=!0},dragleave(n){var e=this.$el,t=n.target;this.isChild(e,t)||(this.isDragOver=!1)},drop(n){this.isDragOver=!1;var e=at(),t=e.getNode();if(t!=null){var s=this.$refs.editor,o=s.getBoundingClientRect();if(o!=null){ce.PushState(this._Graph);var i=k.Div(new k(n.clientX-o.x-this.Offset.X,n.clientY-o.y-this.Offset.Y),this.Zoom);t==null||t.Move(i.X,i.Y),this._Graph.AddNode(t)}}},KeysHandler(n){n.key=="Delete"&&(ce.PushState(this._Graph),this._Graph.DeleteSelected())},UpdateOffsetStyle(){var n=this.$refs.offset_container;n.style.left=this.OffsetXStyle,n.style.top=this.OffsetYStyle,n.style.scale=this.Zoom.toString()},OnMouseDownLeft:function(n){this.DrawGhostLine(n),n.target==this.$refs.editor&&(this.LastMouse=new k(n.clientX,n.clientY),this.SelectionBox.X=0,this.SelectionBox.Y=0,this.SelectionBox.Width=0,this.SelectionBox.Height=0,this.SelectionBoxVisibility=!0,this._Graph.DeselectAll())},OnMouseDownMiddle:function(n){this.isDragging=!0,this.LastMouse=new k(n.clientX,n.clientY),this.LastOffset={...this.Offset}},OnMouseMove:function(n){if(this.isDragging){n.preventDefault();var e=n.clientX-this.LastMouse.X,t=n.clientY-this.LastMouse.Y;this.Offset.X=this.LastOffset.X+e,this.Offset.Y=this.LastOffset.Y+t,this.UpdateOffsetStyle()}if(this.SelectionBoxVisibility){n.preventDefault();var s=new k(n.clientX,n.clientY),o=new k(Math.min(this.LastMouse.X,s.X),Math.min(this.LastMouse.Y,s.Y)),i=new k(Math.abs(this.LastMouse.X-s.X),Math.abs(this.LastMouse.Y-s.Y)),a=this.$refs.editor,l=a.getBoundingClientRect();this.SelectionBox.X=o.X-l.left,this.SelectionBox.Y=o.Y-l.top,this.SelectionBox.Width=i.X,this.SelectionBox.Height=i.Y,this._Graph.Nodes.forEach(h=>{var d=new mt(this.Offset.X+h.Position.X*this.Zoom,this.Offset.Y+h.Position.Y*this.Zoom,h.Height*this.Zoom,h.Width*this.Zoom);this.SelectionBox.IntersectsWith(d)?h.SetSelected(!0):h.SetSelected(!1)})}this.DrawGhostLine(n)},OnMouseUp:function(n){this.isDragging=!1,this.SelectionBoxVisibility=!1},OnWheel:function(n){let t=this.$refs.editor.getBoundingClientRect(),s=n.deltaY*.001,o=this.Zoom;this.Zoom=this.Clamp(this.Zoom-s,this.MinScale,this.MaxScale);let i=new k(n.clientX-t.left,n.clientY-t.top),a=(o-this.Zoom)/o;this.Offset=k.Add(this.Offset,k.Mul(k.Sub(i,this.Offset),a)),this.UpdateOffsetStyle()},DisableContextMenu(n){n.preventDefault()},Clamp:function(n,e,t){return Math.min(Math.max(n,e),t)},DrawGhostLine(n){var h;if(this.dragStore.IsDragging){var e=this.$refs.editor,t=e.getBoundingClientRect();if(n.preventDefault(),t!=null){var s=this.dragStore.SourceTerminal,o=k.Add((h=s.ParentNode)==null?void 0:h.Position,s.OffsetPosition),i=k.Div(new k(n.clientX-t.x-this.Offset.X,n.clientY-t.y-this.Offset.Y),this.Zoom),a=s.IsInput?i:o,l=s.IsInput?o:i;this.points=`${a.X},${a.Y} ${a.X+20},${a.Y} ${l.X-20},${l.Y} ${l.X},${l.Y}`}}}}}),Eo=G({...Yo,__name:"GraphRenderer",setup(n){return Lt(e=>({"51e4f16f":e.EditorCursor,"1823eece":e.SelectionBoxY,"1823eecd":e.SelectionBoxX,"2135601c":e.SelectionBoxHeight,"73e8e99b":e.SelectionBoxWidth,"0236c9a6":e.ScaleGridStyle,b8eb45dc:e.OffsetStyle})),(e,t)=>{const s=se("font-awesome-icon"),o=Ie("tooltip");return f(),g("div",{class:"graph-renderer dot",ref:"editor",onWheel:t[4]||(t[4]=(...i)=>e.OnWheel&&e.OnWheel(...i)),onMousedown:[t[5]||(t[5]=le((...i)=>e.OnMouseDownLeft&&e.OnMouseDownLeft(...i),["left"])),t[6]||(t[6]=le((...i)=>e.OnMouseDownMiddle&&e.OnMouseDownMiddle(...i),["middle"]))],onContextmenu:le(()=>!1,["prevent","right"]),onDragover:t[7]||(t[7]=le(()=>{},["prevent"])),onDragenter:t[8]||(t[8]=(...i)=>e.dragenter&&e.dragenter(...i)),onDragleave:t[9]||(t[9]=(...i)=>e.dragleave&&e.dragleave(...i)),onDrop:t[10]||(t[10]=(...i)=>e.drop&&e.drop(...i))},[p(vt,{class:"top-left"},{default:O(()=>[p(ye,null,{default:O(()=>[W((f(),g("a",{onClick:t[0]||(t[0]=i=>e.Undo())},[p(s,{icon:["fas","rotate-left"]})])),[[o,e.$t("tt.undo"),void 0,{bottom:!0}]]),W((f(),g("a",{onClick:t[1]||(t[1]=i=>e.Redo())},[p(s,{icon:["fas","rotate-right"]})])),[[o,e.$t("tt.redo"),void 0,{bottom:!0}]])]),_:1}),p(ye,null,{default:O(()=>[W((f(),g("a",null,[p(s,{icon:["far","copy"]})])),[[o,e.$t("tt.copy"),void 0,{bottom:!0}]]),W((f(),g("a",null,[p(s,{icon:["far","paste"]})])),[[o,e.$t("tt.paste"),void 0,{bottom:!0}]]),W((f(),g("a",{class:Oe([{disabled:!e._Graph.HasSelected}]),style:{color:"var(--vt-c-red)"},onClick:t[2]||(t[2]=i=>e._Graph.DeleteSelected())},[p(s,{icon:["far","trash-can"]})],2)),[[o,e.$t("tt.delete"),void 0,{bottom:!0}]])]),_:1}),p(ye,null,{default:O(()=>[W((f(),g("a",null,[p(s,{icon:["fas","expand"]})])),[[o,e.$t("tt.fullscreen"),void 0,{bottom:!0}]])]),_:1})]),_:1}),p(vt,{class:"bottom-left"},{default:O(()=>[p(ye,null,{default:O(()=>[b("span",null,[e.Zoom<1?(f(),z(s,{key:0,icon:["fas","magnifying-glass-minus"]})):(f(),z(s,{key:1,icon:["fas","magnifying-glass-plus"]})),A(" "+R((e.Zoom*100).toFixed(0))+"%",1)])]),_:1}),p(ye,null,{default:O(()=>[b("span",null,[p(s,{icon:["fas","up-down-left-right"]}),A(" X: "+R(e.Offset.X.toFixed())+" Y: "+R(e.Offset.Y.toFixed()),1)])]),_:1}),p(ye,null,{default:O(()=>[W((f(),g("a",{onClick:t[3]||(t[3]=i=>{e.Offset.Reset(),e.Zoom=1,e.UpdateOffsetStyle()})},[p(s,{icon:["fas","arrows-rotate"]})])),[[o,e.$t("tt.resetView")]])]),_:1}),p(ye,null,{default:O(()=>[b("span",null,[p(s,{icon:["fas","circle-info"]}),A(" "+R(e.$t("hints.graphLmb")),1)])]),_:1}),p(ye,null,{default:O(()=>[b("span",null,[p(s,{icon:["fas","circle-info"]}),A(" "+R(e.$t("hints.graphWheel")),1)])]),_:1})]),_:1}),e.SelectionBoxVisibility?(f(),g("div",Ao)):oe("",!0),b("div",Xo,[p(Io,{id:"links-container"},{default:O(()=>[p(Pt,{name:"link"},{default:O(()=>[(f(!0),g(j,null,we(e._Graph.Links,i=>(f(),z(ko,{key:i.Id,Link:i},null,8,["Link"]))),128))]),_:1}),e.dragStore.IsDragging?(f(),g("polyline",{key:0,class:"ghost-line",points:e.points},null,8,Bo)):oe("",!0)]),_:1}),p(Pt,{name:"delete",tag:"div"},{default:O(()=>[(f(!0),g(j,null,we(e.Nodes,i=>(f(),z(_o,{key:i.Id,Offset:e.Offset,Zoom:e.Zoom,Node:i},null,8,["Offset","Zoom","Node"]))),128))]),_:1})],512),e.isDragOver?(f(),g("div",Go,t[11]||(t[11]=[b("div",{style:{height:"100%",width:"100%","border-radius":"50px",border:"4px dashed var(--vt-c-black-mute)"}},null,-1)]))):oe("",!0)],544)}}}),Ho=Y(Eo,[["__scopeId","data-v-432b4649"]]),Uo={style:{height:"100%",display:"flex","flex-direction":"row"}},Wo={style:{"margin-left":"5px"}},zo={style:{"margin-left":"5px"}},Fo=G({__name:"EditorView",setup(n){return(e,t)=>{const s=se("font-awesome-icon");return f(),g("div",Uo,[p(rt,{style:{width:"20%","min-width":"300px"}},{header:O(()=>[p(s,{icon:["fas","list"]}),t[0]||(t[0]=A()),b("span",Wo,R(e.$t("windows.nodesList")),1)]),default:O(()=>[p(Qs)]),_:1}),p(rt,{style:{width:"80%"}},{header:O(()=>[p(s,{icon:["fas","circle-nodes"]}),t[1]||(t[1]=A()),b("span",zo,R(e.$t("windows.graph")),1)]),default:O(()=>[p(Ho)]),_:1})])}}}),qo={style:{display:"flex","flex-direction":"row"}},Zo={style:{width:"100%","font-weight":"bold","text-align":"left","margin-left":"10px"}},Ko={style:{width:"100%","font-weight":"bold","text-align":"right","margin-right":"10px"}},jo={style:{width:"10px","margin-right":"10px"}},Jo={key:0,class:"dropdown"},Qo=["onClick"],en=G({__name:"SelectDropdown",props:{options:{type:Array,required:!1,default:[]},title:{type:String,required:!1,default:""},default:{type:String,required:!1,default:null},modelValue:{type:String,default:""},RealtimeChange:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(n,{emit:e}){$(!1);const t=n,s=$(t.default?t.default:t.options.length>0?t.options[0]:null),o=$(!1);We(()=>t.modelValue,a=>{s.value=a});const i=()=>{var a=pe();t.RealtimeChange&&(a.ChangeEvent=!a.ChangeEvent)};return(a,l)=>{const h=se("font-awesome-icon");return f(),g("div",{class:"dropdown-head input-element value",tabindex:"0",onBlur:l[1]||(l[1]=d=>o.value=!1),style:{width:"100%",position:"relative"}},[b("div",{onClick:l[0]||(l[0]=d=>o.value=!o.value),style:{height:"100%"}},[b("div",qo,[b("div",Zo,R(t.title)+R(t.title==""?"":":"),1),b("div",Ko,R(s.value),1),b("div",jo,[o.value?(f(),z(h,{key:1,icon:["fas","angle-up"]})):(f(),z(h,{key:0,icon:["fas","angle-down"]}))])])]),o.value?(f(),g("ul",Jo,[(f(!0),g(j,null,we(n.options,(d,c)=>(f(),g("li",{class:Oe({selected:d==s.value}),key:c,onClick:v=>{s.value=d,o.value=!1,a.$emit("update:modelValue",s.value),i()}},R(d),11,Qo))),128))])):oe("",!0)],32)}}}),tn=Y(en,[["__scopeId","data-v-61887904"]]),sn=G({__name:"LangSwitch",setup(n){const e=gt(),t=$("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);const s=h=>{e!=null&&(e.appContext.config.globalProperties.$i18n.locale=h,localStorage.setItem("userLang",h),t.value=h)},o=Fe("langContextMenu"),i=$(),a=h=>{var d;(i!=null||i!=null)&&((d=o.value)==null||d.OpenUnder(i.value))};var l=new Map;return l.set("en","English"),l.set("ru","Русский"),(h,d)=>{const c=se("flag");return f(),g(j,null,[b("button",{ref_key:"langSwitchBtn",ref:i,class:"btn disable-user-select",onClick:a},[p(c,{iso:t.value=="en"?"gb":t.value},null,8,["iso"]),A(" "+R(te(l).get(t.value)),1)],512),p(dt,{ref:"langContextMenu"},{default:O(()=>[b("button",{class:"btn btnContextMenuPadding",onClick:d[0]||(d[0]=v=>{var m;s("ru"),(m=o.value)==null||m.Close()})},[p(c,{iso:"ru"}),d[2]||(d[2]=A(" Русский"))]),b("button",{class:"btn btnContextMenuPadding",onClick:d[1]||(d[1]=v=>{var m;s("en"),(m=o.value)==null||m.Close()})},[p(c,{iso:"gb"}),d[3]||(d[3]=A(" English"))])]),_:1},512)],64)}}}),on=G({__name:"ToggleButton",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=$t(n,"modelValue");return(t,s)=>(f(),g("button",{class:Oe(["btn",{toggled:e.value}]),onClick:s[0]||(s[0]=o=>e.value=!e.value)},[fe(t.$slots,"default",{},void 0,!0)],2))}}),nn=Y(on,[["__scopeId","data-v-4a53f642"]]),an=G({__name:"ResolutionSwitcher",setup(n){const e=gt(),t=$("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);var s=pe();const o=Fe("contextMenu"),i=$(),a=v=>{var C,S,y;if(i!=null||i!=null){var m=(C=i.value)==null?void 0:C.getBoundingClientRect();(S=o.value)==null||S.OpenUnder(i.value),m!=null&&((y=o.value)==null||y.SetWidth(m.width))}},l=["0.5K","1K","2K","4K","8K"],h=[512,1024,2048,4096,8192],d=$(0),c=v=>{d.value=v;var m=s.GetRenderer();m!=null&&(m.ChangeResolution(h[v]),requestAnimationFrame(()=>m==null?void 0:m.Render()))};return(v,m)=>{const C=se("font-awesome-icon"),S=Ie("tooltip");return f(),g(j,null,[W((f(),g("button",{ref_key:"switcher",ref:i,class:"btn disable-user-select",onClick:a},[p(C,{icon:["fas","vector-square"]}),A(" "+R(l[d.value])+" ",1),p(C,{icon:["fas","angle-down"]})])),[[S,v.$t("tt.mesh_resolution"),void 0,{bottom:!0}]]),p(dt,{ref_key:"contextMenu",ref:o},{default:O(()=>[(f(),g(j,null,we(l,(y,P)=>(f(),g(j,null,[P>2?W((f(),z(de,{key:0,class:"waringText",Active:P==d.value,onClick:N=>{var X;c(P),(X=o.value)==null||X.Close()}},{default:O(()=>[p(C,{icon:["fas","vector-square"]}),A(" "+R(y),1)]),_:2},1032,["Active","onClick"])),[[S,{content:v.$t("tt.resolutionWarning"),html:!0,distance:15},void 0,{right:!0}]]):(f(),z(de,{key:1,Active:P==d.value,onClick:N=>{var X;c(P),(X=o.value)==null||X.Close()}},{default:O(()=>[p(C,{icon:["fas","vector-square"]}),A(" "+R(y),1)]),_:2},1032,["Active","onClick"]))],64))),64))]),_:1},512)],64)}}}),Ot=Y(an,[["__scopeId","data-v-97dd3ce3"]]),rn={style:{height:"100%",width:"100%",position:"relative"}},ln=["value"],un=G({__name:"ProjectNameEditor",props:It({modelValue:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:It(["update:modelValue"],["update:modelValue"]),setup(n,{emit:e}){const t=$t(n,"modelValue"),s=e,o=$(!1),i=$(),a=$(),l=()=>{o.value=!0,ve(()=>{var v;a.value=t.value,(v=i.value)==null||v.focus()})},h=v=>{s("update:modelValue",a.value),o.value=!1},d=v=>{v.target!=null&&(a.value=v.target.value,s("update:modelValue",a.value))},c=v=>{v.key=="Enter"&&(v.target!=null&&(a.value=v.target.value,s("update:modelValue",a.value)),o.value=!1)};return(v,m)=>{const C=se("font-awesome-icon");return f(),g("div",rn,[o.value?(f(),g("input",{key:0,ref_key:"input",ref:i,onFocusout:h,onInput:d,onKeypress:c,class:"editor",value:t.value},null,40,ln)):(f(),g("div",{key:1,class:"label",onClick:l},R(t.value),1)),p(C,{class:"icon",icon:["fas","pen"]})])}}}),dn=Y(un,[["__scopeId","data-v-1b5ff080"]]),cn={style:{"margin-left":"auto",right:"0px",height:"100%","white-space":"nowrap",overflow:"hidden"}},hn={class:"btn"},fn={class:"btn"},pn={class:"btn"},mn={class:"btn"},vn={class:"btn"},gn={class:"btn"},wn={class:"btn"},Vn={class:"btn"},yn={class:"btn"},Sn=450,_n=G({__name:"ActionButtonsBar",setup(n){const e=$(),t=Fe("contextMenu"),s=$(),o=$(),i=l=>{var h;(s!=null||s!=null)&&((h=t.value)==null||h.OpenUnder(s.value))},a=()=>{var d;var l=(d=e.value)==null?void 0:d.getBoundingClientRect();if(l!=null){var h=l==null?void 0:l.width;h!=null&&h<Sn?o.value=!0:o.value=!1}};return Ke(()=>{ve(()=>{a(),window.addEventListener("resize",()=>{a()})})}),(l,h)=>{const d=se("font-awesome-icon"),c=Ie("tooltip");return f(),g("div",{ref_key:"menuContainer",ref:e,style:{display:"flex",height:"100%",width:"100%","white-space":"nowrap",overflow:"hidden"}},[b("div",cn,[o.value?(f(),g(j,{key:0},[p(Ot),h[3]||(h[3]=b("div",{class:"separator"},null,-1)),W((f(),g("button",{onClick:i,ref_key:"contextMenuButton",ref:s,class:"btn"},[p(d,{icon:["fas","fa-bars"]})])),[[c,l.$t("tt.menu"),void 0,{bottom:!0}]]),p(dt,{ref_key:"contextMenu",ref:t},{default:O(()=>[p(de,null,{default:O(()=>[p(d,{icon:["fas","file"]}),A(" "+R(l.$t("tt.new")),1)]),_:1}),p(de,null,{default:O(()=>[p(d,{icon:["fas","floppy-disk"]}),A(" "+R(l.$t("tt.save")),1)]),_:1}),p(de,null,{default:O(()=>[p(d,{icon:["fas","folder-open"]}),A(" "+R(l.$t("tt.load")),1)]),_:1}),h[0]||(h[0]=b("hr",null,null,-1)),p(de,null,{default:O(()=>[p(d,{icon:["fas","rotate-left"]}),A(" "+R(l.$t("tt.undo")),1)]),_:1}),p(de,null,{default:O(()=>[p(d,{icon:["fas","rotate-right"]}),A(" "+R(l.$t("tt.redo")),1)]),_:1}),h[1]||(h[1]=b("hr",null,null,-1)),p(de,null,{default:O(()=>[p(d,{icon:["fas","gear"]}),A(" "+R(l.$t("tt.settings")),1)]),_:1}),h[2]||(h[2]=b("hr",null,null,-1)),p(de,null,{default:O(()=>[p(d,{icon:["fas","expand"]}),A(" "+R(l.$t("tt.fullscreen")),1)]),_:1})]),_:1,__:[0,1,2]},512),h[4]||(h[4]=b("div",{class:"separator"},null,-1)),W((f(),g("button",hn,[p(d,{icon:["fas","rotate-left"]})])),[[c,l.$t("tt.undo"),void 0,{bottom:!0}]]),W((f(),g("button",fn,[p(d,{icon:["fas","rotate-right"]})])),[[c,l.$t("tt.redo"),void 0,{bottom:!0}]])],64)):(f(),g(j,{key:1},[p(Ot),h[5]||(h[5]=b("div",{class:"separator"},null,-1)),W((f(),g("button",pn,[p(d,{icon:["fas","file"]})])),[[c,l.$t("tt.new"),void 0,{bottom:!0}]]),W((f(),g("button",mn,[p(d,{icon:["fas","floppy-disk"]})])),[[c,l.$t("tt.save"),void 0,{bottom:!0}]]),W((f(),g("button",vn,[p(d,{icon:["fas","folder-open"]})])),[[c,l.$t("tt.load"),void 0,{bottom:!0}]]),h[6]||(h[6]=b("div",{class:"separator"},null,-1)),W((f(),g("button",gn,[p(d,{icon:["fas","rotate-left"]})])),[[c,l.$t("tt.undo"),void 0,{bottom:!0}]]),W((f(),g("button",wn,[p(d,{icon:["fas","rotate-right"]})])),[[c,l.$t("tt.redo"),void 0,{bottom:!0}]]),h[7]||(h[7]=b("div",{class:"separator"},null,-1)),W((f(),g("button",Vn,[p(d,{icon:["fas","gear"]})])),[[c,l.$t("tt.settings"),void 0,{bottom:!0}]]),W((f(),g("button",yn,[p(d,{icon:"fa-solid fa-hammer"})])),[[c,l.$t("tt.build"),void 0,{bottom:!0}]]),h[8]||(h[8]=b("div",{class:"separator"},null,-1)),W((f(),z(nn,null,{default:O(()=>[p(d,{icon:["fas","expand"]})]),_:1})),[[c,l.$t("tt.fullscreen"),void 0,{bottom:!0}]])],64))])],512)}}}),bn=Y(_n,[["__scopeId","data-v-e3fe024b"]]),xn={class:"disable-user-select left-section",style:{display:"flex","flex-direction":"row"}},Pn={class:"logo disable-user-select",style:{"text-transform":"uppercase"}},In={class:"padding"},Cn={class:"middle-actions",style:{}},Nn={style:{display:"flex","flex-direction":"row"}},Mn=G({__name:"MainMenuBar",setup(n){const e=$(!1);We(e,(s,o)=>{s?document.documentElement.requestFullscreen():document.exitFullscreen()});const t=$("Untitled");return(s,o)=>(f(),g("div",{class:"main",onContextmenu:o[1]||(o[1]=le(()=>{},["prevent"]))},[b("div",xn,[b("div",Pn,R(s.$t("logo")),1),p(bn)]),b("div",In,[b("div",Cn,[p(dn,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t.value=i)},null,8,["modelValue"])])]),b("div",Nn,[p(sn)])],32))}}),kn=Y(Mn,[["__scopeId","data-v-58738f50"]]);class On{constructor(e,t,s){r(this,"R",0);r(this,"G",0);r(this,"B",0);this.R=e,this.G=t,this.B=s}}const Ln={ref:"inputRange",class:"input-range"},$n=["value"],Rn={class:"title"},Dn={class:"valueText"},Tn=G({props:{Min:Number,Max:Number,Suffix:String,Title:String,RealtimeChange:{type:Boolean,default:!0},Step:{type:Number,default:0},modelValue:{type:Number,default:0}},emits:["update:modelValue"],data(){return{IsDragging:!1,Value:0,lastPosition:new k(0,0),lastValue:0,IsInputVisible:!1,moveDistance:0}},created(){document.addEventListener("mousemove",this.OnMouseMove),document.addEventListener("mouseup",this.OnMouseUp),this.Value=this.modelValue},watch:{modelValue(n,e){this.Value=n}},methods:{ClickValue(n){this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+n,this.Min,this.Max):this.Value=this.Clamp(this.Value+(n>0?this.Step:-this.Step),this.Min,this.Max):this.Step==0?this.Value+=n:this.Value+=n>0?this.Step:-this.Step,this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnInput(n){this.Value=Number(n.target.value),this.Min!=null&&this.Max!=null&&(this.Value=this.Clamp(this.Value,this.Min,this.Max)),this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnMouseDown(n){this.IsInputVisible||(this.$el.requestPointerLock(),this.IsDragging=!0,this.lastPosition=new k(n.clientX,n.clientY),this.lastValue=this.Value,this.moveDistance=0)},OnMouseMove(n){this.IsDragging&&(this.moveDistance+=n.movementX,this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+n.movementX/(n.shiftKey?25:50),this.Min,this.Max):n.movementX!=0&&Math.abs(this.moveDistance)>=(n.shiftKey?25:50)&&(this.moveDistance=0,this.Value=this.Clamp(this.Value+(n.movementX>0?this.Step:-this.Step),this.Min,this.Max)):this.Step==0?this.Value+=n.movementX/(n.shiftKey?25:50):n.movementX!=0&&Math.abs(this.moveDistance)>=(n.shiftKey?25:50)&&(this.moveDistance=0,this.Value+=n.movementX>0?this.Step:-this.Step),this.$emit("update:modelValue",this.Value),this.UpdateEvent())},OnMouseUp(n){var e=new k(n.clientX,n.clientY);e.X==this.lastPosition.X&&e.Y==this.lastPosition.Y&&this.Value==this.lastValue&&(this.IsInputVisible=!0,this.$nextTick(()=>{var t=this.$refs.input;t.focus(),t.select()})),this.IsDragging=!1,document.exitPointerLock()},UpdateEvent(){var n=pe();this.RealtimeChange&&(n.ChangeEvent=!n.ChangeEvent)},validate(n){n.key=="Enter"&&n.target.blur();var e=/[0-9-]|\./;e.test(n.key)||n.preventDefault()},Clamp(n,e,t){return Math.min(Math.max(n,e),t)}}}),An=G({...Tn,__name:"InputRange",setup(n){return(e,t)=>{const s=se("font-awesome-icon");return f(),g("div",Ln,[b("div",{class:"button",onClick:t[0]||(t[0]=o=>e.ClickValue(-.1))},[p(s,{icon:["fas","caret-left"]})]),b("div",{class:"value",onMousedown:t[4]||(t[4]=le((...o)=>e.OnMouseDown&&e.OnMouseDown(...o),["left"]))},[e.IsInputVisible?(f(),g("input",{key:0,onKeypress:t[1]||(t[1]=(...o)=>e.validate&&e.validate(...o)),ref:"input",class:"input-element",value:e.modelValue,onInput:t[2]||(t[2]=(...o)=>e.OnInput&&e.OnInput(...o)),onBlur:t[3]||(t[3]=o=>e.IsInputVisible=!1)},null,40,$n)):(f(),g(j,{key:1},[b("div",Rn,R(e.Title)+": ",1),b("div",Dn,R(Number(e.Value.toFixed(4)))+" "+R(e.Suffix),1)],64))],32),b("div",{class:"button",onClick:t[5]||(t[5]=o=>e.ClickValue(.1))},[p(s,{icon:["fas","caret-right"]})])],512)}}}),Xn=Y(An,[["__scopeId","data-v-5ba96ddd"]]),Bn={class:"properties"},Gn={key:0,class:"not-selected"},Yn={class:"header"},En={style:{width:"100%",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Hn={class:"buttons",style:{display:"flex","font-weight":"bold"}},Un={class:"btn"},Wn={key:0,style:{margin:"0px 10px"}},zn={class:"input-group",style:{width:"100%",padding:"0px"}},Fn={key:1,style:{padding:"10px"}},qn={class:"notice"},Zn=G({__name:"PropertiesView",setup(n){const e=ge();$(new On(0,0,1));var t=ie(()=>e.SelectedNode),s=ie(()=>e.SelectedNode==null||e.SelectedNode instanceof Me),o=ie(()=>{var l;return a((l=t.value)==null?void 0:l.Properties)});const i=()=>{if(e.SelectedNode!=null&&e.SelectedNode!=null&&e.SelectedNode){for(var l of e.SelectedNode.Properties)l.Reset();var h=pe();h.ChangeEvent=!h.ChangeEvent}};var a=l=>{var h=new Map;return l==null||l.length==0||l.forEach(d=>{var c;h.has(d.Category)||h.set(d.Category,new Array),(c=h.get(d.Category))==null||c.push(d)}),h};return(l,h)=>{var v;const d=se("font-awesome-icon"),c=Ie("tooltip");return f(),g("div",Bn,[te(s)?(f(),g("div",Gn,[p(d,{icon:["fas","sliders"]})])):oe("",!0),te(s)?oe("",!0):(f(),g(j,{key:1},[b("div",Yn,[b("div",En,R(l.$t((v=te(t))==null?void 0:v.Name)),1),b("div",Hn,[W((f(),g("button",Un,[p(d,{icon:["fas","sliders"]})])),[[c,l.$t("tt.presets"),void 0,{bottom:!0}]]),W((f(),g("button",{class:"btn",onClick:i},[p(d,{icon:["fas","arrows-rotate"]})])),[[c,l.$t("tt.resetParams"),void 0,{bottom:!0}]])])]),te(t).Name?(f(),g("hr",Wn)):oe("",!0),(f(!0),g(j,null,we(te(o),([m,C])=>(f(),z(Wt,{style:{"background-color":"transparent",padding:"0px"}},{header:O(()=>[A(R(m),1)]),default:O(()=>[b("div",zn,[(f(!0),g(j,null,we(C,S=>(f(),g(j,null,[typeof S.Value=="number"?(f(),z(Xn,{key:0,modelValue:S.Value,"onUpdate:modelValue":y=>S.Value=y,Min:S.Min,Max:S.Max,Step:S.Step,Suffix:S.Suffix,Title:S.Name},null,8,["modelValue","onUpdate:modelValue","Min","Max","Step","Suffix","Title"])):oe("",!0),S.valueList!=null?(f(),z(tn,{key:1,modelValue:S.Value,"onUpdate:modelValue":y=>S.Value=y,default:S.Value,title:S.Name,options:S.valueList},null,8,["modelValue","onUpdate:modelValue","default","title","options"])):oe("",!0)],64))),256))])]),_:2},1024))),256)),te(t).IsRealtimeUpdate==!1?(f(),g("div",Fn,[h[1]||(h[1]=b("button",{class:"btn apply-btn"}," Apply changes ",-1)),b("div",qn,[p(d,{icon:["fas","circle-exclamation"]}),h[0]||(h[0]=A(' This node performs a heavy operation, so the update occurs when you click the "Apply Changes" button and is cached. '))])])):oe("",!0)],64))])}}}),Kn=Y(Zn,[["__scopeId","data-v-46464937"]]);function jn(n){return new Worker("/assets/MeshGenerationWorker-DdK6sfo-.js",{name:n==null?void 0:n.name})}class Jn{constructor(){r(this,"GridMaterial");r(this,"GridMesh");const e=u(.5).toVar(),t=u(5).toVar(),s=u(1*window.devicePixelRatio).toVar(),o=u(500).toVar(),i=u(200).toVar(),a=nt(.2,.2,.2,.2).toVar(),l=nt(.05,.05,.05,.2).toVar(),h=us,d=ds,c=L(([w,I])=>{const M=ft(w,I),H=qe(U(Le(U(M,.5)),.5)),D=ft(H,At(M));return ne(D.x,D.y)}),v=c(h.xz,e),m=c(h.xz,t),C=U(1,Ue(0,s,v)),S=U(1,Ue(0,s,m)),y=U(h,d),P=Ze(y),N=Ue(u(o),u(0),P),X=Ue(u(i),u(0),P),ee=K(a,K(C,X)).toVar(),_e=K(l,K(S,N)).toVar(),be=Xt(_e,ee),ue=new Bt;ue.colorNode=be,ue.transparent=!0,ue.side=St,ue.lights=!1;const F=new Gt(1e3,1e3,1,1);F.rotateX(-Math.PI/2);const E=new _t(F,ue);this.GridMesh=E,this.GridMaterial=ue}}class Qn{constructor(){r(this,"Mesh");const e=L(([i,a,l])=>{const h=V(i.x,i.y).toVar(),d=V(qe(h.mul(2).sub(1)).sub(V(a,l))).toVar();return d.assign(u(1).sub(d.div(At(d)))),cs(ne(d.x,d.y))});var t=new hs({color:"#fff",transparent:!0,side:St});t.colorNode=L(()=>{const i=e(Je(),1,1).toVar(),a=e(Je(),.9,1).toVar(),l=e(Je(),1,.9).toVar(),h=e(Je(),.98,.98).toVar(),d=Pe(0,1,i.sub(a).sub(l).sub(h)).toVar();return nt(.8,.8,.8,d)})();var s=new Gt(1,1,1,1);s.rotateX(-Math.PI/2);var o=new _t(s,t);o.castShadow=!1,o.receiveShadow=!1,o.scale.set(10,1,10),o.position.set(0,.005,0),this.Mesh=o}}class ei{constructor(){r(this,"Height",2);r(this,"GPURenderer");r(this,"HeightTexture");r(this,"TerrainMaterial");r(this,"IsMeshGenerated",$(!1));r(this,"Scene");r(this,"Camera");r(this,"Controls");r(this,"TerrainMesh");r(this,"GridMesh");r(this,"DirectionalLight");r(this,"DirectionalLight2");r(this,"_resolution",512);r(this,"_textureResolution",512);r(this,"_canvas");r(this,"_isColorized",!1);this.CreateRenderer(),this.Scene=new fs,this.Scene.environmentNode=ps("#ffffff"),this.Scene.environmentIntensity=.05,this.Camera=new ms(75,1,.01,1e3),this.Camera.position.z=10,this.Camera.position.y=10,this.CreateMaterial(),this.CreateTexture(this._resolution),this.CreateTerrainMesh(this.Resolution),this.CreateLight();const e=new Jn;this.GridMesh=e.GridMesh,this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2),this.Scene.add(this.GridMesh);var t=new Qn;this.Scene.add(t.Mesh);const s=pe();s.SetRenderer(this),s.Resolution=this.Resolution}get Resolution(){return this._resolution}get TextureResolution(){return this._textureResolution}CreateMaterial(){this.TerrainMaterial=new Bt({color:"#a2a2a2"}),this.TerrainMaterial.side=St,this.TerrainMaterial.needsUpdate=!0,this.TerrainMaterial.metalness=0,this.TerrainMaterial.roughness=1,this.TerrainMaterial.positionNode=L(()=>{const e=u(1/this.Resolution),t=u(1).sub(e).toVar(),s=Ne.xyz.toVar(),o=He(this.HeightTexture,Ne.xz.add(.5).mul(t)).mul(this.Height);return s.y.addAssign(o),s})(),this.TerrainMaterial.normalNode=L(()=>{const e=u(1/this.TextureResolution).toVar(),t=u(1).sub(e).toVar(),s=Ne.xyz.add(Qe(e,0,0)).toVar(),o=Ne.xyz.add(Qe(0,0,e.negate())).toVar(),i=Ne.xyz.toVar(),a=He(this.HeightTexture,Ne.xz.add(.5).mul(t)).mul(this.Height);i.y.addAssign(a),s.y.addAssign(He(this.HeightTexture,s.xz.add(.5)).mul(t).mul(this.Height)),o.y.addAssign(He(this.HeightTexture,o.xz.add(.5)).mul(t).mul(this.Height));const l=s.sub(i).normalize(),h=o.sub(i).normalize();return vs(gs(l,h))})(),this.TerrainMaterial.colorNode=L(()=>{const e=u(1/this.TextureResolution).toVar(),t=u(1).sub(e).toVar(),s=He(this.HeightTexture),o=u(this.Height).toVar(),i=u(.01).toVar(),a=Qe(0,.2,0).toVar(),l=Qe(.6,.4,.2).toVar(),h=V(this.TextureResolution),d=ft(1,V(h)),c=Ne.xz.add(.5).mul(t).toVar(),v=s.sample(c.add(V(d.x.negate(),d.y.negate()))).r.toVar(),m=s.sample(c.add(V(0,d.y.negate()))).r.toVar(),C=s.sample(c.add(V(d.x,d.y.negate()))).r.toVar(),S=s.sample(c.add(V(d.x.negate(),0))).r.toVar(),y=s.sample(c).r.toVar(),P=s.sample(c.add(V(d.x,0))).r.toVar(),N=s.sample(c.add(V(d.x.negate(),d.y))).r.toVar(),X=s.sample(c.add(V(0,d.y))).r.toVar(),ee=s.sample(c.add(V(d.x,d.y))).r.toVar(),_e=C.add(K(2,P)).add(ee).sub(v.add(K(2,S)).add(N)).toVar(),be=N.add(K(2,X)).add(ee).sub(v.add(K(2,m)).add(C)).toVar();_e.mulAssign(o),be.mulAssign(o);const ue=Ze(V(_e,be)),F=Ue(0,i,ue),E=B(a,l,F).toVar(),w=y;return E.mulAssign(Xt(.8,K(.4,w))),nt(E,1)})()}CreateRenderer(){this.GPURenderer=new ws({alpha:!0,antialias:!0}),this.GPURenderer.shadowMap.enabled=!0,this.GPURenderer.shadowMap.type=Vs,this.GPURenderer.toneMapping=ys,this.GPURenderer.setClearColor(0,0),this.GPURenderer.setPixelRatio(window.devicePixelRatio)}CreateTexture(e){this.HeightTexture=new Ss(Math.floor(this.TextureResolution),Math.floor(this.TextureResolution)),this.HeightTexture.format=_s,this.HeightTexture.type=bs}CreateLight(){const e=new Ct(16777215,2);e.position.set(-10,10,0),e.castShadow=!0,e.shadow.autoUpdate=!0,e.shadow.camera.near=.1,e.shadow.camera.far=30,e.shadow.camera.top=8,e.shadow.camera.right=8,e.shadow.camera.bottom=-8,e.shadow.camera.left=-8,e.shadow.mapSize.set(8192,8192),e.shadow.radius=5,e.shadow.blurSamples=25,e.shadow.normalBias=.05,this.DirectionalLight=e;const t=new Ct(16777215,.5);t.position.set(10,10,0),this.DirectionalLight2=t}SetIsMeshGenerated(e){this.IsMeshGenerated.value=e}CreateTerrainMesh(e){this.SetIsMeshGenerated(!1);let t=new jn;t.onmessage=async s=>{var o=new xs;o.setIndex(new et(new Uint32Array(s.data.indices),1)),o.setAttribute("position",new et(new Float32Array(s.data.position),3)),o.setAttribute("normal",new et(new Float32Array(s.data.normal),3)),o.setAttribute("uv",new et(new Float32Array(s.data.uv),2)),this.TerrainMesh=new _t(o,this.TerrainMaterial),this.TerrainMesh.castShadow=!0,this.TerrainMesh.receiveShadow=!0,this.TerrainMesh.scale.set(10,1,10),this.TerrainMesh.position.set(0,.006,0),this.Scene.add(this.TerrainMesh),this.SetIsMeshGenerated(!0)},t.postMessage(e)}ChangeResolution(e){this._textureResolution=e,this.TerrainMaterial.dispose(),this.HeightTexture.dispose(),this.CreateTexture(this.TextureResolution),this.CreateMaterial(),this.TerrainMesh.material=this.TerrainMaterial,this.Scene.remove(this.DirectionalLight),this.Scene.remove(this.DirectionalLight2),this.DirectionalLight.dispose(),this.DirectionalLight2.dispose(),this.CreateLight(),this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2);const t=pe();t.Resolution=this.TextureResolution;const s=ge();s.LockedNode!=null?this.Recalculate(s.LockedNode):s.SelectedNode!=null&&this.Recalculate(s.SelectedNode),requestAnimationFrame(()=>this.Render())}OnWindowResize(){if(this.GPURenderer==null||this.Camera==null||this._canvas==null)return;var e=this._canvas.offsetHeight,t=this._canvas.offsetWidth;this.GPURenderer.setSize(t,e);const s=t/e;this.Camera.aspect=s,this.Camera.updateProjectionMatrix(),requestAnimationFrame(()=>this.Render())}async Render(){await this.GPURenderer.renderAsync(this.Scene,this.Camera)}Mount(e){this._canvas=e;var t=this._canvas.offsetHeight,s=this._canvas.offsetWidth;this._canvas.appendChild(this.GPURenderer.domElement),this.GPURenderer.setSize(s,t),this.Camera.aspect=s/t,this.Controls=new Ps(this.Camera,this.GPURenderer.domElement),this.Controls.enablePan=!1,this.Controls.update(),window.addEventListener("resize",()=>this.OnWindowResize()),this.Render(),requestAnimationFrame(()=>this.Render)}RequestRender(){requestAnimationFrame(()=>this.Render)}async Recalculate(e,t=!1){t||e.Calculate();var s=e.Outputs[e.DefaultOutput].Value;const i=L(()=>{const a=Se.modInt(this.TextureResolution),l=Se.div(this.TextureResolution),h=ot(a,l),d=V(h.x,h.y).div(this.TextureResolution).toVar(),c=s(d).toVar();c.assign(Pe(c,0,1)),Is(this.HeightTexture,h,c).toWriteOnly()})().compute(this.TextureResolution*this.TextureResolution);this.GPURenderer.computeAsync(i).then(()=>{e.CalculationState=ke.Calculated,requestAnimationFrame(()=>this.Render())})}SetGridVisible(e){this.GridMesh.visible=e,requestAnimationFrame(()=>this.Render())}}const ti={class:"container"},si={key:0,style:{position:"relative",height:"100%",width:"100%"}},oi=G({__name:"Preview3D",setup(n){const e=$();e.value=new ei;const t=$();var s=pe();const o=ie(()=>s.ChangeEvent);var i=ge();const a=ie(()=>i.SelectedNode),l=ie(()=>{var y;return(y=e.value)==null?void 0:y.IsMeshGenerated});We(l,async(y,P)=>{requestAnimationFrame(()=>{var N;return(N=e.value)==null?void 0:N.Render()})}),We(o,async(y,P)=>{var N,X;i.LockedNode!=null?(N=e.value)==null||N.Recalculate(i.LockedNode,!1):a.value!=null&&((X=e.value)==null||X.Recalculate(a.value,!1))}),We(a,async y=>{var N,X;if(i.LockedNode!=null)(N=e.value)==null||N.Recalculate(i.LockedNode);else if(y!=null){var P=y;await((X=e.value)==null?void 0:X.Recalculate(P))}}),Ke(()=>{ve(()=>{var y;(y=e.value)==null||y.Mount(t.value)})});let h=!1;const d=()=>{h=!0},c=()=>{h=!1};window.addEventListener("mouseup",c),window.addEventListener("pointerup",c);const v=()=>{h&&requestAnimationFrame(()=>{var y;return(y=e.value)==null?void 0:y.Render()})},m=()=>{requestAnimationFrame(()=>{var y;return(y=e.value)==null?void 0:y.Render()})},C=$(!0),S=()=>{var y;C.value=!C.value,(y=e.value)==null||y.SetGridVisible(C.value)};return(y,P)=>{var ee;const N=se("font-awesome-icon"),X=Ie("tooltip");return f(),g("div",ti,[(ee=e.value)!=null&&ee.IsMeshGenerated?oe("",!0):(f(),g("div",si,[p(qt,{style:{scale:"2"}}),P[0]||(P[0]=b("span",{style:{position:"absolute !important",top:"calc(50% + 20px)",width:"100%","text-align":"center"}}," Initializing mesh...",-1))])),b("div",{onMousedown:d,onMousemove:v,onWheel:m,onPointerdown:d,onPointermove:v,ref_key:"canvas",ref:t,style:{height:"100%",width:"100%"}},[p(vt,{class:"top-left"},{default:O(()=>[p(ye,null,{default:O(()=>[W((f(),g("a",{onClick:S},[p(N,{icon:["fas","hashtag"]})])),[[X,"Switch Grid visibility",void 0,{bottom:!0}]])]),_:1})]),_:1})],544)])}}}),ni=Y(oi,[["__scopeId","data-v-f4b894cd"]]),ii={style:{width:"100%",height:"100%"}},ai={style:{height:"calc(100% - 80px)",display:"flex","flex-direction":"row"}},ri={style:{width:"80%",height:"100%"}},li={style:{height:"50%",width:"100%",display:"block"}},ui={style:{"margin-left":"5px"}},di={style:{height:"50%"}},ci={style:{width:"20%",height:"100%"}},hi={style:{"margin-left":"5px"}},fi=G({__name:"LayoutView",setup(n){return(e,t)=>{const s=se("font-awesome-icon");return f(),g("div",ii,[p(kn,{style:{height:"50px"}}),b("div",ai,[b("div",ri,[b("div",li,[p(rt,{style:{display:"inline-block",width:"100%"}},{header:O(()=>[p(s,{icon:["fas","mountain-sun"]}),b("span",ui,R(e.$t("windows.thirdPreview")),1)]),default:O(()=>[p(ni)]),_:1})]),b("div",di,[p(Fo)])]),b("div",ci,[p(rt,{style:{width:"100%"},"wheel-focus":!1},{header:O(()=>[p(s,{icon:["fas","sliders"]}),b("span",hi,R(e.$t("windows.properties")),1)]),default:O(()=>[p(Kn)]),_:1})])]),p(Ys,{style:{height:"30px"}})])}}}),pi=Y(fi,[["__scopeId","data-v-415e308f"]]),mi=es({history:ts("/"),routes:[{path:"/",name:"home",component:pi}]});class vi extends J{constructor(){super(...arguments);r(this,"Name","nodes.clamp");r(this,"Inputs",[new T(!0,this,"Source")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Min",0,0,1),new x("Max",1,0,1)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value),s=_(this.Properties[1].Value);this.Outputs[0].Value=L(([o])=>{var a;if(!this.Inputs[0].IsConnected)return u(0);const i=(a=this.Inputs[0].Links[0].In)==null?void 0:a.Value(o);return Pe(i,t,s)})}}class gi extends J{constructor(){super(...arguments);r(this,"Name","nodes.combine");r(this,"Inputs",[new T(!0,this,"Source 1"),new T(!0,this,"Source 2")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Mode","Burn",["Burn","Darken","Difference","Dodge","Divide","Exclusion","HardLight","HardMix","Lighten","LinearBurn","LinearDodge","LinearLight","LinearLightAddSub","Multiply","Negation","Overlay","PinLight","Screen","SoftLight","Subtract","VividLight","Overwrite"]),new x("Strength",0,0,100,0,"","%")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=this.Properties[0].Value,s=_(this.Properties[1].Value);this.Outputs[0].Value=L(([o])=>{var h,d;if(!this.Inputs[0].IsConnected||!this.Inputs[1].IsConnected)return u(0);const i=(h=this.Inputs[0].Links[0].In)==null?void 0:h.Value(o).toVar(),a=(d=this.Inputs[1].Links[0].In)==null?void 0:d.Value(o).toVar(),l=s.mul(.01);switch(t){case"Burn":{const c=u(1).sub(u(1).sub(a).div(i)).toVar();return B(i,c,l)}case"Darken":{const c=ne(i,a).toVar();return B(i,c,l)}case"Difference":{const c=qe(a.sub(i)).toVar();return B(i,c,l)}case"Dodge":{const c=i.div(a.add(u(1e-12))).toVar();return B(i,c,l)}case"Divide":{const c=i.div(u(1).sub(a)).toVar();return B(i,c,l)}case"Exclusion":{const c=a.add(i).sub(u(2).mul(a).mul(i)).toVar();return B(i,c,l)}case"HardLight":{const c=u(U(1,K(2,U(1,i)).mul(U(1,a)))).toVar(),v=u(K(2,i).mul(a)).toVar(),m=u(Ae(a,.5)).toVar(),C=u(v.mul(m).add(u(1).sub(m).mul(c))).toVar();return B(i,C,l)}case"HardMix":{const c=u(Ae(u(1).sub(i),a)).toVar();return B(i,c,l)}case"Lighten":{const c=he(a,i).toVar();return B(i,c,l)}case"LinearBurn":{const c=u(i.add(a.sub(1))).toVar();return B(i,c,l)}case"LinearDodge":{const c=i.add(a).toVar();return B(i,c,l)}case"LinearLight":{const c=u(Ns(a.lessThan(.5),he(i.add(u(2).mul(a).sub(u(1))),u(0)),ne(i.add(u(2).mul(a.sub(.5))),u(1)))).toVar();return B(i,c,l)}case"LinearLightAddSub":{const c=u(a.add(K(2,i).sub(1))).toVar();return B(i,c,l)}case"Multiply":{const c=i.mul(a).toVar();return B(i,c,l)}case"Negation":{const c=u(U(1,qe(U(1,a).sub(i)))).toVar();return B(i,c,l)}case"Overlay":{const c=u(U(1,K(2,U(1,i)).mul(U(1,a)))).toVar(),v=u(K(2,i).mul(a)).toVar(),m=u(Ae(i,.5)).toVar(),C=u(v.mul(m).add(u(1).sub(m).mul(c))).toVar();return B(i,C,l)}case"PinLight":{const c=u(Ae(.5,a)).toVar(),v=u(c.mul(he(K(2,i.sub(.5)),a))).toVar(),m=u(v.add(U(1,c).mul(ne(K(2,i),a)))).toVar();return B(i,m,l)}case"Screen":{const c=u(U(1,U(1,a).mul(U(1,i)))).toVar();return B(i,c,l)}case"SoftLight":{const c=u(U(1,K(2,U(1,i)).mul(U(1,a)))).toVar(),v=u(Cs(i).mul(K(2,a).sub(1)).add(K(2,i).mul(U(1,a)))).toVar(),m=u(Ae(a,.5)).toVar(),C=u(v.mul(m).add(u(1).sub(m).mul(c))).toVar();return B(i,C,l)}case"Subtract":{const c=i.sub(a).toVar();return B(i,c,l)}case"VividLight":{const c=u(U(1,U(1,a).div(K(2,i)))).toVar(),v=u(a.div(K(2,U(1,i)))).toVar(),m=u(Ae(.5,i)).toVar(),C=u(v.mul(m).add(u(1).sub(m).mul(c))).toVar();return B(i,C,l)}case"Overwrite":return B(i,a,l)}return u(0)})}}class wi extends J{constructor(){super(...arguments);r(this,"Name","nodes.constant");r(this,"Outputs",[new T(!1,this,"Output")]);r(this,"Properties",[new x("Height",0,0,1)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value);this.Outputs[0].Value=L(([s])=>u(t))}}class Vi extends J{constructor(){super(...arguments);r(this,"Name","nodes.cracks");r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Scale",10,0,100,0,"Transform","%"),new x("Angle",0,0,100,0,"Noise",""),new x("Thickness",.03,0,1,0,"Noise",""),new x("Distortion",0,0,100,0,"Distortion",""),new x("Octaves",10,0,100,1,"Distortion",""),new x("Scale",10,0,100,0,"Distortion",""),new x("Offset X",0,-100,100,0,"Distortion",""),new x("Offset Y",0,-100,100,0,"Distortion","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value),a=_(this.Properties[4].Value),l=_(this.Properties[5].Value),h=_(this.Properties[6].Value),d=_(this.Properties[7].Value);this.Outputs[0].Value=L(([c])=>{const v=V(c.x,c.y).toVar(),m=V(ut(v.mul(2).mul(.5),a,V(h,d),l)).mul(i).mul(.2);return Fs({uv:v.add(m),angle:s,scale:t,thickness:o})})}}const yi=L(([n,e,t])=>{const s=u(t).toVar(),o=u(e).toVar(),i=u(n).toVar();s.assign(he(0,s));const a=u(he(0,ne(1,o.sub(i).add(s).div(u(2).mul(s))))).toVar();return i.mul(a).add(o.mul(u(1).sub(a)).sub(s.mul(a).mul(u(1).sub(a))))}).setLayout({name:"smoothMin",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),Si=L(([n,e,t])=>{const s=u(t).toVar(),o=u(e).toVar(),i=u(n).toVar();s.assign(ne(0,s.negate()));const a=u(he(0,ne(1,o.sub(i).add(s).div(u(2).mul(s))))).toVar();return i.mul(a).add(o.mul(u(1).sub(a)).sub(s.mul(a).mul(u(1).sub(a))))}).setLayout({name:"smoothMax",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),_i=L(([n])=>{const e=V(n).toVar();return Le(Ye(Ge(e.xy,V(12.9898,78.233))).mul(43758.5453123))}).setLayout({name:"random",type:"float",inputs:[{name:"st",type:"vec2"}]}),bi=L(([n,e,t])=>{const s=u(t).toVar(),o=u(e).toVar(),i=V(n).toVar(),a=V(i.mul(o)).toVar(),l=V(lt(a)).toVar(),h=V(Le(a)).toVar(),d=u(_i(l).mul(2).sub(1).mul(s)).toVar(),c=u(Ye(d)).toVar(),v=u(pt(d)).toVar(),m=V(h.sub(.5)).toVar(),C=V().toVar();return C.x.assign(m.x.mul(v).sub(m.y.mul(c))),C.y.assign(m.x.mul(c).add(m.y.mul(v))),C.add(.5).add(l).mod(1)}).setLayout({name:"tilingWithLimitedRotation",type:"vec2",inputs:[{name:"uv",type:"vec2"},{name:"tileCount",type:"float"},{name:"maxAngle",type:"float"}]});class xi extends J{constructor(){super(...arguments);r(this,"Name","nodes.crater");r(this,"Outputs",[new T(!1,this,"Output")]);r(this,"Properties",[new x("Smoothness",.5,0,1,0,"Crater params",""),new x("FloorHeight",-1,-5,5,0,"Crater params",""),new x("Radius",.16,0,1,0,"Crater params",""),new x("RimWidth",1.35,0,100,0,"Crater params",""),new x("RimSteepness",4,0,100,0,"Crater params",""),new x("X",.5,0,1,0,"Transform",""),new x("Y",.5,0,1,0,"Transform","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value),a=_(this.Properties[4].Value),l=_(this.Properties[5].Value),h=_(this.Properties[6].Value);this.Outputs[0].Value=L(([d])=>{const c=V(d.x,d.y).toVar(),v=V(l,h).toVar(),m=u(Ze(c.sub(v)).div(he(o,1e-4))).toVar(),C=u(m.mul(m).sub(1)).toVar(),S=u(ne(m.sub(1).sub(i),0)).toVar(),y=u(a.mul(S).mul(S)).toVar(),P=u(Si(C,s,t)).toVar();return P.assign(yi(P,y,t)),P.mul(o).add(.5).toVar()})}}class Pi extends J{constructor(){super(...arguments);r(this,"Name","nodes.fake");r(this,"Position",new k(1e3,1e3))}}class Ii extends J{constructor(){super(...arguments);r(this,"Name","nodes.falloff");r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Strength",0,0,10)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value);this.Outputs[0].Value=L(([s])=>{const o=V(s.x,s.y).toVar(),i=u(Yt(V(.5),o.mod(1))).mul(t).toVar(),a=B(u(1),u(0),i).toVar();return it(Pe(a,0,1),2)})}}class Ci extends J{constructor(){super(...arguments);r(this,"Name","nodes.fastErosion");r(this,"Inputs",[new T(!0,this,"Inpute Height")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Tiles",4,0,20,0,"Erosion",""),new x("Octaves",5,0,20,1,"Erosion",""),new x("Gain",.5,0,1,0,"Erosion",""),new x("Lacunarity",2,0,10,0,"Erosion",""),new x("Slope strength",3,0,10,0,"Erosion",""),new x("Branch strength",3,0,10,0,"Erosion",""),new x("Erosion Strength",.04,0,1,0,"Erosion","")]);r(this,"IsRealtimeUpdate",!1);r(this,"terrainHeight");r(this,"waterVolume");r(this,"sedimentAmount");r(this,"tempTerrainHeight");r(this,"tempWaterVolume");r(this,"tempSedimentAmount")}Calculate(){this.BaseCalculate();const t=pe(),s=t.GetRenderer(),o=t.Resolution,i=_(.1),a=_(.1),l=_(.1),h=_(1),d=_(.1),c=_(.1),v=_(9.8),m=_(.01),C=_(3),S=_(o),y=_(o);this.terrainHeight=Xe(o*o,"float"),this.waterVolume=Xe(o*o,"float"),this.sedimentAmount=Xe(o*o,"float"),this.tempTerrainHeight=Xe(o*o,"float"),this.tempWaterVolume=Xe(o*o,"float"),this.tempSedimentAmount=Xe(o*o,"float");const P=L(()=>{var M;const F=Se.modInt(o),E=Se.div(o),w=ot(F,E),I=V(w.x,w.y).div(o).toVar();if(this.Inputs[0].IsConnected){const D=((M=this.Inputs[0].Links[0].In)==null?void 0:M.Value)(I).toVar();this.terrainHeight.element(Se).assign(D)}}),N=L(([F,E])=>{const w=u(E).toVar(),I=u(F).toVar();return I.assign(Pe(I,re(0),S.sub(re(1)))),w.assign(Pe(w,re(0),y.sub(re(1)))),w.mul(S).add(I)}),X=L(([F,E])=>{const w=u(E).toVar(),I=V(F).toVar(),M=u(K(.01,Le(Ye(u(w).mul(12.9898)).mul(43758.5453)).mul(2).sub(1))).toVar();return Tt(I.add(V(M)))});L(([F,E,w])=>{const I=re(w).toVar(),M=u(E).toVar(),H=u(F).toVar(),D=u(N(H,M)).toVar(),Z=u(this.tempWaterVolume.element(D).add(a.mul(i))).toVar(),Q=u(this.tempSedimentAmount.element(D)).toVar(),me=u(this.tempTerrainHeight.element(D)).toVar(),Ce=V(V(this.tempTerrainHeight.element(N(H.add(1),M)).sub(this.tempTerrainHeight.element(N(H.sub(1),M))),this.tempTerrainHeight.element(N(H,M.add(1))).sub(this.tempTerrainHeight.element(N(H,M.sub(1))))).mul(.5)).toVar(),ae=u(Ze(Ce)).toVar();tt(Z.greaterThan(0).and(ae.greaterThan(0)),()=>{const Re=V(X(Ce,I)).toVar(),je=u(ne(Z,ae.mul(v).mul(i))).toVar(),xe=u(ne(Z,je)).toVar(),De=Be(Be(H,M).add(Be(Nt(Re)))).toVar(),Te=re(N(De.x,De.y)).toVar();this.tempWaterVolume.element(Te).addAssign(xe),Z.subAssign(xe);const Ve=u(he(ae,m).mul(xe).mul(h)).toVar();tt(Q.lessThan(Ve),()=>{const Ee=u(ne(Ve.sub(Q).mul(d),me.sub(this.tempTerrainHeight.element(Te)))).toVar();Q.addAssign(Ee),this.tempTerrainHeight.element(D).assign(me.sub(Ee))}).Else(()=>{const Ee=u(Q.sub(Ve).mul(c)).toVar();Q.subAssign(Ee),this.tempTerrainHeight.element(D).assign(me.add(Ee))});const bt=u(Q.mul(xe).div(Z)).toVar();this.tempSedimentAmount.element(Te).addAssign(bt),Q.subAssign(bt)}),Z.mulAssign(U(1,l.mul(i))),Q.assign(he(0,Q)),this.tempWaterVolume.element(D).assign(Z),this.tempSedimentAmount.element(D).assign(Q)});const ee=L(([F,E])=>{const w=re(E).toVar(),I=ot(F.x,F.y).toVar();return I.y.mul(w).add(I.x)});L(()=>{this.tempTerrainHeight.element(Se).addAssign(.5)});const _e=L(()=>{const F=re(Se).toVar(),E=re(F.modInt(S)).toVar(),w=re(F.div(S)).toVar(),I=re(N(E,w)).toVar();this.tempTerrainHeight.element(I).assign(this.terrainHeight.element(I)),this.tempWaterVolume.element(I).assign(this.waterVolume.element(I)),this.tempSedimentAmount.element(I).assign(this.sedimentAmount.element(I)),ct(),Dt(C,()=>{const M=u(N(E,w)).toVar(),H=u(this.tempWaterVolume.element(M).add(a.mul(i))).toVar(),D=u(this.tempSedimentAmount.element(M)).toVar(),Z=u(this.tempTerrainHeight.element(M)).toVar(),Q=V(V(this.tempTerrainHeight.element(N(E.add(1),w)).sub(this.tempTerrainHeight.element(N(E.sub(1),w))),this.tempTerrainHeight.element(N(E,w.add(1))).sub(this.tempTerrainHeight.element(N(E,w.sub(1))))).mul(.5)).toVar(),me=u(Ze(Q)).toVar();tt(H.greaterThan(0).and(me.greaterThan(0)),()=>{const Ce=V(X(Q,F)).toVar(),ae=u(ne(H,me.mul(v).mul(i))).toVar(),Re=u(ne(H,ae)).toVar(),je=Be(Be(E,w).add(Be(Nt(Ce)))).toVar(),xe=re(N(je.x,je.y)).toVar();this.tempWaterVolume.element(xe).addAssign(Re),H.subAssign(Re);const De=u(he(me,m).mul(Re).mul(h)).toVar();tt(D.lessThan(De),()=>{const Ve=u(ne(De.sub(D).mul(d),Z.sub(this.tempTerrainHeight.element(xe)))).toVar();D.addAssign(Ve),this.tempTerrainHeight.element(M).assign(Z.sub(Ve))}).Else(()=>{const Ve=u(D.sub(De).mul(c)).toVar();D.subAssign(Ve),this.tempTerrainHeight.element(M).assign(Z.add(Ve))});const Te=u(D.mul(Re).div(H)).toVar();this.tempSedimentAmount.element(xe).addAssign(Te),D.subAssign(Te)}),H.mulAssign(U(1,l.mul(i))),D.assign(he(0,D)),this.tempWaterVolume.element(M).assign(H),this.tempSedimentAmount.element(M).assign(D),ct(),this.terrainHeight.element(M).assign(this.tempTerrainHeight.element(M)),this.waterVolume.element(M).assign(this.tempWaterVolume.element(M)),this.sedimentAmount.element(M).assign(this.tempSedimentAmount.element(M)),ct()}),this.terrainHeight.element(I).assign(this.tempTerrainHeight.element(I)),this.waterVolume.element(I).assign(this.tempWaterVolume.element(I)),this.sedimentAmount.element(I).assign(this.tempSedimentAmount.element(I))}),be=P().compute(o*o),ue=_e().compute(o*o);s==null||s.GPURenderer.compute(be),s==null||s.GPURenderer.computeAsync(ue),this.Outputs[0].Value=L(([F])=>{if(this.Inputs[0].IsConnected){V(F.x,F.y).toVar();const E=Se.modInt(o),w=Se.div(o),I=ot(E,w);return this.terrainHeight.element(ee(I,o)).toVar()}else return 0})}}class Ni extends J{constructor(){super(...arguments);r(this,"Name","nodes.gradientNoise");r(this,"Outputs",[new T(!1,this,"Output")]);r(this,"Properties",[new x("Scale",10,0,100),new x("Offset X",0,0,100),new x("Offset Y",0,0,100)]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value);this.Outputs[0].Value=L(([i])=>{const a=V(i.x,i.y).mul(t).toVar(),l=V(s,o).toVar();return a.addAssign(l),zt(a)})}}class Mi extends J{constructor(){super(...arguments);r(this,"Name","nodes.invert");r(this,"Inputs",[new T(!0,this,"Source")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate(),this.Outputs[0].Value=L(([t])=>{var o;if(!this.Inputs[0].IsConnected)return u(0);const s=(o=this.Inputs[0].Links[0].In)==null?void 0:o.Value(t);return u(1).sub(s)})}}class ki extends J{constructor(){super(...arguments);r(this,"Name","nodes.mountain");r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Scale",3.55,0,100,0,"Noise Transform","%"),new x("Octaves Count",10,1,50,1,"Noise Params",""),new x("Offset X",-.08,-100,100,0,"Noise Transform",""),new x("Offset Y",-.54,-100,100,0,"Noise Transform",""),new x("Falloff",3,0,20,0,"Mountain",""),new x("Height",1,0,1,0,"Mountain",""),new x("Position X",.5,0,1,0,"Mountain Transform",""),new x("Position Y",.5,0,1,0,"Mountain Transform","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value),a=_(this.Properties[4].Value),l=_(this.Properties[5].Value),h=_(this.Properties[6].Value),d=_(this.Properties[7].Value);this.Outputs[0].Value=L(([c])=>{const v=V(c.x,c.y).toVar(),m=u(Yt(V(h,d),v)).mul(a).toVar(),C=B(u(1),u(0),m).toVar(),S=it(Pe(C,0,1),2),y=v.sub(V(h,d).sub(.5)).toVar(),P=ut(y,s,V(o,i),t).toVar();return Pe(S.mul(P).mul(u(1.45).mul(l)),0,1)})}}class Oi extends J{constructor(){super(...arguments);r(this,"Name","nodes.redistribution");r(this,"Inputs",[new T(!0,this,"Source")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Exponent",1,1,10)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value);this.Outputs[0].Value=L(([s])=>{var i;return this.Inputs[0].IsConnected?((i=this.Inputs[0].Links[0].In)==null?void 0:i.Value(s)).pow(t):u(0)})}}class Li extends J{constructor(){super(...arguments);r(this,"Name","nodes.terrace");r(this,"Inputs",[new T(!0,this,"Param 1")]);r(this,"Outputs",[new T(!1,this,"Output")]);r(this,"Properties",[new x("Count",3,0,10,1)]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value);this.Outputs[0].Value=L(([s])=>{var o;if(this.Inputs[0].IsConnected){const a=((o=this.Inputs[0].Links[0].In)==null?void 0:o.Value)(s).toVar();if(this.Properties[0].Value==0)return a;const l=u(1).div(t).toVar(),h=lt(a.div(l)).toVar(),d=a.sub(h.mul(l)).div(l).toVar(),c=ne(u(2).mul(d),u(1)).toVar();return h.add(c).mul(l).toVar()}else return 0})}}class $i extends J{constructor(){super(...arguments);r(this,"Name","nodes.voronoi");r(this,"Outputs",[new T(!1,this,"Output"),new T(!1,this,"Cells"),new T(!1,this,"Bubbles")]);r(this,"Properties",[new x("Scale",10,1,100,0,"Transform","%"),new x("OffsetX",0,0,100,0,"Transform",""),new x("OffsetY",0,0,100,0,"Transform",""),new x("Angle",5,0,100,0,"Noise","")]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value);this.Outputs[0].Value=L(([a])=>{const l=V(a.x,a.y).toVar(),h=V(s,o).toVar();l.addAssign(h);const d=ht({UV:l,angleOffset:i,cellDensity:t}).toVar();return it(d.x,2)}),this.Outputs[1].Value=L(([a])=>{const l=V(a.x,a.y).toVar(),h=V(s,o).toVar();return l.addAssign(h),ht({UV:l,angleOffset:i,cellDensity:t}).toVar().y}),this.Outputs[2].Value=L(([a])=>{const l=V(a.x,a.y).toVar(),h=V(s,o).toVar();l.addAssign(h);const d=ht({UV:l,angleOffset:i,cellDensity:t}).toVar();return Ms(it(d.x,2))})}}class Ri extends J{constructor(){super(...arguments);r(this,"Name","nodes.transform");r(this,"Inputs",[new T(!0,this,"Input")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Properties",[new x("Scale X",1,0,100,0,"Scale",""),new x("Scale Y",1,0,100,0,"Scale",""),new x("Position X",0,-100,100,0,"Position",""),new x("Position Y",0,-100,100,0,"Position",""),new x("Midpoint X",.5,0,1,0,"Rotation",""),new x("Midpoint Y",.5,0,1,0,"Rotation",""),new x("Angle",0,-360,360,0,"Rotation","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value),a=_(this.Properties[4].Value),l=_(this.Properties[5].Value),h=_(this.Properties[6].Value);this.Outputs[0].Value=L(([d])=>{var N;const c=V(d.x,d.y).toVar(),v=V(t,s).toVar(),m=V(o,i).toVar(),C=V(a,l).toVar(),S=h.mul(Et.div(180)).toVar(),y=V(pt(S).mul(c.x.sub(C.x)).add(Ye(S).mul(c.y.sub(C.y))).add(C.x),pt(S).mul(c.y.sub(C.y)).sub(Ye(S).mul(c.x.sub(C.x))).add(C.y));return c.assign(y),c.addAssign(m),c.mulAssign(v),(N=this.Inputs[0].Links[0].In)==null?void 0:N.Value(c).toVar()})}}class Di extends J{constructor(){super(...arguments);r(this,"Inputs",[new T(!0,this,"Input")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Name","nodes.tile");r(this,"Properties",[new x("Tile Count",1,0,100,1),new x("Angle Threshold",0,0,360,0)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value),s=_(this.Properties[1].Value);this.Outputs[0].Value=L(([o])=>{var d;var i=V(o).toVar(),a=s.mul(Et.div(180));const l=bi(i,t,a).toVar();return(d=this.Inputs[0].Links[0].In)==null?void 0:d.Value(l).toVar()})}}class Ti extends J{constructor(){super(...arguments);r(this,"Inputs",[new T(!0,this,"Input")]);r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Name","nodes.height");r(this,"IsRealtimeUpdate",!0);r(this,"Properties",[new x("Height",1,0,100,0,"","%")])}Calculate(){this.BaseCalculate();const t=_(this.Properties[0].Value);this.Outputs[0].Value=L(([s])=>{var a;if(!this.Inputs[0].IsConnected)return u(0);var o=V(s).toVar();return((a=this.Inputs[0].Links[0].In)==null?void 0:a.Value(o).toVar()).mul(t.mul(.01))})}}class Ai extends J{constructor(){super(...arguments);r(this,"Name","nodes.distortion");r(this,"Outputs",[new T(!1,this,"Result")]);r(this,"Inputs",[new T(!0,this,"Input")]);r(this,"Properties",[new x("Distortion",0,0,100,0,"Distortion",""),new x("Octaves",10,0,100,1,"Distortion",""),new x("Scale",10,0,100,0,"Distortion",""),new x("Offset X",0,-100,100,0,"Distortion",""),new x("Offset Y",0,-100,100,0,"Distortion","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=_(this.Properties[0].Value),s=_(this.Properties[1].Value),o=_(this.Properties[2].Value),i=_(this.Properties[3].Value),a=_(this.Properties[4].Value);this.Outputs[0].Value=L(([l])=>{var h;if(this.Inputs[0].IsConnected){const d=(h=this.Inputs[0].Links[0].In)==null?void 0:h.Value,c=V(l.x,l.y).toVar(),v=V(ut(c.mul(2).mul(.5),s,V(i,a),o)).mul(t).mul(.2);return d(c.add(v)).toVar()}else return 0})}}function Xi(){q.registerStr("nodes.buffer","",Me),q.registerStr("nodes.fake","",Pi),q.registerStr("nodes.constant","nodeCategories.testNodes",wi),q.registerStr("nodes.perlinNoise","nodeCategories.testNodes",qs),q.registerStr("nodes.mountain","nodeCategories.testNodes",ki),q.registerStr("nodes.terrace","nodeCategories.testNodes",Li),q.registerStr("nodes.combine","nodeCategories.testNodes",gi),q.registerStr("nodes.clamp","nodeCategories.testNodes",vi),q.registerStr("nodes.invert","nodeCategories.testNodes",Mi),q.registerStr("nodes.redistribution","nodeCategories.testNodes",Oi),q.registerStr("nodes.gradientNoise","nodeCategories.testNodes",Ni),q.registerStr("nodes.voronoi","nodeCategories.testNodes",$i),q.registerStr("nodes.crater","nodeCategories.testNodes",xi),q.registerStr("nodes.falloff","nodeCategories.testNodes",Ii),q.registerStr("nodes.fastErosion","nodeCategories.testNodes",Ci),q.registerStr("nodes.cracks","nodeCategories.testNodes",Vi),q.registerStr("nodes.transform","nodeCategories.testNodes",Ri),q.registerStr("nodes.tile","nodeCategories.testNodes",Di),q.registerStr("nodes.height","nodeCategories.testNodes",Ti),q.registerStr("nodes.distortion","nodeCategories.testNodes",Ai)}const Bi={en:{"":"",logo:"Mashuk",windows:{thirdPreview:"3D Preview",secondPreview:"2D Preview",properties:"Node properties",graph:"Graph",nodesList:"Nodes list"},tt:{undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",delete:"Delete node/selected",fullscreen:"Fullscreen",save:"Save",load:"Load",presets:"Presets",resetView:"Reset view",resetParams:"Reset node parameters to default",lockPreview:"Lock Preview",unlockPreview:"Unlock Preview",mesh_resolution:"Resolution",new:"New project",settings:"Settings",menu:"Menu",resolutionWarning:"Warning! Selecting a high resolution will increase video memory consumption and processing speed.",build:"Build"},hints:{graphLmb:"LMB: Select/Drag node",graphWheel:"Wheel: Zoom/Drag work space"},nodes:{constant:"Constant",perlinNoise:"Perlin Noise",mountain:"Mountain",terrace:"Terrace",combine:"Combine",clamp:"Clamp",invert:"Invert",redistribution:"Redistribution",gradientNoise:"Gradient Noise",voronoi:"Voronoi",crater:"Crater",falloff:"Falloff",fastErosion:"Fast Erosion",cracks:"Cracks",transform:"Transform",tile:"Tile",height:"Height",distortion:"Distortion"},nodeCategories:{testNodes:"Test nodes"}},ru:{logo:"Машук",windows:{thirdPreview:"3D Просмотр",secondPreview:"2D Просмотр",properties:"Параметры узла",graph:"Граф",nodesList:"Список узлов"},tt:{undo:"Отменить",redo:"Повторить",copy:"Копировать",paste:"Вставить",delete:"Удалить узел/выделенные",fullscreen:"На весь экран",save:"Сохранить",load:"Загрузить",presets:"Предустановки",resetView:"Сбросить вид",resetParams:"Сбросить параметры узла до значений по умолчанию",lockPreview:"Закрепить отображение",unlockPreview:"Открепить отображение",mesh_resolution:"Разрешение",new:"Новый проект",settings:"Настройки",menu:"Меню",resolutionWarning:"Внимание! Выбор высокого разрешения влечет за собой увеличение потребления видеопамяти и скорости обработки",build:"Сборка"},hints:{graphLmb:"ЛКМ: Выделить/Передвинуть узел",graphWheel:"Колесо мыши: Приближение/Перемещение рабочей области"},nodes:{constant:"Константа",perlinNoise:"Шум Перлина",mountain:"Гора",terrace:"Террасы",combine:"Комбинирование",clamp:"Ограничение",invert:"Инверсия",redistribution:"Перераспределение",gradientNoise:"Градиентный Шум",voronoi:"Шум Вороного",crater:"Кратер",falloff:"Спад",fastErosion:"Быстрая Эрозия",cracks:"Трещины",transform:"Преобразование",tile:"Плитка",height:"Высота",distortion:"Искажения"},nodeCategories:{testNodes:"Тестовые узлы"}}};yt.options.themes.tooltip.delay.show=0;yt.options.distance=10;ss.add(ks,os);const Gi=ns({legacy:!1,locale:"en",fallbackLocale:"en",messages:Bi}),$e=is(Ds);$e.component("font-awesome-icon",as);$e.use(rs());$e.use(mi);$e.use(yt);$e.use(Gi);$e.use(ls);$e.mount("#app");Xi();
