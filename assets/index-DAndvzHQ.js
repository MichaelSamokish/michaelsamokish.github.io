var ss=Object.defineProperty;var ns=(o,e,t)=>e in o?ss(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var l=(o,e,t)=>ns(o,typeof e!="symbol"?e+"":e,t);import{d as X,r as J,o as w,c as V,a as b,b as v,e as A,u as H,R as os,g as yt,f as ce,_ as F,v as _t,h as We,i as bt,j as O,k as Ze,l as Ce,w as ue,m as z,n as $,t as I,p as le,q as se,F as Z,s as he,x as M,T as as,y as is,z as ye,A as de,B as rs,C as ls,D as Et,E as fe,G as us,H as $t,I as ze,J as Vt,K as tt,L as ds,M as cs,N as fs,O as hs,P as ps,Q as St,S as vs,U as ms,V as gs,W as ws,X as ys,Y as _s,Z as bs,$ as Vs,a0 as Ss}from"./vendor-BOG91aG7.js";import{w as Gt,F as T,i as Xt,f as g,v as C,L as Ut,a as $e,b as xe,d as Ne,m as U,n as xs,c as Ee,s as _e,u as N,e as K,g as oe,h as Te,j as Cs,k as Oe,l as Ve,o as Ps,R as Yt,S as xt,O as Ft,M as je,P as rt,p as Ct,q as He,t as ge,r as Ie,x as qe,D as Ke,y as ft,H as zt,z as Re,A as Ns,U as ks,B as Pt,C as Ge,E as Nt,G as Le,I as kt,J as ht,K as Ht,N as Is,Q as Ye,T as Ms,V as It,W as Os,X as Wt,Y as $s,Z as Rs,_ as Je,$ as Ls,a0 as Ts,a1 as De,a2 as Rt,a3 as Ds,a4 as Bs,a5 as As,a6 as Es,a7 as Gs,a8 as Lt,a9 as Xs,aa as st,ab as qt,ac as nt,ad as ut,ae as Us,af as Zt}from"./three-DQh9JERt.js";import{i as Ys}from"./icons-CNPGi31y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const Fs={key:0,class:"gpu-error-box disable-user-select"},zs={class:"gpu-error-message-box"},Hs={style:{"font-size":"100px","text-align":"center",color:"var(--vt-c-red)"}},Ws={key:2,class:"gpu-error-box disable-user-select"},qs={class:"gpu-error-message-box"},Zs={style:{"font-size":"100px","text-align":"center",color:"var(--vt-c-red)"}},js=X({__name:"App",setup(o){document.onkeydown=a=>{a.key=="F12"&&a.preventDefault()};const e=yt(),t=localStorage.getItem("userLang");t&&e!=null&&(e.appContext.config.globalProperties.$i18n.locale=t);const s=ce(()=>navigator.gpu),n=ce(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));return(a,i)=>{const r=J("font-awesome-icon");return n.value?(w(),V("div",Fs,[b("div",zs,[b("div",Hs,[v(r,{icon:["fas","circle-xmark"]})]),i[0]||(i[0]=b("h1",null,"Mobile devices not supported yet",-1))])])):s.value?(w(),A(H(os),{key:1})):(w(),V("div",Ws,[b("div",qs,[b("div",Zs,[v(r,{icon:["fas","circle-xmark"]})]),i[1]||(i[1]=b("h1",null,"WebGPU is not supported on this browser.",-1))])]))}}}),Ks=F(js,[["__scopeId","data-v-b1dd4320"]]);class jt{constructor(){l(this,"Id",_t());l(this,"In",null);l(this,"Out",null);l(this,"IsSelected",!1)}SetSelected(e){var s,n,a;var t=this.In!=null?(s=this.In.ParentNode)==null?void 0:s.ParentGraph:(a=(n=this.Out)==null?void 0:n.ParentNode)==null?void 0:a.ParentGraph;t!=null&&e==!0&&t.DeselectAll(),this.IsSelected=e}DeleteLinkFromTerminals(){var s,n;var e=(s=this.In)==null?void 0:s.Links.indexOf(this);e!=null&&this.In!=null&&this.In.Links.splice(e,1);var t=(n=this.Out)==null?void 0:n.Links.indexOf(this);t!=null&&this.Out!=null&&this.Out.Links.splice(t,1)}}class L{constructor(e,t){l(this,"X",0);l(this,"Y",0);this.X=e,this.Y=t}get Length(){return Math.sqrt(this.X*this.X+this.Y*this.Y)}get Normalized(){return L.Div(this,this.Length)}Reset(){this.X=0,this.Y=0}static Add(e,t){return t instanceof L?new L(e.X+t.X,e.Y+t.Y):typeof t=="number"?new L(e.X+t,e.Y+t):e}static Sub(e,t){return t instanceof L?new L(e.X-t.X,e.Y-t.Y):typeof t=="number"?new L(e.X-t,e.Y-t):e}static Mul(e,t){return t instanceof L?new L(e.X*t.X,e.Y*t.Y):typeof t=="number"?new L(e.X*t,e.Y*t):e}static Div(e,t){return t instanceof L?new L(e.X/t.X,e.Y/t.Y):typeof t=="number"?new L(e.X/t,e.Y/t):e}}var Kt=(o=>(o[o.none=0]="none",o[o.Buffer=1]="Buffer",o[o.Primitives=2]="Primitives",o[o.GeoPrimitives=3]="GeoPrimitives",o[o.Warps=4]="Warps",o[o.Adjastments=5]="Adjastments",o[o.Profile=6]="Profile",o[o.Filters=7]="Filters",o[o.Erosion=8]="Erosion",o[o.Snow=9]="Snow",o[o.Water=10]="Water",o[o.Data=11]="Data",o[o.Color=12]="Color",o[o.Render=13]="Render",o[o.Output=14]="Output",o))(Kt||{}),be=(o=>(o[o.NotCalculated=0]="NotCalculated",o[o.Calculation=1]="Calculation",o[o.Calculated=2]="Calculated",o))(be||{});class P{constructor(e,t,s,n=0,a=0,i="",r=""){l(this,"Name","");l(this,"Description","");l(this,"Value");l(this,"Min",-10);l(this,"Max",10);l(this,"Suffix");l(this,"Category");l(this,"Step");l(this,"valueList");l(this,"Default");this.Name=e,this.Value=t,this.Default=t,this.Min=typeof s=="number"?s:0,this.Max=n,this.Suffix=r,this.Category=i,this.Step=a,this.valueList=s instanceof Array?s:void 0}Reset(){this.Value=this.Default}}class Q{constructor(){l(this,"Id",_t());l(this,"Position",new L(0,0));l(this,"LastPosition",new L(0,0));l(this,"Name","");l(this,"Category",Kt.none);l(this,"Properties");l(this,"Inputs",[]);l(this,"Outputs",[]);l(this,"IsSelected",!1);l(this,"Height",0);l(this,"Width",0);l(this,"IsCalculated",!1);l(this,"ParentGraph",null);l(this,"CalculationState",be.NotCalculated);l(this,"IsRealtimeUpdate",!1);l(this,"DefaultOutput",0)}Move(e,t){this.Position=new L(e,t)}SetSize(e,t){this.Height=e,this.Width=t}SetSelected(e,t=!0){this.IsSelected=e;const s=pe();e&&t?s.SelectedNode=this:s.SelectedNode==this&&(s.SelectedNode=null)}SetLastPosition(e,t){this.LastPosition.X=e,this.LastPosition.Y=t}async BaseCalculate(){var e,t,s,n;this.CalculationState==be.Calculation,this.Outputs.forEach(a=>{a.Links.forEach(i=>{var r,c;(c=(r=i==null?void 0:i.Out)==null?void 0:r.ParentNode)==null||c.SetNotCalculated()})});for(const a of this.Inputs)a.IsConnected&&(await((t=(e=a.Links[0].In)==null?void 0:e.ParentNode)==null?void 0:t.Calculate()),(n=(s=a.Links[0].In)==null?void 0:s.ParentNode)==null||n.SetCalculated());this.CalculationState==be.Calculation}SetNotCalculated(){this.CalculationState=be.NotCalculated,this.Outputs.forEach(e=>{e.Links.forEach(t=>{var s,n;(n=(s=t==null?void 0:t.Out)==null?void 0:s.ParentNode)==null||n.SetNotCalculated()})})}SetCalculated(){this.CalculationState=be.Calculated}async Calculate(){}}class E{constructor(e,t,s){l(this,"Guid",_t());l(this,"Links",new Array);l(this,"IsInput",!1);l(this,"ParentNode",null);l(this,"Position",new L(0,0));l(this,"OffsetPosition",new L(0,0));l(this,"Value",null);l(this,"Name","");this.ParentNode=t,this.IsInput=e,this.Name=s}get IsConnected(){return this.Links.length>0}SetOffset(e,t){this.OffsetPosition=new L(e,t)}SetPosition(e,t){this.Position=new L(e,t)}}class j{static register(e){var t=new e;this.classMap.set(t.constructor.name,e)}static registerStr(e,t,s){this.classMap.set(e,s),this.groupsMap.has(t)||this.groupsMap.set(t,new Map);var n=this.groupsMap.get(t);n==null||n.set(e,s)}static create(e,...t){const s=this.classMap.get(e);if(!s)throw new Error(`Class ${e} not registered`);return new s(...t)}static getGroups(){return this.groupsMap}}l(j,"classMap",new Map),l(j,"groupsMap",new Map);class Be{static Serialize(e){var i,r,c,u,f,_,h,d;var t=new Js;if(e.Nodes!=null&&e.Nodes.length>0)for(const m of e.Nodes){var s=new Qs;if(s.NodeType=m.Name,s.NodeGuid=m.Id,s.NodePostition=m.Position,m.Properties!=null&&m.Properties.length>0)for(const y of m.Properties){var n=new en;n.Value=y.Value,s.Properties==null&&(s.Properties=new Array),s.Properties.push(n)}t.Nodes==null&&(t.Nodes=new Array),t.Nodes.push(s)}if(e.Links!=null&&e.Links.length>0)for(const m of e.Links){var a=new tn;a.FromNodeGuid=(r=(i=m.In)==null?void 0:i.ParentNode)==null?void 0:r.Id,a.ToNodeGuid=(u=(c=m.Out)==null?void 0:c.ParentNode)==null?void 0:u.Id,a.FromTerminalIndex=(_=(f=m.In)==null?void 0:f.ParentNode)==null?void 0:_.Outputs.indexOf(m.In),a.ToTerminalIndex=(d=(h=m.Out)==null?void 0:h.ParentNode)==null?void 0:d.Inputs.indexOf(m.Out),t.Links==null&&(t.Links=new Array),t.Links.push(a)}return t}static Deserialize(e){var t=new pt;if(e.Nodes!=null&&e.Nodes.length>0)for(var s of e.Nodes){var n=j.create(s.NodeType);if(n.Id=s.NodeGuid,n.Move(s.NodePostition.X,s.NodePostition.Y),s.Properties!=null&&s.Properties.length>0)for(var a=0;a<s.Properties.length;a++)n.Properties[a].Value=s.Properties[a].Value;t.AddNode(n,!1)}if(e.Links!=null&&e.Links.length>0)for(var i of e.Links){var r=We(t.Nodes).firstOrDefault(u=>u.Id==i.FromNodeGuid),c=We(t.Nodes).firstOrDefault(u=>u.Id==i.ToNodeGuid);r==null||c==null||t.AddLink(r.Outputs[i.FromTerminalIndex],c.Inputs[i.ToTerminalIndex],!1)}return t}}class Js{constructor(){l(this,"Nodes");l(this,"Links")}static ToJson(e){return JSON.stringify(e)}}class Qs{constructor(){l(this,"NodeGuid");l(this,"NodeType");l(this,"NodePostition");l(this,"Properties")}}class en{constructor(){l(this,"Value")}}class tn{constructor(){l(this,"FromNodeGuid");l(this,"ToNodeGuid");l(this,"FromTerminalIndex");l(this,"ToTerminalIndex")}}class sn{constructor(e){l(this,"buffer");l(this,"capacity");l(this,"head",0);l(this,"tail",0);l(this,"size",0);l(this,"poppedItems",[]);if(e<=0)throw new Error("Capacity must be greater than 0");this.capacity=e,this.buffer=new Array(e)}get hasValues(){return this.size>0}get hasPoppedItems(){return this.poppedItems.length>0}push(e){this.poppedItems=[],this.size===this.capacity?(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.head=(this.head+1)%this.capacity):(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++)}pop(){if(!this.hasValues)return;this.tail=(this.tail-1+this.capacity)%this.capacity;const e=this.buffer[this.tail];return this.size--,this.poppedItems.push(e),e}unpop(){if(!this.hasPoppedItems)return;const e=this.poppedItems.pop();return this.size===this.capacity&&(this.head=(this.head+1)%this.capacity),this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++,e}toArray(){const e=[];for(let t=0;t<this.size;t++){const s=(this.head+t)%this.capacity;e.push(this.buffer[s])}return e}peek(){if(this.hasValues)return this.buffer[(this.tail-1+this.capacity)%this.capacity]}get length(){return this.size}}class me{static get HasValues(){return this.ActionHistoryBuffer.hasValues}static get HasPopped(){return this.ActionHistoryBuffer.hasPoppedItems}static PushState(e){this.ActionHistoryBuffer.push(Be.Serialize(e))}static UnpopState(){if(this.ActionHistoryBuffer.hasPoppedItems){var e=this.ActionHistoryBuffer.unpop();return Be.Deserialize(e)}return null}static PopState(){if(this.ActionHistoryBuffer.hasValues){var e=this.ActionHistoryBuffer.pop();return Be.Deserialize(e)}return null}}l(me,"ActionHistoryBuffer",new sn(25));class pt{constructor(){l(this,"IsSubGraph",!1);l(this,"Nodes",new Array);l(this,"Links",new Array)}get HasSelected(){return this.Nodes.some(e=>e.IsSelected)||this.Links.some(e=>e.IsSelected)}AddNode(e,t=!0){var s=this.Nodes.indexOf(e);s==-1&&(e.ParentGraph=this,this.Nodes.push(e),t&&me.PushState(this))}DeleteLink(e,t=!0){var s=this.Links.indexOf(e);s!=-1&&(e.DeleteLinkFromTerminals(),this.Links.splice(s,1),t&&me.PushState(this))}AddLink(e,t,s=!0){if(!(e.IsInput&&t.IsInput||!e.IsInput&&!t.IsInput)){var n=new jt;e.IsInput?(n.In=t,n.Out=e):(n.In=e,n.Out=t),t.Links.push(n),e.Links.push(n),this.Links.push(n),s&&me.PushState(this)}}DeleteNode(e,t=!0){if(e!=null){var s=pe();s.SelectedNode==e&&(s.SelectedNode=null),s.LockedNode==e&&(s.LockedNode=null),e.Inputs.forEach(a=>{var i=a.Links.map(r=>r);i.forEach(r=>{this.DeleteLink(r)})}),e.Outputs.forEach(a=>{var i=a.Links.map(r=>r);i.forEach(r=>{this.DeleteLink(r)})});var n=this.Nodes.indexOf(e);n!=-1&&this.Nodes.splice(n,1),t&&me.PushState(this)}}DeleteSelected(e=!0){this.Nodes.filter(s=>s.IsSelected).forEach(s=>this.DeleteNode(s,!1));var t=pe();t.SelectedNode=void 0,this.Links.filter(s=>s.IsSelected).forEach(s=>this.DeleteLink(s,!1)),e&&me.PushState(this)}DeselectAll(){var e=pe();e.SelectedNode=void 0,this.Nodes.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1)),this.Links.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1))}SelectAll(){this.Nodes.forEach(e=>e.SetSelected(!0))}}const ot=bt("drag",()=>{const o=O(!1),e=O(),t=O(),s=O();function n(i){s.value=i}function a(){return s.value}return{setNode:n,getNode:a,SourceTerminal:e,DestinationTerminal:t,IsDragging:o}}),pe=bt("nodes",()=>{const o=O(),e=O(),t=O();return{SelectedNode:o,LockedNode:e,CurrentGraph:t}}),ve=bt("renderer",()=>{const o=O(!1),e=O(),t=a=>{e.value=a},s=()=>e.value,n=O();return{ChangeEvent:o,Resolution:n,SetRenderer:t,GetRenderer:s}}),nn=X({__name:"HeapMonitor",setup(o){const e=O(0),t=O(0),s=()=>{setInterval(n,1e3)};Ze(()=>{s()});const n=()=>{performance&&performance.memory&&(e.value=performance.memory.usedJSHeapSize/1024/1024/1024,t.value=performance.memory.jsHeapSizeLimit/1024/1024/1024)};return(a,i)=>{const r=J("font-awesome-icon"),c=Ce("tooltip");return w(),V("div",{onContextmenu:i[0]||(i[0]=ue(()=>{},["prevent"])),class:"memory-usage"},[z((w(),V("span",null,[v(r,{icon:["fas","memory"]}),$(" "+I(e.value.toFixed(2))+" / "+I(t.value.toFixed(2))+" ",1),i[1]||(i[1]=b("span",null," GB",-1))])),[[c,"Heap memory usage",void 0,{up:!0}]])],32)}}}),on=F(nn,[["__scopeId","data-v-72365581"]]),an={class:"status-bar-grid disable-user-select"},rn={class:"working-status"},ln=X({__name:"StatusBar",setup(o){return ve(),(e,t)=>{const s=J("font-awesome-icon");return w(),V("div",an,[b("div",rn,[v(s,{icon:["fas","bars-progress"]}),t[0]||(t[0]=$(" Idle ",-1))]),b("div",null,[v(on)])])}}}),un=F(ln,[["__scopeId","data-v-ddd0f7cf"]]),dn={class:"collapse"},cn={class:"carete"},fn={key:0,class:"collapse-body"},hn=X({__name:"Collapse",setup(o){var e=O(!1);const t=()=>{e.value=!e.value};return(s,n)=>{const a=J("font-awesome-icon");return w(),V("div",dn,[b("div",{onClick:t,class:"header"},[b("div",cn,[H(e)?(w(),A(a,{key:0,icon:["fas","angle-right"]})):(w(),A(a,{key:1,icon:["fas","angle-down"]}))]),le(s.$slots,"header",{},void 0,!0)]),H(e)?se("",!0):(w(),V("div",fn,[le(s.$slots,"default",{},void 0,!0)]))])}}}),Jt=F(hn,[["__scopeId","data-v-ed8ad461"]]),Qe=T(([o])=>{const e=C(o).toVar();e.assign(e.modInt(g(289)));const t=g(g(34).mul(e.x).add(1).mul(e.x).modInt(289).add(e.y)).toVar();return t.assign(g(34).mul(t).add(g(1)).mul(t).modInt(289)),t.assign(xe(t.div(g(41))).mul(g(2)).sub(1)),xs(C(t.sub($e(t.add(.5))),Ee(t).sub(.5)))}).setLayout({name:"gradientNoiseDir",type:"vec2",inputs:[{name:"p",type:"vec2"}]}),pn=T(([o])=>{const e=C(o).toVar(),t=C($e(e)).toVar(),s=C(xe(e)).toVar(),n=g(Ne(Qe(t),s)).toVar(),a=g(Ne(Qe(t.add(C(g(0),g(1)))),s.sub(C(g(0),g(1))))).toVar(),i=g(Ne(Qe(t.add(C(g(1),g(0)))),s.sub(C(g(1),g(0))))).toVar(),r=g(Ne(Qe(t.add(C(g(1),g(1)))),s.sub(C(g(1),g(1))))).toVar();return s.assign(s.mul(s).mul(s).mul(s.mul(s.mul(g(6)).sub(g(15))).add(g(10)))),U(U(n,a,s.y),U(i,r,s.y),s.x)}).setLayout({name:"gradientNoise",type:"float",inputs:[{name:"p",type:"vec2"}]}),Qt=T(([o])=>pn(o).add(.5)),lt=T(([o,e,t,s])=>{const n=Xt(e).toVar(),a=g(s).toVar(),i=C(t.x,t.y).toVar(),r=C(o.x,o.y).sub(g(.5)).mul(a).toVar();r.addAssign(i);const c=g(0).toVar(),u=g(1).div(2).toVar();return Ut(n,({i:f})=>{const _=r.mul(g(2).pow(g(f))).toVar(),h=Qt(_).mul(u).toVar();u.divAssign(2),c.addAssign(h)}),c}).setLayout({name:"perlinNoise",type:"float",inputs:[{name:"UV",type:"vec2"},{name:"octaves",type:"int"},{name:"offset",type:"vec2"},{name:"scale",type:"float"}]}),vn=Gt(`
fn cracks(uv: vec2<f32>, angle: f32, scale: f32, thickness: f32) -> f32  {
	let st: vec2<f32> = (uv - 0.5) * scale;
	let i_st: vec2<f32> = floor(st);
	let f_st: vec2<f32> = fract(st);
	var m1: f32 = 1.;
	var m2: f32 = 1.;

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let neighbor: vec2<f32> = vec2<f32>(x, y);
			var point: vec2<f32> = random2(i_st + neighbor);
			point = 0.5 + 0.5 * sin(angle + 6.2831 * point);
			let diff: vec2<f32> = neighbor + point - f_st;
			let dist: f32 = length(diff);
			let cond: f32 = step(dist, m1);
			m2 = mix(min(max(m1, dist), m2), m1, cond);
			m1 = mix(m1, dist, cond);
		}

	}

	let edge: f32 = smoothstep(0.01, thickness, m2 - m1);
	return edge;
} 

fn random2(p: vec2<f32>) -> vec2<f32> {
	return fract(sin(vec2<f32>(dot(p, vec2<f32>(127.1, 311.7)), dot(p, vec2<f32>(269.5, 183.3)))) * 43758.547);
} 
`),dt=Gt(`
fn voronoi(UV: vec2<f32>, angleOffset: f32, cellDensity: f32) -> vec2<f32> {
	let g: vec2<f32> = floor((UV - 0.5) * cellDensity);
	let f: vec2<f32> = fract((UV - 0.5) * cellDensity);
	var res: vec3<f32> = vec3<f32>(8., 0., 0.);

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let lattice: vec2<f32> = vec2<f32>(x, y);
			let offset: vec2<f32> = voronoiNoiseRandomVector(lattice + g, angleOffset);
			let d: f32 = distance(lattice + offset, f);
			res = mix(res, vec3<f32>(d, offset.x, offset.y), step(d, res.x));
		}

	}

	return vec2<f32>(res.x, res.y);
} 

fn voronoiNoiseRandomVector(UV: vec2<f32>, offset: f32) -> vec2<f32> {
	var UV_var = UV;
	let m: mat2x2<f32> = mat2x2<f32>(15.27, 47.63, 99.41, 89.98);
	UV_var = fract(sin(UV_var * m) * 46839.32);
	return vec2<f32>(sin(UV_var.y * offset) * 0.5 + 0.5, cos(UV_var.x * offset) * 0.5 + 0.5);
}
`);class mn extends Q{constructor(){super(...arguments);l(this,"Name","nodes.perlinNoise");l(this,"Outputs",[new E(!1,this,"Output")]);l(this,"Properties",[new P("Scale",10,0,100,0,"Transform","%"),new P("Octaves Count",10,1,50,1,"Noise",""),new P("Offset X",0,-100,100,0,"Transform",""),new P("Offset Y",0,-100,100,0,"Transform",""),new P("Warp Scale",0,0,1,.001,"Warp","%"),new P("Seed",0,0,99999,0,"Random",""),new P("Height",.4,0,1,0,"Noise","")]);l(this,"IsRealtimeUpdate",!0);l(this,"DefaultOutput",0);l(this,"Random",T(([t])=>{const s=C(t).toVar();return xe(_e(Ne(s,C(12.9898,78.233))).mul(43758.5453))}))}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value);N(this.Properties[4].Value);const i=N(this.Properties[5].Value),r=N(this.Properties[6].Value);this.Outputs[0].Value=T(([c])=>{const u=C(c.x,c.y).toVar();return u.addAssign(this.Random(C(i).mul(i))),lt(u,s,C(n,a),t).mul(r)})}}const gn=X({__name:"DraggableNode",props:{GraphNode:{type:Function,required:!0}},setup(o){const e=ot(),t=o,s=O(),n=u=>{var _;if((_=u.dataTransfer)==null||_.setData("string","1"),t.GraphNode!=null&&t.GraphNode!=null){var f=t.GraphNode;e.setNode(new f)}};var a=void 0;const i=u=>{var h;a=(h=s.value)==null?void 0:h.cloneNode(!0);var f=a.getBoundingClientRect();if(a.style.position="fixed",a.style.left=`${u.touches[0].pageX-f.width/2}px`,a.style.top=`${u.touches[0].pageY-f.height/2}px`,a.style.zIndex="1000",document.body.appendChild(a),t.GraphNode!=null&&t.GraphNode!=null){var _=t.GraphNode;e.setNode(new _)}},r=u=>{if(a!=null){var f=a.getBoundingClientRect();a.style.left=`${u.touches[0].pageX-f.width/2}px`,a.style.top=`${u.touches[0].pageY-f.height/2}px`}},c=u=>{if(a!=null){document.body.removeChild(a),a=void 0,u.preventDefault(),u.stopPropagation();var f=u.changedTouches[0],_=document.elementFromPoint(f.clientX,f.clientY);console.log(_)}};return window.addEventListener("touchmove",r),window.addEventListener("touchend",c),(u,f)=>(w(),V("div",{onTouchstart:i,onDragstart:n,draggable:"true",class:"node",ref_key:"selfEl",ref:s},[le(u.$slots,"default",{},void 0,!0)],544))}}),wn=F(gn,[["__scopeId","data-v-ee47cd3c"]]),yn={class:"node-list"},_n=X({__name:"NodeList",setup(o){var e=j.getGroups();return(t,s)=>{const n=J("font-awesome-icon");return w(),V("div",yn,[(w(!0),V(Z,null,he(H(e),([a,i])=>(w(),V(Z,null,[a!=""?(w(),A(Jt,{key:0},{header:M(()=>[$(I(t.$t(a)),1)]),default:M(()=>[(w(!0),V(Z,null,he(i,([r,c])=>(w(),A(wn,{"-graph-node":c},{default:M(()=>[v(n,{icon:["fas","circle-nodes"]}),$(" "+I(t.$t(r)),1)]),_:2},1032,["-graph-node"]))),256))]),_:2},1024)):se("",!0)],64))),256))])}}}),bn=F(_n,[["__scopeId","data-v-ff1a0b3e"]]),Vn={class:"padding"},Sn={class:"header disable-user-select"},xn={class:"body disable-user-select"},Cn=X({__name:"FrameTab",props:{wheelFocus:{type:Boolean,default:!0}},setup(o){const e=o,t=O(),s=n=>{t.value&&e.wheelFocus&&t.value.focus()};return(n,a)=>(w(),V("div",Vn,[b("div",{class:"main",tabindex:"0",ref_key:"selfEl",ref:t,onWheel:s},[b("div",Sn,[le(n.$slots,"header",{},void 0,!0)]),b("div",xn,[le(n.$slots,"default",{},void 0,!0)])],544)]))}}),at=F(Cn,[["__scopeId","data-v-611ecd47"]]);class Me extends Q{constructor(){super(...arguments);l(this,"Name","nodes.buffer");l(this,"Inputs",[new E(!0,this,"")]);l(this,"Outputs",[new E(!1,this,"")])}async Calculate(){this.BaseCalculate();var t=this.Inputs[0].Links[0].In,s=this.Outputs[0];s.Value=t==null?void 0:t.Value}}class vt{constructor(e,t,s,n){l(this,"X",0);l(this,"Y",0);l(this,"Height",0);l(this,"Width",0);this.X=e,this.Y=t,this.Height=s,this.Width=n}ContainsRect(e){return this.X<=e.X&&e.X+e.Width<=this.X+this.Width&&this.Y<=e.Y&&e.Y+e.Height<=this.Y+this.Height}ContainsPoint(e,t){return this.X<=e&&e<this.X+this.Width&&this.Y<=t&&t<this.Y+this.Height}IntersectsWith(e){return e.X<this.X+this.Width&&this.X<e.X+e.Width&&e.Y<this.Y+this.Height&&this.Y<e.Y+e.Height}static Intersects(e,t){return e.X<t.X+t.Width&&t.X<e.X+e.Width&&e.Y<t.Y+t.Height&&t.Y<e.Y+e.Height}}const Pn=X({__name:"ContextMenu",props:{CloseOnAnyClick:{type:Boolean,default:!0},CloseOnMouseOut:{type:Boolean,default:!0}},emits:["lost-focus"],setup(o,{expose:e,emit:t}){const s=O(!1),n=O(),a=t,i=o,r=y=>{s.value=!0,ye(()=>{n.value!=null&&n.value!=null&&(n.value.style.left=y.pageX+"px",n.value.style.top=y.pageY+"px",u(),window.addEventListener("mousedown",m))})},c=y=>{ye(()=>{n.value!=null&&(n.value.style.width=y+"px")})},u=()=>{if(n.value!=null&&n.value!=null){const p=n.value.getBoundingClientRect();if(p.y+p.height>window.innerHeight){var y=p.y+p.height-window.innerHeight;n.value.style.top=p.y-y+"px"}if(p.y<0&&(n.value.style.top="0px"),p.x+p.width>window.innerWidth){var y=p.x+p.width-window.innerWidth;n.value.style.left=p.x-y+"px"}p.x<0&&(n.value.style.left="0px")}},f=y=>{s.value=!0,ye(()=>{if(n.value!=null&&n.value!=null){var p=y.getBoundingClientRect();n.value.style.left=p.x+"px",n.value.style.top=p.y+p.height+"px",u(),window.addEventListener("mousedown",m)}})},_=y=>{s.value=!0,ye(()=>{if(n.value!=null&&n.value!=null){var p=y.getBoundingClientRect(),x=n.value.getBoundingClientRect();n.value.style.left=p.x-x.width+"px",n.value.style.top=p.y+"px",u(),window.addEventListener("mousedown",m)}})},h=y=>{s.value=!0,ye(()=>{if(n.value!=null&&n.value!=null){var p=y.getBoundingClientRect();n.value.style.left=p.x+p.width+"px",n.value.style.top=p.y+"px",u(),window.addEventListener("mousedown",m)}})},d=()=>{window.removeEventListener("mousedown",m),s.value=!1},m=y=>{if(i.CloseOnMouseOut&&n.value!=null){var p=n.value.getBoundingClientRect(),x=new vt(p.x,p.y,p.height,p.width);x.ContainsPoint(y.clientX,y.clientY)||(s.value=!1,window.removeEventListener("mousedown",m),a("lost-focus"))}};return e({Open:r,Close:d,OpenUnder:f,OpenLeft:_,OpenRight:h,SetWidth:c,isOpened:s}),(y,p)=>(w(),A(is,{name:"open"},{default:M(()=>[(w(),A(as,{to:"body"},[s.value?(w(),V("div",{key:0,onContextmenu:p[0]||(p[0]=ue(()=>{},["prevent"])),onMousedown:p[1]||(p[1]=ue(()=>{},["stop"])),ref_key:"ContextMenu",ref:n,class:"context-menu disable-user-select"},[le(y.$slots,"default",{},void 0,!0)],544)):se("",!0)]))]),_:3}))}}),Xe=F(Pn,[["__scopeId","data-v-bc41e1a3"]]);class Tt{static pathExists(e,t){if(e===t)return!0;const s=new Set;return this.dfs(e,t,s)}static dfs(e,t,s){if(e===t)return!0;if(s.has(e))return!1;s.add(e);for(const n of e.Outputs)for(const a of n.Links)if(a.Out!=null&&a.Out!=null){const i=a.Out.ParentNode;if(this.dfs(i,t,s))return!0}return!1}}const Nn=X({__name:"TerminalRenderer",props:{Term:{type:E,required:!0}},setup(o,{expose:e}){const t=O(!1),s=ot(),n=o,a=_=>{s.SourceTerminal=n.Term,s.IsDragging=!0,window.addEventListener("mouseup",i)},i=_=>{var y,p,x;window.removeEventListener("mouseup",i),s.IsDragging=!1;var h=s.DestinationTerminal,d=s.SourceTerminal;if(h!=null&&h!=d&&!(d!=null&&d.IsInput&&h.IsInput)&&(d==null?void 0:d.ParentNode)!=h.ParentNode){if(d!=null&&d.IsInput){if(Tt.pathExists(d==null?void 0:d.ParentNode,h.ParentNode))return;d.Links.forEach(S=>{var D,Y;(Y=(D=d==null?void 0:d.ParentNode)==null?void 0:D.ParentGraph)==null||Y.DeleteLink(S)})}if(h.IsInput){if(Tt.pathExists(h==null?void 0:h.ParentNode,d==null?void 0:d.ParentNode))return;h.Links.forEach(S=>{var D,Y;(Y=(D=h==null?void 0:h.ParentNode)==null?void 0:D.ParentGraph)==null||Y.DeleteLink(S)})}(p=(y=n.Term.ParentNode)==null?void 0:y.ParentGraph)==null||p.AddLink(h,d);var m=ve();(x=n.Term.ParentNode)!=null&&x.IsRealtimeUpdate&&(m.ChangeEvent=!m.ChangeEvent)}},r=_=>{s.IsDragging&&(s.DestinationTerminal=n.Term)},c=_=>{s.IsDragging&&(s.DestinationTerminal=null)},u=O();Ze(()=>{ye(()=>{f()})});const f=()=>{var d,m,y,p;var _=((d=u.value)==null?void 0:d.offsetLeft)+((m=u.value)==null?void 0:m.offsetWidth)/2+2,h=((y=u.value)==null?void 0:y.offsetTop)+((p=u.value)==null?void 0:p.offsetHeight)/2+2;n.Term.SetOffset(_,h)};return e({SetOffset:f}),(_,h)=>{const d=Ce("tooltip");return z((w(),V("div",{class:de(["node-terminal",{connected:n.Term.IsConnected},"disable-user-select",{"build-marker":t.value}]),onMousedown:[h[0]||(h[0]=ue(()=>{},["right","stop"])),ue(a,["left"])],onMouseover:r,onMouseleave:c,ref_key:"selfEl",ref:u},null,34)),[[d,{content:n.Term.Name,placement:n.Term.IsInput?"left":"right"}]])}}}),Dt=F(Nn,[["__scopeId","data-v-ece7d6d8"]]),kn=X({__name:"ContextMenuItem",props:{Active:{type:Boolean,default:!1}},setup(o){return(e,t)=>(w(),V("button",{class:de([["btn",{active:o.Active}],"btn"]),style:{padding:"5px"}},[le(e.$slots,"default",{},void 0,!0)],2))}}),ie=F(kn,[["__scopeId","data-v-3e13e567"]]),In={},Mn={class:"loader"};function On(o,e){return w(),V("span",Mn)}const es=F(In,[["render",On],["__scopeId","data-v-8c5c5c6f"]]);class et extends Q{constructor(){super(...arguments);l(this,"Name","nodes.combine");l(this,"Inputs",[new E(!0,this,"Source 1"),new E(!0,this,"Source 2")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Mode","Burn",["Burn","Darken","Difference","Dodge","Divide","Exclusion","HardLight","HardMix","Lighten","LinearBurn","LinearDodge","LinearLight","LinearLightAddSub","Multiply","Negation","Overlay","PinLight","Screen","SoftLight","Subtract","VividLight","Overwrite"]),new P("Strength",0,0,100,0,"","%")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=this.Properties[0].Value,s=N(this.Properties[1].Value);this.Outputs[0].Value=T(([n])=>{var c,u;if(!this.Inputs[0].IsConnected||!this.Inputs[1].IsConnected)return g(0);const a=(c=this.Inputs[0].Links[0].In)==null?void 0:c.Value(n).toVar(),i=(u=this.Inputs[1].Links[0].In)==null?void 0:u.Value(n).toVar(),r=s.mul(.01);switch(t){case"Burn":{const f=g(1).sub(g(1).sub(i).div(a)).toVar();return U(a,f,r)}case"Darken":{const f=Ve(a,i).toVar();return U(a,f,r)}case"Difference":{const f=Ee(i.sub(a)).toVar();return U(a,f,r)}case"Dodge":{const f=a.div(i.add(g(1e-12))).toVar();return U(a,f,r)}case"Divide":{const f=a.div(g(1).sub(i)).toVar();return U(a,f,r)}case"Exclusion":{const f=i.add(a).sub(g(2).mul(i).mul(a)).toVar();return U(a,f,r)}case"HardLight":{const f=g(K(1,oe(2,K(1,a)).mul(K(1,i)))).toVar(),_=g(oe(2,a).mul(i)).toVar(),h=g(Te(i,.5)).toVar(),d=g(_.mul(h).add(g(1).sub(h).mul(f))).toVar();return U(a,d,r)}case"HardMix":{const f=g(Te(g(1).sub(a),i)).toVar();return U(a,f,r)}case"Lighten":{const f=Oe(i,a).toVar();return U(a,f,r)}case"LinearBurn":{const f=g(a.add(i.sub(1))).toVar();return U(a,f,r)}case"LinearDodge":{const f=a.add(i).toVar();return U(a,f,r)}case"LinearLight":{const f=g(Ps(i.lessThan(.5),Oe(a.add(g(2).mul(i).sub(g(1))),g(0)),Ve(a.add(g(2).mul(i.sub(.5))),g(1)))).toVar();return U(a,f,r)}case"LinearLightAddSub":{const f=g(i.add(oe(2,a).sub(1))).toVar();return U(a,f,r)}case"Multiply":{const f=a.mul(i).toVar();return U(a,f,r)}case"Negation":{const f=g(K(1,Ee(K(1,i).sub(a)))).toVar();return U(a,f,r)}case"Overlay":{const f=g(K(1,oe(2,K(1,a)).mul(K(1,i)))).toVar(),_=g(oe(2,a).mul(i)).toVar(),h=g(Te(a,.5)).toVar(),d=g(_.mul(h).add(g(1).sub(h).mul(f))).toVar();return U(a,d,r)}case"PinLight":{const f=g(Te(.5,i)).toVar(),_=g(f.mul(Oe(oe(2,a.sub(.5)),i))).toVar(),h=g(_.add(K(1,f).mul(Ve(oe(2,a),i)))).toVar();return U(a,h,r)}case"Screen":{const f=g(K(1,K(1,i).mul(K(1,a)))).toVar();return U(a,f,r)}case"SoftLight":{const f=g(K(1,oe(2,K(1,a)).mul(K(1,i)))).toVar(),_=g(Cs(a).mul(oe(2,i).sub(1)).add(oe(2,a).mul(K(1,i)))).toVar(),h=g(Te(i,.5)).toVar(),d=g(_.mul(h).add(g(1).sub(h).mul(f))).toVar();return U(a,d,r)}case"Subtract":{const f=a.sub(i).toVar();return U(a,f,r)}case"VividLight":{const f=g(K(1,K(1,i).div(oe(2,a)))).toVar(),_=g(i.div(oe(2,K(1,a)))).toVar(),h=g(Te(.5,a)).toVar(),d=g(_.mul(h).add(g(1).sub(h).mul(f))).toVar();return U(a,d,r)}case"Overwrite":return U(a,i,r)}return g(0)})}}class it{static async GetBuffer(e,t,s,n,a){const i=new Yt(t,t,{type:a,format:n,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1}),r=e.getRenderTarget();var c=new xt,u=new Ft(-.5,.5,.5,-.5,1,100);u.position.set(0,0,10);var f=new je(new rt(1,1,1,1)),_=new Ct;n!=He?_.colorNode=T(()=>{var d=ge(s,Ie()).r;return qe(d,d,d,1)})():_.colorNode=ge(s,Ie()),_.side=Ke,_.needsUpdate=!0,f.material=_,c.add(f),e.setRenderTarget(i),await e.renderAsync(c,u);var h=await e.readRenderTargetPixelsAsync(i,0,0,t,t);return i.dispose(),e.setRenderTarget(r),h}}const $n=new TextEncoder,Rn=3;class Ln{async Build(e,t,s){const n=new Yt(s,s,{type:t.type,format:ft,depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1});var a=new xt,i=new Ft(-.5,.5,.5,-.5,1,100);i.position.set(0,0,10);var r=new je(new rt(1,1,1,1)),c=new Ct;return c.colorNode=T(()=>{var u=ge(t,Ie()).r;return qe(u,u,u,1)})(),c.side=Ke,c.needsUpdate=!0,r.material=c,a.add(r),e.setRenderTarget(n),await e.renderAsync(a,i),await this.parse(e,n)}async parse(e,t,s){const n=e,a=t,r=Tn(a,s),c=await Dn(n,a,r),u=Bn(c,r),f=An(u,r);return Un(f,r)}}function Tn(o,e={}){const t={0:1,2:1,3:16},s=o.width,n=o.height,a=o.texture.type,i=o.texture.format,r=e.compression!==void 0?e.compression:Rn,c=e.type!==void 0?e.type:zt,u=c===Re?2:1,f=t[r];return{width:s,height:n,type:a,format:i,compression:r,blockLines:f,dataType:u,dataSize:2*u,numBlocks:Math.ceil(n/f),numInputChannels:4,numOutputChannels:4}}async function Dn(o,e,t){let s;return s=await o.readRenderTargetPixelsAsync(e,0,0,t.width,t.height),s instanceof Float32Array||s instanceof Uint16Array?s:new Float32Array}function Bn(o,e){const t=e.width,s=e.height,n={r:0,g:0,b:0,a:0},a={value:0},i=e.numOutputChannels==4?1:0,r=e.type==Re?Wn:Hn,c=e.dataType==1?Fn:mt,u=new Uint8Array(e.width*e.height*e.numOutputChannels*e.dataSize),f=new DataView(u.buffer);for(let _=0;_<s;++_)for(let h=0;h<t;++h){const d=_*t*4+h*4,m=r(o,d),y=r(o,d+1),p=r(o,d+2),x=r(o,d+3),S=(s-_-1)*t*(3+i)*e.dataSize;Yn(n,m,y,p,x),a.value=S+h*e.dataSize,c(f,n.a,a),a.value=S+i*t*e.dataSize+h*e.dataSize,c(f,n.b,a),a.value=S+(1+i)*t*e.dataSize+h*e.dataSize,c(f,n.g,a),a.value=S+(2+i)*t*e.dataSize+h*e.dataSize,c(f,n.r,a)}return u}function An(o,e){let t,s,n=0;const a={data:new Array,totalSize:0},i=e.width*e.numOutputChannels*e.blockLines*e.dataSize;switch(e.compression){case 0:t=En;break;case 2:case 3:t=Gn;break;default:throw Error("EXRExporter: Unsupported compression type.")}e.compression!==0&&(s=new Uint8Array(i));for(let r=0;r<e.numBlocks;++r){const c=o.subarray(i*r,i*(r+1)),u=t(c,s);n+=u.length,a.data.push({dataChunk:u,size:u.length})}return a.totalSize=n,a}function En(o){return o}function Gn(o,e){const t=e;let s=0,n=Math.floor((o.length+1)/2),a=0;const i=o.length-1;for(;!(a>i||(t[s++]=o[a++],a>i));)t[n++]=o[a++];let r=t[0];for(let u=1;u<t.length;u++){const f=t[u]-r+384;r=t[u],t[u]=f}return rs(t)}function Xn(o,e,t){const s={value:0},n=new DataView(o.buffer);G(n,20000630,s),G(n,2,s),te(n,"compression",s),te(n,"compression",s),G(n,1,s),Fe(n,t.compression,s),te(n,"screenWindowCenter",s),te(n,"v2f",s),G(n,8,s),G(n,0,s),G(n,0,s),te(n,"screenWindowWidth",s),te(n,"float",s),G(n,4,s),mt(n,1,s),te(n,"pixelAspectRatio",s),te(n,"float",s),G(n,4,s),mt(n,1,s),te(n,"lineOrder",s),te(n,"lineOrder",s),G(n,1,s),Fe(n,0,s),te(n,"dataWindow",s),te(n,"box2i",s),G(n,16,s),G(n,0,s),G(n,0,s),G(n,t.width-1,s),G(n,t.height-1,s),te(n,"displayWindow",s),te(n,"box2i",s),G(n,16,s),G(n,0,s),G(n,0,s),G(n,t.width-1,s),G(n,t.height-1,s),te(n,"channels",s),te(n,"chlist",s),G(n,t.numOutputChannels*18+1,s),te(n,"A",s),G(n,t.dataType,s),s.value+=4,G(n,1,s),G(n,1,s),te(n,"B",s),G(n,t.dataType,s),s.value+=4,G(n,1,s),G(n,1,s),te(n,"G",s),G(n,t.dataType,s),s.value+=4,G(n,1,s),G(n,1,s),te(n,"R",s),G(n,t.dataType,s),s.value+=4,G(n,1,s),G(n,1,s),Fe(n,0,s),Fe(n,0,s)}function Un(o,e){const t=e.numBlocks*8,s=259+18*e.numOutputChannels,n={value:s+t},a=new Uint8Array(s+t+o.totalSize+e.numBlocks*8),i=new DataView(a.buffer);Xn(a,o,e);for(let r=0;r<o.data.length;++r){const c=o.data[r].dataChunk,u=o.data[r].size;G(i,r*e.blockLines,n),G(i,u,n),a.set(c,n.value),n.value+=u}return a}function Yn(o,e,t,s,n){o.r=e,o.g=t,o.b=s,o.a=n}function Fe(o,e,t){o.setUint8(t.value,e),t.value+=1}function G(o,e,t){o.setUint32(t.value,e,!0),t.value+=4}function Fn(o,e,t){o.setUint16(t.value,Ns.toHalfFloat(e),!0),t.value+=2}function mt(o,e,t){o.setFloat32(t.value,e,!0),t.value+=4}function te(o,e,t){const s=$n.encode(e+"\0");for(let n=0;n<s.length;++n)Fe(o,s[n],t)}function zn(o){const e=(o&31744)>>10,t=o&1023;return(o>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):6103515625e-14*(t/1024))}function Hn(o,e){return zn(o[e])}function Wn(o,e){return o[e]}var gt=(o=>(o[o.PNG8=8]="PNG8",o[o.PNG16=16]="PNG16",o))(gt||{});class Bt{static async Build(e,t,s,n){let a;switch(n){case 8:a=await it.GetBuffer(e,s,t,ft,ks);break;case 16:{var i=await it.GetBuffer(e,s,t,ft,Re);a=new Uint16Array(s*s*4);for(var r=0;r<a.length;r++)a[r]=i[r]*65535,r%9e4===0&&await new Promise(u=>setTimeout(u,0));break}}var c=ls({width:s,height:s,depth:n,data:a});return c}}var re=(o=>(o[o.PNG8=0]="PNG8",o[o.PNG16=1]="PNG16",o[o.RAW16=2]="RAW16",o[o.RAW32=3]="RAW32",o[o.EXR16=4]="EXR16",o[o.EXR32=5]="EXR32",o[o.TIFF16=6]="TIFF16",o[o.TIFF32=7]="TIFF32",o))(re||{});class qn{constructor(e,t){l(this,"_renderer");l(this,"_textureForCompute");l(this,"_resolution");this._renderer=e,this._resolution=t,this._textureForCompute=new Pt(t,t),this._textureForCompute.format=He,this._textureForCompute.type=Re}async Build(e){switch(await this.ComputeTexture(e),e.BuildType){case 2:return await this.BuildRAW16();case 3:return await this.BuildRAW32();case 5:return await this.BuildEXR();case 0:return await this.BuildPNG8();case 1:return await this.BuildPNG16()}return new Blob}async BuildPNG8(){var e=await Bt.Build(this._renderer,this._textureForCompute,this._resolution,gt.PNG8);return new Blob([e],{type:"image/png"})}async BuildPNG16(){var e=await Bt.Build(this._renderer,this._textureForCompute,this._resolution,gt.PNG16);return new Blob([e],{type:"image/png"})}async BuildRAW16(){var e=await it.GetBuffer(this._renderer,this._resolution,this._textureForCompute,He,zt);return new Blob([e],{type:"application/octet-stream"})}async BuildRAW32(){var e=await it.GetBuffer(this._renderer,this._resolution,this._textureForCompute,He,Re);return new Blob([e],{type:"application/octet-stream"})}async BuildEXR(){const t=await new Ln().Build(this._renderer,this._textureForCompute,this._resolution);return this._renderer.setRenderTarget(null),new Blob([t],{type:"image/x-exr"})}async BuildTIFF16(){return new Blob}async BuildTIFF32(){return new Blob}async ComputeTexture(e){if(e==null||e.InputTermianl==null)return;await e.Calculate();const s=T(()=>{var f;const n=Ge.modInt(this._resolution),a=Ge.div(this._resolution),i=Nt(n,a),r=C(i.x,i.y).div(this._resolution).toVar();var c=(f=e.InputTermianl)==null?void 0:f.Value;const u=c(r).toVar();u.assign(Le(u,0,1)),kt(this._textureForCompute,i,u).toWriteOnly()})().compute(this._resolution*this._resolution);await this._renderer.computeAsync(s)}}class Ae extends Q{constructor(){super(...arguments);l(this,"Name","nodes.export");l(this,"Inputs",[new E(!0,this,"Input")]);l(this,"IsRealtimeUpdate",!0);l(this,"ExportFileName");l(this,"BuildType",re.EXR32)}SetFileName(t){this.ExportFileName=t}SetBuildType(t){this.BuildType=t}get InputTermianl(){return this.Inputs[0].IsConnected?this.Inputs[0].Links[0].In:null}async Calculate(){this.BaseCalculate()}}const Zn={class:"node-container"},jn={class:"node-terminals left"},Kn={class:"node-center"},Jn={class:"node-name"},Qn={class:"node-terminals right"},eo=X({__name:"NodeRenderer",props:{Offset:{type:L,required:!0},Zoom:{type:Number,required:!0},Node:{type:Q,required:!0},AllNodes:{type:Array,default:new Array}},setup(o){Et(k=>({v3166abee:c.value,v56380d10:u.value}));var e=o;const t=O(),s=fe("contextMenu"),n=fe("terminals");Ze(()=>{window.addEventListener("mousemove",W),window.addEventListener("mouseup",S),ye(()=>{var k=e.Node,R=t.value;if(k.SetSize(R.offsetHeight,R.offsetWidth),k.Move(k.Position.X-k.Width/2,k.Position.Y-k.Height/2),t!=null){var B=new ResizeObserver(d);B.observe(t.value)}})});const a=O(new L(0,0)),i=O(!1),r=ce(()=>{var k=pe();return k.LockedNode==e.Node}),c=ce(()=>i.value?"grabbing":"default"),u=ce(()=>e.Node.IsSelected?"1":"0"),f=ce(()=>{var k=pe(),R=k.LockedNode;return R!=null&&R==e.Node}),_=k=>{var R;(R=s.value)==null||R.Open(k)},h=()=>{var k;(k=s.value)==null||k.Close()},d=()=>{var k;n.value!=null&&((k=n.value)==null||k.forEach(R=>{R==null||R.SetOffset()}))},m=()=>{var k=pe(),R=ve();k.LockedNode==e.Node?k.LockedNode=null:(k.LockedNode=e.Node,e.Node.SetSelected(!0),R.ChangeEvent=!R.ChangeEvent)},y=(k,R,B)=>{var q,ne,we,Ue,Ot;if(i.value=!0,a.value.X=k,a.value.Y=R,B)e.Node.SetSelected(!((q=e.Node)!=null&&q.IsSelected));else{var ee=(ne=e.Node.ParentGraph)==null?void 0:ne.Nodes.filter(ke=>ke.IsSelected);ee.length>1?e.Node.IsSelected==!1&&((we=e.Node.ParentGraph)==null||we.DeselectAll(),e.Node.SetSelected(!0)):((Ue=e.Node.ParentGraph)==null||Ue.DeselectAll(),e.Node.SetSelected(!0))}(Ot=e.Node.ParentGraph)==null||Ot.Nodes.filter(ke=>ke.IsSelected).forEach(ke=>{ke.SetLastPosition(ke.Position.X,ke.Position.Y)}),me.PushState(e.Node.ParentGraph)},p=k=>{if(n.value!=null&&n.value.some(ee=>ee.$el==k.target||ee==k.target))return;let R=k.touches[0].clientX,B=k.touches[0].clientY;y(R,B,!1)},x=k=>{n.value!=null&&n.value.some(R=>R.$el==k.target||R==k.target)||y(k.clientX,k.clientY,k.shiftKey)},S=k=>{i.value=!1},D=k=>{i.value=!1},Y=k=>{let R=k.touches[0].clientX,B=k.touches[0].clientY;ae(R,B)},ae=(k,R)=>{var q;if(i.value){var B=(k-a.value.X)/e.Zoom,ee=(R-a.value.Y)/e.Zoom;(q=e.Node.ParentGraph)==null||q.Nodes.filter(ne=>ne.IsSelected).forEach(ne=>{ne.Move(ne.LastPosition.X+B,ne.LastPosition.Y+ee)})}},W=k=>{ae(k.clientX,k.clientY)};return(k,R)=>{const B=J("font-awesome-icon"),ee=Ce("tooltip");return w(),V("div",{class:de([{node:!(o.Node instanceof H(Me))&&!(o.Node instanceof H(et))&&!(o.Node instanceof H(Ae))},{"node-buffer":o.Node instanceof H(Me)||o.Node instanceof H(et)||o.Node instanceof H(Ae)},"disable-user-select",{"not-calculated":o.Node.CalculationState==H(be).NotCalculated&&!(o.Node instanceof H(Me))},{selected:o.Node.IsSelected},{lockedPreview:r.value},{"node-without-inputs":o.Node.Inputs.length==0},{"node-animation":o.Node.CalculationState==H(be).Calculation}]),style:us({top:H(e).Node.Position.Y+"px",left:H(e).Node.Position.X+"px"}),ref_key:"rootEl",ref:t,onMousedown:[ue(x,["left"]),ue(_,["right"])],onTouchmove:Y,onTouchstart:p,onTouchend:D},[b("div",Zn,[b("div",jn,[(w(!0),V(Z,null,he(o.Node.Inputs,q=>(w(),A(Dt,{ref_for:!0,ref_key:"terminals",ref:n,key:q.Guid,Term:q},null,8,["Term"]))),128))]),b("div",Kn,[o.Node instanceof H(Me)?(w(),A(B,{key:0,icon:"fa-solid fa-code-commit"})):o.Node instanceof H(et)?(w(),V(Z,{key:1},[z((w(),V("a",{class:"lock-icon",onClick:R[0]||(R[0]=q=>m())},[f.value?(w(),A(B,{key:0,icon:["fas","lock"]})):(w(),A(B,{key:1,icon:["fas","lock-open"]}))])),[[ee,{content:k.$t("tt.lockPreview"),placement:"bottom"}]]),v(B,{icon:"fa-solid fa-code-fork",rotation:"270"})],64)):o.Node instanceof H(Ae)?(w(),A(B,{key:2,icon:"fa-solid fa-floppy-disk"})):(w(),V(Z,{key:3},[z((w(),V("a",{class:"lock-icon",onClick:R[1]||(R[1]=q=>m())},[f.value?(w(),A(B,{key:0,icon:["fas","lock"]})):(w(),A(B,{key:1,icon:["fas","lock-open"]}))])),[[ee,{content:k.$t("tt.lockPreview"),placement:"bottom"}]]),b("div",Jn,I(k.$t(o.Node.Name)),1)],64))]),b("div",Qn,[(w(!0),V(Z,null,he(o.Node.Outputs,q=>(w(),A(Dt,{ref_for:!0,ref_key:"terminals",ref:n,key:q.Guid,Term:q},null,8,["Term"]))),128))])]),v(Xe,{ref_key:"contextMenu",ref:s,CloseOnAnyClick:!0},{default:M(()=>[v(ie,null,{default:M(()=>[v(B,{icon:["far","copy"]}),$(" "+I(k.$t("tt.copy")),1)]),_:1}),v(ie,{onClick:R[2]||(R[2]=q=>{var ne,we;(ne=o.Node.ParentGraph)==null||ne.DeleteNode(o.Node),(we=o.Node.ParentGraph)==null||we.DeleteSelected(),h()}),style:{color:"var(--vt-c-red)"}},{default:M(()=>[v(B,{icon:["far","trash-can"]}),$(" "+I(k.$t("tt.delete")),1)]),_:1}),R[4]||(R[4]=b("hr",null,null,-1)),v(ie,{onClick:R[3]||(R[3]=q=>{m(),h()})},{default:M(()=>[f.value?(w(),A(B,{key:0,icon:["fas","lock"]})):(w(),A(B,{key:1,icon:["fas","lock-open"]})),f.value?(w(),V(Z,{key:2},[$("  "+I(k.$t("tt.unlockPreview")),1)],64)):(w(),V(Z,{key:3},[$("  "+I(k.$t("tt.lockPreview")),1)],64))]),_:1})]),_:1},512)],38)}}}),to=F(eo,[["__scopeId","data-v-27bc092e"]]),so={},no={class:"canvas",xmlns:"http://www.w3.org/2000/svg"};function oo(o,e){return w(),V("svg",no,[le(o.$slots,"default",{},void 0,!0)])}const ao=F(so,[["render",oo],["__scopeId","data-v-81940268"]]),io=["points"],ro=X({__name:"LinkRenderer",props:{Link:{type:jt,required:!0}},setup(o){const e=o,t=()=>{e.Link.SetSelected(!0)},s=a=>{var f;var i=e.Link.In,r=e.Link.Out;if(!(i==null||r==null)){var c=new Me;c.Move(a.offsetX,a.offsetY);var u=(f=i.ParentNode)==null?void 0:f.ParentGraph;u!=null&&(u.DeleteLink(e.Link),u.AddNode(c),u.AddLink(i,c.Inputs[0]),u.AddLink(c.Outputs[0],r))}},n=ce(()=>{var r,c,u,f,_,h;var a=L.Add((c=(r=e.Link.In)==null?void 0:r.ParentNode)==null?void 0:c.Position,(u=e.Link.In)==null?void 0:u.OffsetPosition),i=L.Add((_=(f=e.Link.Out)==null?void 0:f.ParentNode)==null?void 0:_.Position,(h=e.Link.Out)==null?void 0:h.OffsetPosition);return`${a.X},${a.Y} ${a.X+20},${a.Y} ${i.X-20},${i.Y} ${i.X},${i.Y}`});return(a,i)=>(w(),V("polyline",{onClick:t,onDblclick:s,points:n.value,class:de(["line",{selected:e.Link.IsSelected}])},null,42,io))}}),lo=F(ro,[["__scopeId","data-v-ca4f4d6b"]]),uo={},co={class:"tool-bar-container"};function fo(o,e){return w(),V("div",co,[le(o.$slots,"default",{},void 0,!0)])}const wt=F(uo,[["render",fo],["__scopeId","data-v-b20ca96b"]]),ho={},po={class:"tool-bar-body"};function vo(o,e){return w(),V("div",po,[le(o.$slots,"default")])}const Se=F(ho,[["render",vo]]),mo={key:0,class:"selection-box"},go={class:"offset-container",ref:"offset_container"},wo=["points"],yo={key:1,style:{"pointer-events":"none",height:"100%",width:"100%",padding:"30px",position:"absolute"}},_o={style:{display:"flex","justify-content":"center","align-items":"center",height:"100%",width:"100%","border-radius":"50px",border:"4px dashed var(--vt-c-black-mute)",color:"var(--vt-c-black-mute)"}},bo={style:{"font-size":"50px","font-weight":"bold","text-shadow":"0px 0px 20px black"}},Vo=X({props:{MinScale:{type:Number,default:.5},MaxScale:{type:Number,default:2}},data(){return{Offset:new L(0,0),SelectionBox:new vt(0,0,0,0),SelectionBoxVisibility:!1,LastMouse:new L(0,0),LastOffset:new L(0,0),Zoom:1,isDragging:!1,_Graph:new pt,dragStore:ot(),points:"",GridSize:20,isDragOver:!1}},computed:{Nodes:function(){return this._Graph.Nodes},OffsetXStyle:function(){return this.Offset.X+"px"},OffsetYStyle:function(){return this.Offset.Y+"px"},EditorCursor:function(){return this.isDragging?"grabbing":"default"},SelectionBoxX:function(){return this.SelectionBox.X+"px"},SelectionBoxY:function(){return this.SelectionBox.Y+"px"},SelectionBoxHeight:function(){return this.SelectionBox.Height+"px"},SelectionBoxWidth:function(){return this.SelectionBox.Width+"px"},OffsetStyle:function(){var o=this.GridSize/2*this.Zoom;return this.Offset.X-o+"px "+(this.Offset.Y-o)+"px"},ScaleGridStyle:function(){var o=(this.GridSize*this.Zoom).toString();return`${o}px ${o}px`}},created(){window.addEventListener("mousemove",this.OnMouseMove),window.addEventListener("mouseup",this.OnMouseUp)},mounted(){this.$nextTick(()=>{var t;this.$el;var o=((t=this.$parent)==null?void 0:t.$el).parentElement;o!=null&&(o.onkeydown=this.KeysHandler),this._Graph=new pt;var e=pe();e.CurrentGraph=this._Graph})},methods:{SaveGraph(){var o=Be.Serialize(this._Graph),e=JSON.stringify(o);console.log(e);var t=JSON.parse(e);console.log(t);var s=Be.Deserialize(t);console.log(s)},Undo(){var o=me.PopState();o!=null&&(this._Graph=o)},Redo(){var o=me.UnpopState();o!=null&&(this._Graph=o)},isChild(o,e){for(var t=e.parentNode;t!=null;){if(t==o)return!0;t=t.parentNode}return!1},dragenter(){this.isDragOver=!0},dragleave(o){var e=this.$el,t=o.target;this.isChild(e,t)||(this.isDragOver=!1)},drop(o){this.isDragOver=!1;var e=ot(),t=e.getNode();if(t!=null){var s=this.$refs.editor,n=s.getBoundingClientRect();if(n!=null){me.PushState(this._Graph);var a=L.Div(new L(o.clientX-n.x-this.Offset.X,o.clientY-n.y-this.Offset.Y),this.Zoom);t==null||t.Move(a.X,a.Y),this._Graph.AddNode(t)}}},KeysHandler(o){o.key=="Delete"&&(me.PushState(this._Graph),this._Graph.DeleteSelected())},UpdateOffsetStyle(){var o=this.$refs.offset_container;o.style.left=this.OffsetXStyle,o.style.top=this.OffsetYStyle,o.style.scale=this.Zoom.toString()},OnMouseDownLeft:function(o){this.DrawGhostLine(o),o.target==this.$refs.editor&&(this.LastMouse=new L(o.clientX,o.clientY),this.SelectionBox.X=0,this.SelectionBox.Y=0,this.SelectionBox.Width=0,this.SelectionBox.Height=0,this.SelectionBoxVisibility=!0,this._Graph.DeselectAll())},OnMouseDownMiddle:function(o){this.isDragging=!0,this.LastMouse=new L(o.clientX,o.clientY),this.LastOffset={...this.Offset}},OnMouseMove:function(o){if(this.isDragging){o.preventDefault();var e=o.clientX-this.LastMouse.X,t=o.clientY-this.LastMouse.Y;this.Offset.X=this.LastOffset.X+e,this.Offset.Y=this.LastOffset.Y+t,this.UpdateOffsetStyle()}if(this.SelectionBoxVisibility){o.preventDefault();var s=new L(o.clientX,o.clientY),n=new L(Math.min(this.LastMouse.X,s.X),Math.min(this.LastMouse.Y,s.Y)),a=new L(Math.abs(this.LastMouse.X-s.X),Math.abs(this.LastMouse.Y-s.Y)),i=this.$refs.editor,r=i.getBoundingClientRect();this.SelectionBox.X=n.X-r.left,this.SelectionBox.Y=n.Y-r.top,this.SelectionBox.Width=a.X,this.SelectionBox.Height=a.Y,this._Graph.Nodes.forEach(c=>{var u=new vt(this.Offset.X+c.Position.X*this.Zoom,this.Offset.Y+c.Position.Y*this.Zoom,c.Height*this.Zoom,c.Width*this.Zoom);this.SelectionBox.IntersectsWith(u)?c.SetSelected(!0,!1):c.SetSelected(!1,!1)})}this.DrawGhostLine(o)},OnMouseUp:function(o){this.isDragging=!1,this.SelectionBoxVisibility=!1},OnWheel:function(o){let t=this.$refs.editor.getBoundingClientRect(),s=o.deltaY*.001,n=this.Zoom;this.Zoom=this.Clamp(this.Zoom-s,this.MinScale,this.MaxScale);let a=new L(o.clientX-t.left,o.clientY-t.top),i=(n-this.Zoom)/n;this.Offset=L.Add(this.Offset,L.Mul(L.Sub(a,this.Offset),i)),this.UpdateOffsetStyle()},DisableContextMenu(o){o.preventDefault()},Clamp:function(o,e,t){return Math.min(Math.max(o,e),t)},DrawGhostLine(o){var c;if(this.dragStore.IsDragging){var e=this.$refs.editor,t=e.getBoundingClientRect();if(o.preventDefault(),t!=null){var s=this.dragStore.SourceTerminal,n=L.Add((c=s.ParentNode)==null?void 0:c.Position,s.OffsetPosition),a=L.Div(new L(o.clientX-t.x-this.Offset.X,o.clientY-t.y-this.Offset.Y),this.Zoom),i=s.IsInput?a:n,r=s.IsInput?n:a;this.points=`${i.X},${i.Y} ${i.X+20},${i.Y} ${r.X-20},${r.Y} ${r.X},${r.Y}`}}}}}),So=X({...Vo,__name:"GraphRenderer",setup(o){return Et(e=>({v002c6548:e.EditorCursor,v2aba9081:e.SelectionBoxY,v2aba9080:e.SelectionBoxX,v0f8273c2:e.SelectionBoxHeight,v322179ce:e.SelectionBoxWidth,v3f222fda:e.ScaleGridStyle,v4a9860f6:e.OffsetStyle})),(e,t)=>{const s=J("font-awesome-icon"),n=Ce("tooltip");return w(),V("div",{class:"graph-renderer dot",ref:"editor",onWheel:t[4]||(t[4]=(...a)=>e.OnWheel&&e.OnWheel(...a)),onMousedown:[t[5]||(t[5]=ue((...a)=>e.OnMouseDownLeft&&e.OnMouseDownLeft(...a),["left"])),t[6]||(t[6]=ue((...a)=>e.OnMouseDownMiddle&&e.OnMouseDownMiddle(...a),["middle"]))],onContextmenu:ue(()=>!1,["prevent","right"]),onDragover:t[7]||(t[7]=ue(()=>{},["prevent"])),onDragenter:t[8]||(t[8]=(...a)=>e.dragenter&&e.dragenter(...a)),onDragleave:t[9]||(t[9]=(...a)=>e.dragleave&&e.dragleave(...a)),onDrop:t[10]||(t[10]=(...a)=>e.drop&&e.drop(...a))},[v(wt,{class:"top-left"},{default:M(()=>[v(Se,null,{default:M(()=>[z((w(),V("a",{onClick:t[0]||(t[0]=a=>e.Undo())},[v(s,{icon:["fas","rotate-left"]})])),[[n,e.$t("tt.undo"),void 0,{bottom:!0}]]),z((w(),V("a",{onClick:t[1]||(t[1]=a=>e.Redo())},[v(s,{icon:["fas","rotate-right"]})])),[[n,e.$t("tt.redo"),void 0,{bottom:!0}]])]),_:1}),v(Se,null,{default:M(()=>[z((w(),V("a",null,[v(s,{icon:["far","copy"]})])),[[n,e.$t("tt.copy"),void 0,{bottom:!0}]]),z((w(),V("a",null,[v(s,{icon:["far","paste"]})])),[[n,e.$t("tt.paste"),void 0,{bottom:!0}]]),z((w(),V("a",{class:de([{disabled:!e._Graph.HasSelected}]),style:{color:"var(--vt-c-red)"},onClick:t[2]||(t[2]=a=>e._Graph.DeleteSelected())},[v(s,{icon:["far","trash-can"]})],2)),[[n,e.$t("tt.delete"),void 0,{bottom:!0}]])]),_:1}),v(Se,null,{default:M(()=>[z((w(),V("a",null,[v(s,{icon:["fas","expand"]})])),[[n,e.$t("tt.fullscreen"),void 0,{bottom:!0}]])]),_:1})]),_:1}),v(wt,{class:"bottom-left"},{default:M(()=>[v(Se,null,{default:M(()=>[b("span",null,[e.Zoom<1?(w(),A(s,{key:0,icon:["fas","magnifying-glass-minus"]})):(w(),A(s,{key:1,icon:["fas","magnifying-glass-plus"]})),$(" "+I((e.Zoom*100).toFixed(0))+"%",1)])]),_:1}),v(Se,null,{default:M(()=>[b("span",null,[v(s,{icon:["fas","up-down-left-right"]}),$(" X: "+I(e.Offset.X.toFixed())+" Y: "+I(e.Offset.Y.toFixed()),1)])]),_:1}),v(Se,null,{default:M(()=>[z((w(),V("a",{onClick:t[3]||(t[3]=a=>{e.Offset.Reset(),e.Zoom=1,e.UpdateOffsetStyle()})},[v(s,{icon:["fas","arrows-rotate"]})])),[[n,e.$t("tt.resetView")]])]),_:1}),v(Se,null,{default:M(()=>[b("span",null,[v(s,{icon:["fas","circle-info"]}),$(" "+I(e.$t("hints.graphLmb")),1)])]),_:1}),v(Se,null,{default:M(()=>[b("span",null,[v(s,{icon:["fas","circle-info"]}),$(" "+I(e.$t("hints.graphWheel")),1)])]),_:1})]),_:1}),e.SelectionBoxVisibility?(w(),V("div",mo)):se("",!0),b("div",go,[v(ao,{id:"links-container"},{default:M(()=>[v($t,{name:"link"},{default:M(()=>[(w(!0),V(Z,null,he(e._Graph.Links,a=>(w(),A(lo,{key:a.Id,Link:a},null,8,["Link"]))),128))]),_:1}),e.dragStore.IsDragging?(w(),V("polyline",{key:0,class:"ghost-line",points:e.points},null,8,wo)):se("",!0)]),_:1}),v($t,{name:"delete",tag:"div"},{default:M(()=>[(w(!0),V(Z,null,he(e.Nodes,a=>(w(),A(to,{key:a.Id,Offset:e.Offset,Zoom:e.Zoom,Node:a},null,8,["Offset","Zoom","Node"]))),128))]),_:1})],512),e.isDragOver?(w(),V("div",yo,[b("div",_o,[b("span",bo,I(e.$t("hints.placeHere")),1)])])):se("",!0)],544)}}}),xo=F(So,[["__scopeId","data-v-df584e7d"]]),Co={style:{height:"100%",display:"flex","flex-direction":"row"}},Po={style:{"margin-left":"5px"}},No={style:{"margin-left":"5px"}},ko=X({__name:"EditorView",setup(o){return(e,t)=>{const s=J("font-awesome-icon");return w(),V("div",Co,[v(at,{style:{width:"20%","min-width":"300px"}},{header:M(()=>[v(s,{icon:["fas","list"]}),t[0]||(t[0]=$()),b("span",Po,I(e.$t("windows.nodesList")),1)]),default:M(()=>[v(bn)]),_:1}),v(at,{style:{width:"80%"}},{header:M(()=>[v(s,{icon:["fas","circle-nodes"]}),t[1]||(t[1]=$()),b("span",No,I(e.$t("windows.graph")),1)]),default:M(()=>[v(xo)]),_:1})])}}}),Io={style:{display:"flex","flex-direction":"row"}},Mo={style:{width:"100%","font-weight":"bold","text-align":"left","margin-left":"35px"}},Oo={style:{width:"100%","font-weight":"bold","text-align":"right","margin-right":"10px"}},$o={style:{width:"10px","margin-right":"10px"}},Ro={key:0,class:"dropdown"},Lo=["onClick"],To=X({__name:"SelectDropdown",props:{options:{type:Array,required:!1,default:[]},title:{type:String,required:!1,default:""},default:{type:String,required:!1,default:null},modelValue:{type:String,default:""},RealtimeChange:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,s=O(t.default?t.default:t.options.length>0?t.options[0]:null),n=O(!1);ze(()=>t.modelValue,i=>{s.value=i});const a=()=>{var i=ve();t.RealtimeChange&&(i.ChangeEvent=!i.ChangeEvent)};return(i,r)=>{const c=J("font-awesome-icon");return w(),V("div",{class:"dropdown-head input-element value",tabindex:"0",onBlur:r[1]||(r[1]=u=>n.value=!1),style:{width:"100%",position:"relative"}},[b("div",{onClick:r[0]||(r[0]=u=>n.value=!n.value),style:{height:"100%"}},[b("div",Io,[b("div",Mo,I(t.title)+I(t.title==""?"":":"),1),b("div",Oo,I(s.value),1),b("div",$o,[n.value?(w(),A(c,{key:1,icon:["fas","angle-up"]})):(w(),A(c,{key:0,icon:["fas","angle-down"]}))])])]),n.value?(w(),V("ul",Ro,[(w(!0),V(Z,null,he(o.options,(u,f)=>(w(),V("li",{class:de({selected:u==s.value}),key:f,onClick:_=>{s.value=u,n.value=!1,i.$emit("update:modelValue",s.value),a()}},I(u),11,Lo))),128))])):se("",!0)],32)}}}),ts=F(To,[["__scopeId","data-v-eb9599f8"]]),Do=X({__name:"LangSwitch",setup(o){const e=yt(),t=O("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);const s=c=>{e!=null&&(e.appContext.config.globalProperties.$i18n.locale=c,localStorage.setItem("userLang",c),t.value=c)},n=fe("langContextMenu"),a=O(),i=c=>{var u;(a!=null||a!=null)&&((u=n.value)==null||u.OpenUnder(a.value))};var r=new Map;return r.set("en","English"),r.set("ru","Русский"),(c,u)=>{const f=J("flag");return w(),V(Z,null,[b("button",{ref_key:"langSwitchBtn",ref:a,class:"btn disable-user-select",onClick:i},[v(f,{iso:t.value=="en"?"gb":t.value},null,8,["iso"]),$(" "+I(H(r).get(t.value)),1)],512),v(Xe,{ref:"langContextMenu"},{default:M(()=>[b("button",{class:"btn btnContextMenuPadding",onClick:u[0]||(u[0]=_=>{var h;s("ru"),(h=n.value)==null||h.Close()})},[v(f,{iso:"ru"}),u[2]||(u[2]=$(" Русский",-1))]),b("button",{class:"btn btnContextMenuPadding",onClick:u[1]||(u[1]=_=>{var h;s("en"),(h=n.value)==null||h.Close()})},[v(f,{iso:"gb"}),u[3]||(u[3]=$(" English",-1))])]),_:1},512)],64)}}}),Bo=X({__name:"ToggleButton",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=Vt(o,"modelValue");return(t,s)=>(w(),V("button",{class:de(["btn",{toggled:e.value}]),onClick:s[0]||(s[0]=n=>e.value=!e.value)},[le(t.$slots,"default",{},void 0,!0)],2))}}),Ao=F(Bo,[["__scopeId","data-v-4a53f642"]]),Eo=X({__name:"ResolutionSwitcher",setup(o){const e=yt(),t=O("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);var s=ve();const n=fe("contextMenu"),a=O(),i=_=>{var d,m,y;if(a!=null||a!=null){var h=(d=a.value)==null?void 0:d.getBoundingClientRect();(m=n.value)==null||m.OpenUnder(a.value),h!=null&&((y=n.value)==null||y.SetWidth(h.width))}},r=["0.5K","1K","2K","4K","8K"],c=[512,1024,2048,4096,8192],u=O(0),f=_=>{u.value=_;var h=s.GetRenderer();h!=null&&(h.ChangeResolution(c[_]),requestAnimationFrame(()=>h==null?void 0:h.Render()))};return(_,h)=>{const d=J("font-awesome-icon"),m=Ce("tooltip");return w(),V(Z,null,[z((w(),V("button",{ref_key:"switcher",ref:a,class:"btn disable-user-select",onClick:i},[v(d,{icon:["fas","vector-square"]}),$(" "+I(r[u.value])+" ",1),v(d,{icon:["fas","angle-down"]})])),[[m,_.$t("tt.mesh_resolution"),void 0,{bottom:!0}]]),v(Xe,{ref_key:"contextMenu",ref:n},{default:M(()=>[(w(),V(Z,null,he(r,(y,p)=>(w(),V(Z,null,[p>2?z((w(),A(ie,{key:0,class:"waringText",Active:p==u.value,onClick:x=>{var S;f(p),(S=n.value)==null||S.Close()}},{default:M(()=>[v(d,{icon:["fas","vector-square"]}),$(" "+I(y),1)]),_:2},1032,["Active","onClick"])),[[m,{content:_.$t("tt.resolutionWarning"),html:!0,distance:15},void 0,{right:!0}]]):(w(),A(ie,{key:1,Active:p==u.value,onClick:x=>{var S;f(p),(S=n.value)==null||S.Close()}},{default:M(()=>[v(d,{icon:["fas","vector-square"]}),$(" "+I(y),1)]),_:2},1032,["Active","onClick"]))],64))),64))]),_:1},512)],64)}}}),At=F(Eo,[["__scopeId","data-v-97dd3ce3"]]),Go={style:{height:"100%",width:"100%",position:"relative"}},Xo=["value"],Uo=X({__name:"ProjectNameEditor",props:tt({modelValue:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:tt(["update:modelValue"],["update:modelValue"]),setup(o,{emit:e}){const t=Vt(o,"modelValue"),s=e,n=O(!1),a=O(),i=O(),r=()=>{n.value=!0,ye(()=>{var _;i.value=t.value,(_=a.value)==null||_.focus()})},c=_=>{s("update:modelValue",i.value),n.value=!1},u=_=>{_.target!=null&&(i.value=_.target.value,s("update:modelValue",i.value))},f=_=>{_.key=="Enter"&&(_.target!=null&&(i.value=_.target.value,s("update:modelValue",i.value)),n.value=!1)};return(_,h)=>{const d=J("font-awesome-icon"),m=Ce("tooltip");return w(),V("div",Go,[n.value?(w(),V("input",{key:0,ref_key:"input",ref:a,onFocusout:c,onInput:u,onKeypress:f,class:"editor",value:t.value},null,40,Xo)):z((w(),V("div",{key:1,class:"label",onClick:r},[$(I(t.value),1)])),[[m,_.$t("tt.clickForEdit"),void 0,{bottom:!0}]]),v(d,{class:"icon",icon:["fas","pen"]})])}}}),Yo=F(Uo,[["__scopeId","data-v-7b27f16a"]]),Fo={class:"modal-container"},zo={class:"modal-header"},Ho={class:"title"},Wo={key:0,class:"closeButton"},qo={class:"modal-slot"},Zo={class:"modal-footer"},jo=X({__name:"Modal",props:{closeButton:{type:Boolean,default:!0}},setup(o,{expose:e}){const t=o,s=O(!1);return e({Open:()=>{s.value=!0},Close:()=>{s.value=!1}}),(i,r)=>{const c=J("font-awesome-icon");return s.value?(w(),V("div",{key:0,class:"modal-back",onClick:r[2]||(r[2]=u=>s.value=!1)},[b("div",{class:"modal-main",onClick:r[1]||(r[1]=ue(()=>{},["stop"]))},[b("div",Fo,[b("div",zo,[b("div",Ho,[le(i.$slots,"title",{},void 0,!0)]),r[3]||(r[3]=b("div",{style:{width:"100%"}},null,-1)),t.closeButton?(w(),V("div",Wo,[b("button",{class:"btn",style:{margin:"0"},onClick:r[0]||(r[0]=u=>s.value=!1)},[v(c,{icon:"fa-solid fa-xmark"})])])):se("",!0)]),b("div",qo,[le(i.$slots,"default",{},void 0,!0)]),b("div",Zo,[le(i.$slots,"footer",{},void 0,!0)])])])])):se("",!0)}}}),Mt=F(jo,[["__scopeId","data-v-56059a2a"]]),Ko={style:{display:"flex"}},Jo={style:{"margin-left":"0"},class:"btn btn-green footer-btn"},Qo=X({__name:"SettingsModal",setup(o,{expose:e}){const t=fe("settingsModal");return e({Open:()=>{var n;(n=t.value)==null||n.Open()}}),(n,a)=>{const i=J("font-awesome-icon");return w(),A(Mt,{ref_key:"settingsModal",ref:t},{title:M(()=>[v(i,{icon:["fas","gear"]}),$(" "+I(n.$t("tt.settings")),1)]),footer:M(()=>[b("div",Ko,[b("button",Jo,[v(i,{icon:["fas","floppy-disk"]}),$(" "+I(n.$t("tt.saveSettings")),1)]),b("button",{class:"btn btn-red footer-btn",onClick:a[0]||(a[0]=r=>{var c;return(c=t.value)==null?void 0:c.Close()})},[v(i,{icon:"fa-solid fa-circle-xmark"}),$(" "+I(n.$t("tt.cancel")),1)])])]),_:1},512)}}}),ea={class:"container"},ta={class:"node-name"},sa={class:"file-name"},na=X({__name:"ExportInput",props:{node:{type:Ae,required:!0}},setup(o){var u,f,_;const{t:e}=ds({useScope:"global"});var t=o;const s=fe("contextMenu"),n=O(),a=h=>{var d;console.log("Open"),(n!=null||n!=null)&&((d=s.value)==null||d.OpenUnder(n.value))},i=h=>{var d;t.node.SetBuildType(h),(d=s.value)==null||d.Close()},r=new Map([[re.EXR16,"EXR 16 bit"],[re.EXR32,"EXR 32 bit"],[re.PNG8,"PNG 8 bit"],[re.PNG16,"PNG 16 bit"],[re.RAW16,"RAW 16 bit float"],[re.RAW32,"RAW 32 bit float"]]),c=O(t.node.InputTermianl!=null?(f=(u=t.node.InputTermianl)==null?void 0:u.ParentNode)==null?void 0:f.Name:"");return(t.node.ExportFileName===""||t.node.ExportFileName==null)&&t.node.SetFileName(e(c.value).replace(" ","_")+"_"+((_=t.node.InputTermianl)==null?void 0:_.Name)),(h,d)=>{var y;const m=J("font-awesome-icon");return w(),V("div",ea,[b("div",ta,[$(I(h.$t(c.value))+" ",1),v(m,{icon:"fa-solid fa-arrow-right-long"}),$(" "+I((y=H(t).node.InputTermianl)==null?void 0:y.Name)+":",1)]),b("div",sa,[z(b("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=p=>H(t).node.ExportFileName=p)},null,512),[[cs,H(t).node.ExportFileName]])]),b("button",{onClick:a,ref_key:"contextMenuButton",ref:n,class:"format"},[$(I(H(r).get(H(t).node.BuildType))+" ",1),v(m,{icon:["fas","angle-down"]})],512),v(Xe,{ref_key:"contextMenu",ref:s},{default:M(()=>[(w(!0),V(Z,null,he(H(r),p=>(w(),A(ie,{Active:p[0]==H(t).node.BuildType,onClick:x=>i(p[0])},{default:M(()=>[$(I(p[1]),1)]),_:2},1032,["Active","onClick"]))),256))]),_:1},512)])}}}),oa=F(na,[["__scopeId","data-v-7829e071"]]);class aa{static DownloadArray(e,t){const s=new Blob([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(n)},100)}static DownloadBlob(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),setTimeout(()=>{document.body.removeChild(n),URL.revokeObjectURL(s)},100)}}const ia={class:"tabs-container"},ra={class:"tabs"},la={key:0,class:"input-container"},ua={key:1,class:"input-container"},da={style:{display:"flex"}},ca=["disabled"],fa=X({__name:"BuildModal",setup(o,{expose:e}){const t=fe("buildModal"),s=()=>{var d;(d=t.value)==null||d.Open(),r()},n=O(0);var a=pe(),i=O();const r=()=>{a.CurrentGraph!=null&&(i.value=We(a.CurrentGraph.Nodes).where(d=>d instanceof Ae&&d.InputTermianl!=null).toArray())};var c=["0.5K (512x512)","1K   (1024x1024)","2K   (2048x2048)","4K   (4096x4096)","8K   (8192x8192)"];const u=new Map([[re.PNG8,".png"],[re.PNG16,".png"],[re.RAW16,".raw"],[re.RAW32,".raw"],[re.EXR16,".exr"],[re.EXR32,".exr"],[re.TIFF16,".tiff"],[re.TIFF32,".tiff"]]),f=O(4096),_=O(!1),h=async()=>{var d=new fs;_.value=!0;var m=ve(),y=m.GetRenderer();if(y!=null){var p=new qn(y.GPURenderer,f.value);if(i.value!=null&&i.value.length!=0){for(var x of i.value){var S=x,D=await p.Build(S);d.file(S.ExportFileName+u.get(S.BuildType),D)}var Y=await d.generateAsync({type:"blob"});aa.DownloadBlob(Y,"build.zip")}}_.value=!1};return e({Open:s}),(d,m)=>{const y=J("font-awesome-icon");return w(),A(Mt,{ref:"buildModal"},{title:M(()=>[v(y,{icon:"fa-solid fa-hammer"}),$(" "+I(d.$t("tt.buildSettings")),1)]),footer:M(()=>[b("div",da,[b("button",{style:{"margin-left":"0"},class:"btn btn-green footer-btn",onClick:m[5]||(m[5]=p=>h()),disabled:_.value},[v(y,{icon:"fa-solid fa-hammer"}),$(" "+I(d.$t("tt.build")),1)],8,ca),b("button",{class:"btn btn-red footer-btn",onClick:m[6]||(m[6]=p=>{var x;return(x=t.value)==null?void 0:x.Close()})},[v(y,{icon:"fa-solid fa-circle-xmark"}),$(" "+I(d.$t("tt.cancel")),1)])])]),default:M(()=>[b("div",ia,[b("div",ra,[b("button",{onClick:m[0]||(m[0]=p=>n.value=0),class:de(["tab-item",{"tab-item-active":n.value==0}])},[v(y,{icon:["fas","vector-square"]}),$(" "+I(d.$t("buildModal.resolution")),1)],2),b("button",{onClick:m[1]||(m[1]=p=>n.value=1),class:de(["tab-item",{"tab-item-active":n.value==1}]),disabled:""},[v(y,{icon:"fa-solid fa-border-all"}),$(" "+I(d.$t("buildModal.tiles"))+" ",1),v(y,{icon:"fa-solid fa-triangle-exclamation"})],2),b("button",{onClick:m[2]||(m[2]=p=>n.value=2),class:de(["tab-item",{"tab-item-active":n.value==2}])},[v(y,{icon:"fa-solid fa-mountain"}),$(" "+I(d.$t("buildModal.terrain")),1)],2),b("button",{onClick:m[3]||(m[3]=p=>n.value=3),class:de(["tab-item",{"tab-item-active":n.value==3}])},[v(y,{icon:"fa-solid fa-hammer"}),$(" "+I(d.$t("buildModal.build")),1)],2),b("button",{onClick:m[4]||(m[4]=p=>n.value=4),class:de(["tab-item",{"tab-item-active":n.value==4}])},[v(y,{icon:"fa-solid fa-circle-nodes"}),$(" "+I(d.$t("buildModal.nodes")),1)],2)]),n.value==0?(w(),V("div",la,[v(ts,{options:H(c)},null,8,["options"])])):se("",!0),n.value==4?(w(),V("div",ua,[(w(!0),V(Z,null,he(H(i),p=>(w(),A(oa,{node:p},null,8,["node"]))),256))])):se("",!0)]),_.value?(w(),A(es,{key:0,style:{scale:"3"}})):se("",!0)]),_:1},512)}}}),ha=F(fa,[["__scopeId","data-v-830f1f17"]]),pa={style:{display:"flex"}},va={style:{"margin-left":"0"},class:"btn btn-green footer-btn"},ma=X({__name:"OpenModal",setup(o,{expose:e}){const t=fe("openModal");return e({Open:()=>{var n;(n=t.value)==null||n.Open()}}),(n,a)=>{const i=J("font-awesome-icon");return w(),A(Mt,{ref_key:"openModal",ref:t},{title:M(()=>[v(i,{icon:["fas","folder-open"]}),$(" "+I(n.$t("tt.load")),1)]),footer:M(()=>[b("div",pa,[b("button",va,[v(i,{icon:["fas","folder-open"]}),$(" "+I(n.$t("tt.load")),1)]),b("button",{class:"btn btn-red footer-btn",onClick:a[0]||(a[0]=r=>{var c;return(c=t.value)==null?void 0:c.Close()})},[v(i,{icon:"fa-solid fa-circle-xmark"}),$(" "+I(n.$t("tt.cancel")),1)])])]),_:1},512)}}}),ga={style:{"margin-left":"auto",right:"0px",height:"100%","white-space":"nowrap",overflow:"hidden"}},wa={class:"btn"},ya={class:"btn"},_a={class:"btn"},ba={class:"btn"},Va={class:"btn"},Sa={class:"btn"},xa=550,Ca=X({__name:"ActionButtonsBar",setup(o){const e=O(),t=fe("contextMenu"),s=O(),n=O(),a=pe(),i=fe("settingsModal"),r=fe("buildModal"),c=fe("openModal"),u=h=>{var d;(s!=null||s!=null)&&((d=t.value)==null||d.OpenUnder(s.value))},f=()=>{var m;var h=(m=e.value)==null?void 0:m.getBoundingClientRect();if(h!=null){var d=h==null?void 0:h.width;d!=null&&d<xa?n.value=!0:n.value=!1}};Ze(()=>{ye(()=>{f(),window.addEventListener("resize",()=>{f()})})});const _=()=>{if(a.CurrentGraph!=null){var h=Be.Serialize(a.CurrentGraph),d=JSON.stringify(h),m=document.createElement("a"),y=new Blob([d],{type:"text/plain"});m.href=URL.createObjectURL(y),m.download="untitled.json",m.click()}};return(h,d)=>{const m=J("font-awesome-icon"),y=J("font-awesome-layers"),p=Ce("tooltip");return w(),V(Z,null,[b("div",{ref_key:"menuContainer",ref:e,style:{display:"flex",height:"100%",width:"100%","white-space":"nowrap",overflow:"hidden"}},[b("div",ga,[n.value?(w(),V(Z,{key:0},[v(At),d[12]||(d[12]=b("div",{class:"separator"},null,-1)),z((w(),V("button",{onClick:u,ref_key:"contextMenuButton",ref:s,class:"btn"},[v(m,{icon:["fas","fa-bars"]})])),[[p,h.$t("tt.menu"),void 0,{bottom:!0}]]),v(Xe,{ref_key:"contextMenu",ref:t},{default:M(()=>[v(ie,null,{default:M(()=>[v(m,{icon:["fas","file"]}),$(" "+I(h.$t("tt.new")),1)]),_:1}),v(ie,null,{default:M(()=>[v(m,{icon:["fas","floppy-disk"]}),$(" "+I(h.$t("tt.save")),1)]),_:1}),v(ie,{onClick:d[0]||(d[0]=x=>{var S,D;(S=c.value)==null||S.Open(),(D=t.value)==null||D.Close()})},{default:M(()=>[v(m,{icon:["fas","folder-open"]}),$(" "+I(h.$t("tt.load")),1)]),_:1}),d[8]||(d[8]=b("hr",null,null,-1)),v(ie,null,{default:M(()=>[v(m,{icon:["fas","rotate-left"]}),$(" "+I(h.$t("tt.undo")),1)]),_:1}),v(ie,null,{default:M(()=>[v(m,{icon:["fas","rotate-right"]}),$(" "+I(h.$t("tt.redo")),1)]),_:1}),d[9]||(d[9]=b("hr",null,null,-1)),v(ie,{onClick:d[1]||(d[1]=x=>{var S,D;(S=i.value)==null||S.Open(),(D=t.value)==null||D.Close()})},{default:M(()=>[v(m,{icon:["fas","gear"]}),$(" "+I(h.$t("tt.settings")),1)]),_:1}),d[10]||(d[10]=b("hr",null,null,-1)),v(ie,{onClick:d[2]||(d[2]=x=>{var S,D;(S=r.value)==null||S.Open(),(D=t.value)==null||D.Close()})},{default:M(()=>[v(y,{style:{width:"20px"}},{default:M(()=>[v(m,{icon:"fa-solid fa-hammer"}),v(m,{icon:["fas","gear"],transform:"shrink-8 left-8 up-6"})]),_:1}),$(" "+I(h.$t("tt.buildSettings")),1)]),_:1}),v(ie,{onClick:d[3]||(d[3]=x=>{var S;return(S=t.value)==null?void 0:S.Close()})},{default:M(()=>[v(m,{icon:"fa-solid fa-hammer"}),$(" "+I(h.$t("tt.build")),1)]),_:1}),d[11]||(d[11]=b("hr",null,null,-1)),v(ie,null,{default:M(()=>[v(m,{icon:["fas","expand"]}),$(" "+I(h.$t("tt.fullscreen")),1)]),_:1})]),_:1},512),d[13]||(d[13]=b("div",{class:"separator"},null,-1)),z((w(),V("button",wa,[v(m,{icon:["fas","rotate-left"]})])),[[p,h.$t("tt.undo"),void 0,{bottom:!0}]]),z((w(),V("button",ya,[v(m,{icon:["fas","rotate-right"]})])),[[p,h.$t("tt.redo"),void 0,{bottom:!0}]])],64)):(w(),V(Z,{key:1},[v(At),d[14]||(d[14]=b("div",{class:"separator"},null,-1)),z((w(),V("button",_a,[v(m,{icon:["fas","file"]})])),[[p,h.$t("tt.new"),void 0,{bottom:!0}]]),z((w(),V("button",{onClick:d[4]||(d[4]=x=>_()),class:"btn"},[v(m,{icon:["fas","floppy-disk"]})])),[[p,h.$t("tt.save"),void 0,{bottom:!0}]]),z((w(),V("button",{onClick:d[5]||(d[5]=x=>{var S;return(S=c.value)==null?void 0:S.Open()}),class:"btn"},[v(m,{icon:["fas","folder-open"]})])),[[p,h.$t("tt.load"),void 0,{bottom:!0}]]),d[15]||(d[15]=b("div",{class:"separator"},null,-1)),z((w(),V("button",ba,[v(m,{icon:["fas","rotate-left"]})])),[[p,h.$t("tt.undo"),void 0,{bottom:!0}]]),z((w(),V("button",Va,[v(m,{icon:["fas","rotate-right"]})])),[[p,h.$t("tt.redo"),void 0,{bottom:!0}]]),d[16]||(d[16]=b("div",{class:"separator"},null,-1)),z((w(),V("button",{onClick:d[6]||(d[6]=x=>{var S;return(S=i.value)==null?void 0:S.Open()}),class:"btn"},[v(m,{icon:["fas","gear"]})])),[[p,h.$t("tt.settings"),void 0,{bottom:!0}]]),d[17]||(d[17]=b("div",{class:"separator"},null,-1)),z((w(),V("button",{onClick:d[7]||(d[7]=x=>{var S;return(S=r.value)==null?void 0:S.Open()}),class:"btn"},[v(y,{style:{width:"20px"}},{default:M(()=>[v(m,{icon:"fa-solid fa-hammer"}),v(m,{icon:["fas","gear"],transform:"shrink-8 left-8 up-6"})]),_:1})])),[[p,h.$t("tt.buildSettings"),void 0,{bottom:!0}]]),z((w(),V("button",Sa,[v(m,{style:{color:"var(--vt-c-green)"},icon:"fa-solid fa-hammer"})])),[[p,h.$t("tt.build"),void 0,{bottom:!0}]]),d[18]||(d[18]=b("div",{class:"separator"},null,-1)),z((w(),A(Ao,null,{default:M(()=>[v(m,{icon:["fas","expand"]})]),_:1})),[[p,h.$t("tt.fullscreen"),void 0,{bottom:!0}]])],64))])],512),v(Qo,{ref_key:"settingsModal",ref:i},null,512),v(ha,{ref_key:"buildModal",ref:r},null,512),v(ma,{ref_key:"openModal",ref:c},null,512)],64)}}}),Pa=F(Ca,[["__scopeId","data-v-9c8ae11b"]]),Na={class:"disable-user-select left-section",style:{display:"flex","flex-direction":"row"}},ka={class:"logo disable-user-select",style:{"text-transform":"uppercase"}},Ia={class:"padding"},Ma={class:"middle-actions",style:{}},Oa={style:{display:"flex","flex-direction":"row"}},$a=X({__name:"MainMenuBar",setup(o){const e=O(!1);ze(e,(s,n)=>{s?document.documentElement.requestFullscreen():document.exitFullscreen()});const t=O("Untitled");return(s,n)=>(w(),V("div",{class:"main",onContextmenu:n[1]||(n[1]=ue(()=>{},["prevent"]))},[b("div",Na,[b("div",ka,I(s.$t("logo")),1),v(Pa)]),b("div",Ia,[b("div",Ma,[v(Yo,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=a=>t.value=a)},null,8,["modelValue"])])]),b("div",Oa,[v(Do)])],32))}}),Ra=F($a,[["__scopeId","data-v-58738f50"]]),La={style:{display:"flex"}},Ta=["value","placeholder"],Da=X({__name:"ContextMenuInput",props:tt({Active:{type:Boolean,default:!1},Placeholder:{type:String,default:""},modelValue:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:tt(["update:modelValue"],["update:modelValue"]),setup(o,{emit:e}){var t=o;const s=Vt(o,"modelValue"),n=e,a=O(),i=u=>{n("update:modelValue",a.value)},r=u=>{u.target!=null&&(a.value=u.target.value,n("update:modelValue",a.value))},c=u=>{u.key=="Enter"&&u.target!=null&&(a.value=u.target.value,n("update:modelValue",a.value))};return(u,f)=>(w(),V("div",La,[b("input",{onFocusout:i,onInput:r,onKeypress:c,value:s.value,class:de([{active:o.Active}]),placeholder:H(t).Placeholder,style:{padding:"5px"}},null,42,Ta),le(u.$slots,"default",{},void 0,!0)]))}}),Ba=F(Da,[["__scopeId","data-v-a59750ae"]]),Aa={ref:"inputRange",class:"input-range"},Ea=["value"],Ga={class:"title"},Xa={class:"valueText"},Ua=X({props:{Min:Number,Max:Number,Suffix:String,Title:String,RealtimeChange:{type:Boolean,default:!0},Step:{type:Number,default:0},modelValue:{type:Number,default:0}},emits:["update:modelValue"],data(){return{IsDragging:!1,Value:0,lastPosition:new L(0,0),lastValue:0,IsInputVisible:!1,moveDistance:0}},created(){document.addEventListener("mousemove",this.OnMouseMove),document.addEventListener("mouseup",this.OnMouseUp),this.Value=this.modelValue},watch:{modelValue(o,e){this.Value=o}},methods:{ClickValue(o){this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+o,this.Min,this.Max):this.Value=this.Clamp(this.Value+(o>0?this.Step:-this.Step),this.Min,this.Max):this.Step==0?this.Value+=o:this.Value+=o>0?this.Step:-this.Step,this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnInput(o){this.Value=Number(o.target.value),this.Min!=null&&this.Max!=null&&(this.Value=this.Clamp(this.Value,this.Min,this.Max)),this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnMouseDown(o){this.IsInputVisible||(this.$el.requestPointerLock(),this.IsDragging=!0,this.lastPosition=new L(o.clientX,o.clientY),this.lastValue=this.Value,this.moveDistance=0)},OnMouseMove(o){this.IsDragging&&(this.moveDistance+=o.movementX,this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+o.movementX/(o.shiftKey?25:50),this.Min,this.Max):o.movementX!=0&&Math.abs(this.moveDistance)>=(o.shiftKey?25:50)&&(this.moveDistance=0,this.Value=this.Clamp(this.Value+(o.movementX>0?this.Step:-this.Step),this.Min,this.Max)):this.Step==0?this.Value+=o.movementX/(o.shiftKey?25:50):o.movementX!=0&&Math.abs(this.moveDistance)>=(o.shiftKey?25:50)&&(this.moveDistance=0,this.Value+=o.movementX>0?this.Step:-this.Step),this.$emit("update:modelValue",this.Value),this.UpdateEvent())},OnMouseUp(o){var e=new L(o.clientX,o.clientY);e.X==this.lastPosition.X&&e.Y==this.lastPosition.Y&&this.Value==this.lastValue&&(this.IsInputVisible=!0,this.$nextTick(()=>{var t=this.$refs.input;t.focus(),t.select()})),this.IsDragging=!1,document.exitPointerLock()},UpdateEvent(){var o=ve();this.RealtimeChange&&(o.ChangeEvent=!o.ChangeEvent)},validate(o){o.key=="Enter"&&o.target.blur();var e=/[0-9-]|\./;e.test(o.key)||o.preventDefault()},Clamp(o,e,t){return Math.min(Math.max(o,e),t)}}}),Ya=X({...Ua,__name:"InputRange",setup(o){return(e,t)=>{const s=J("font-awesome-icon");return w(),V("div",Aa,[b("div",{class:"button",onClick:t[0]||(t[0]=n=>e.ClickValue(-.1))},[v(s,{icon:["fas","caret-left"]})]),b("div",{class:"value",onMousedown:t[4]||(t[4]=ue((...n)=>e.OnMouseDown&&e.OnMouseDown(...n),["left"]))},[e.IsInputVisible?(w(),V("input",{key:0,onKeypress:t[1]||(t[1]=(...n)=>e.validate&&e.validate(...n)),ref:"input",class:"input-element",value:e.modelValue,onInput:t[2]||(t[2]=(...n)=>e.OnInput&&e.OnInput(...n)),onBlur:t[3]||(t[3]=n=>e.IsInputVisible=!1)},null,40,Ea)):(w(),V(Z,{key:1},[b("div",Ga,I(e.Title)+": ",1),b("div",Xa,I(Number(e.Value.toFixed(4)))+" "+I(e.Suffix),1)],64))],32),b("div",{class:"button",onClick:t[5]||(t[5]=n=>e.ClickValue(.1))},[v(s,{icon:["fas","caret-right"]})])],512)}}}),Fa=F(Ya,[["__scopeId","data-v-5ba96ddd"]]);class ct{constructor(){l(this,"Name");l(this,"Node");l(this,"Values")}static SavePreset(e){var t=localStorage.getItem("presets");if(t!=null){var s=JSON.parse(t),n=We(s).firstOrDefault(i=>i.Node==e.Node&&i.Name==e.Name);if(n!=null){var a=s.indexOf(n);s.splice(a,1)}s.push(e),localStorage.setItem("presets",JSON.stringify(s))}else{var s=new Array;s.push(e),localStorage.setItem("presets",JSON.stringify(s))}}static GetPresets(){var e=localStorage.getItem("presets");return e!=null?JSON.parse(e):new Array}}const za={class:"properties"},Ha={key:0,class:"not-selected"},Wa={class:"header"},qa={style:{width:"100%",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Za={class:"buttons",style:{display:"flex","font-weight":"bold"}},ja={key:0},Ka={key:0,style:{margin:"0px 10px"}},Ja={class:"input-group",style:{width:"100%",padding:"0px"}},Qa={key:1,style:{padding:"10px"}},ei={class:"notice"},ti=X({__name:"PropertiesView",setup(o){const e=pe(),t=ce(()=>e.SelectedNode),s=ce(()=>e.SelectedNode==null||e.SelectedNode instanceof Me),n=O(),a=ce(()=>{var y;return r((y=t.value)==null?void 0:y.Properties)}),i=()=>{if(e.SelectedNode!=null&&e.SelectedNode!=null&&e.SelectedNode){for(var y of e.SelectedNode.Properties)y.Reset();var p=ve();p.ChangeEvent=!p.ChangeEvent}};var r=y=>{var p=new Map;return y==null||y.length==0||y.forEach(x=>{var S;p.has(x.Category)||p.set(x.Category,new Array),(S=p.get(x.Category))==null||S.push(x)}),p};const c=fe("presetsContextMenu"),u=O(),f=y=>{var D;if(u!=null||u!=null){if(t.value!=null){var p=t.value.Name,x=ct.GetPresets(),S=We(x).where(Y=>Y.Node==p).toArray();n.value=S}(D=c.value)==null||D.OpenUnder(u.value)}},_=O(""),h=()=>{var S,D;if(t.value!=null&&!(_.value==""||_.value==null)){var y=t.value.Properties,p=new ct,x=new Array;y.forEach(Y=>{x.push(Y.Value)}),p.Name=_.value,p.Node=t.value.Name,p.Values=x,(S=n.value)==null||S.push(p),ct.SavePreset(p),(D=c.value)==null||D.Close(),_.value=""}},d=y=>{var p;s.value||(t.value.Properties.forEach((x,S)=>{x.Value=y.Values[S]}),(p=c.value)==null||p.Close(),m())},m=()=>{var y=ve();t.value.IsRealtimeUpdate&&(y.ChangeEvent=!y.ChangeEvent)};return(y,p)=>{var D;const x=J("font-awesome-icon"),S=Ce("tooltip");return w(),V("div",za,[s.value?(w(),V("div",Ha,[v(x,{icon:["fas","sliders"]})])):se("",!0),s.value?se("",!0):(w(),V(Z,{key:1},[b("div",Wa,[b("div",qa,I(y.$t((D=t.value)==null?void 0:D.Name)),1),b("div",Za,[z((w(),V("button",{ref_key:"presetsButton",ref:u,onClick:f,class:"btn"},[v(x,{icon:["fas","sliders"]})])),[[S,y.$t("tt.presets"),void 0,{bottom:!0}]]),z((w(),V("button",{class:"btn",onClick:i},[v(x,{icon:["fas","arrows-rotate"]})])),[[S,y.$t("tt.resetParams"),void 0,{bottom:!0}]]),v(Xe,{ref_key:"presetsContextMenu",ref:c},{default:M(()=>{var Y;return[(w(!0),V(Z,null,he(n.value,ae=>(w(),A(ie,{onClick:W=>d(ae)},{default:M(()=>[v(x,{icon:["fas","sliders"]}),$(" "+I(ae.Name),1)]),_:2},1032,["onClick"]))),256)),((Y=n.value)==null?void 0:Y.length)>0?(w(),V("hr",ja)):se("",!0),v(Ba,{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=ae=>_.value=ae),Placeholder:"New preset name..."},{default:M(()=>[b("button",{onClick:h,class:"btn",style:{padding:"6px"}},[v(x,{icon:"fa-solid fa-circle-plus"})])]),_:1},8,["modelValue"])]}),_:1},512)])]),t.value.Name?(w(),V("hr",Ka)):se("",!0),(w(!0),V(Z,null,he(a.value,([Y,ae])=>(w(),A(Jt,{style:{"background-color":"transparent",padding:"0px"}},{header:M(()=>[$(I(Y),1)]),default:M(()=>[b("div",Ja,[(w(!0),V(Z,null,he(ae,W=>(w(),V(Z,null,[typeof W.Value=="number"?(w(),A(Fa,{key:0,modelValue:W.Value,"onUpdate:modelValue":k=>W.Value=k,Min:W.Min,Max:W.Max,Step:W.Step,Suffix:W.Suffix,Title:W.Name},null,8,["modelValue","onUpdate:modelValue","Min","Max","Step","Suffix","Title"])):se("",!0),W.valueList!=null?(w(),A(ts,{key:1,modelValue:W.Value,"onUpdate:modelValue":k=>W.Value=k,default:W.Value,title:W.Name,options:W.valueList},null,8,["modelValue","onUpdate:modelValue","default","title","options"])):se("",!0)],64))),256))])]),_:2},1024))),256)),t.value.IsRealtimeUpdate==!1?(w(),V("div",Qa,[p[2]||(p[2]=b("button",{class:"btn apply-btn"}," Apply changes ",-1)),b("div",ei,[v(x,{icon:["fas","circle-exclamation"]}),p[1]||(p[1]=$(' This node performs a heavy operation, so the update occurs when you click the "Apply Changes" button and is cached. ',-1))])])):se("",!0)],64))])}}}),si=F(ti,[["__scopeId","data-v-10cf94de"]]);class ni{constructor(){l(this,"GridMaterial");l(this,"GridMesh");const e=g(.5).toVar(),t=g(5).toVar(),s=g(1*window.devicePixelRatio).toVar(),n=g(500).toVar(),a=g(200).toVar(),i=qe(.2,.2,.2,.2).toVar(),r=qe(.05,.05,.05,.2).toVar(),c=Is,u=Ms,f=T(([B,ee])=>{const q=ht(B,ee),ne=Ee(K(xe(K(q,.5)),.5)),we=ht(ne,Ht(q));return Ve(we.x,we.y)}),_=f(c.xz,e),h=f(c.xz,t),d=K(1,Ye(0,s,_)),m=K(1,Ye(0,s,h)),y=K(c,u),p=It(y),x=Ye(g(n),g(0),p),S=Ye(g(a),g(0),p),D=oe(i,oe(d,S)).toVar(),Y=oe(r,oe(m,x)).toVar(),ae=Os(Y,D),W=new Wt;W.colorNode=ae,W.transparent=!0,W.side=Ke,W.lights=!1;const k=new rt(1e3,1e3,1,1);k.rotateX(-Math.PI/2);const R=new je(k,W);this.GridMesh=R,this.GridMaterial=W}}class oi{constructor(){l(this,"Mesh");const e=T(([a,i,r])=>{const c=C(a.x,a.y).toVar(),u=C(Ee(c.mul(2).sub(1)).sub(C(i,r))).toVar();return u.assign(g(1).sub(u.div(Ht(u)))),$s(Ve(u.x,u.y))});var t=new Ct({color:"#fff",transparent:!0,side:Ke});t.colorNode=T(()=>{const a=e(Ie(),1,1).toVar(),i=e(Ie(),.9,1).toVar(),r=e(Ie(),1,.9).toVar(),c=e(Ie(),.98,.98).toVar(),u=Le(0,1,a.sub(i).sub(r).sub(c)).toVar();return qe(.8,.8,.8,u)})();var s=new rt(1,1,1,1);s.rotateX(-Math.PI/2);var n=new je(s,t);n.castShadow=!1,n.receiveShadow=!1,n.scale.set(10,1,10),n.position.set(0,.005,0),this.Mesh=n}}class ai{static async Generate(e=1,t=1,s=1,n=1){var a=new Rs;const i=e/2,r=t/2,c=Math.floor(s),u=Math.floor(n),f=c+1,_=u+1,h=e/c,d=t/u,m=f*_,y=c*u*6,p=m*2,x=new Float32Array(m*3),S=new Float32Array(m*3),D=new Float32Array(p),Y=new Uint32Array(y);let ae=0,W=0,k=0;for(let B=0;B<_;B++){const ee=B*d-r;for(let q=0;q<f;q++){const ne=q*h-i;x[ae]=ne,x[ae+1]=-ee,x[ae+2]=0,ae+=3,S[k]=0,S[k+1]=0,S[k+2]=1,k+=3,D[W]=q/c,D[W+1]=1-B/u,W+=2}B%1e4===0&&await new Promise(q=>setTimeout(q,0))}let R=0;for(let B=0;B<u;B++){for(let ee=0;ee<c;ee++){const q=ee+f*B,ne=ee+f*(B+1),we=ee+1+f*(B+1),Ue=ee+1+f*B;Y[R++]=q,Y[R++]=ne,Y[R++]=Ue,Y[R++]=ne,Y[R++]=we,Y[R++]=Ue}B%1e4===0&&await new Promise(ee=>setTimeout(ee,0))}return a.setIndex(new Je(Y,1)),a.setAttribute("position",new Je(x,3)),a.setAttribute("normal",new Je(S,3)),a.setAttribute("uv",new Je(D,2)),a}}class ii{constructor(){l(this,"Height",2);l(this,"GPURenderer");l(this,"HeightTexture");l(this,"TerrainMaterial");l(this,"IsMeshGenerated",O(!0));l(this,"Scene");l(this,"Camera");l(this,"Controls");l(this,"TerrainMesh");l(this,"GridMesh");l(this,"DirectionalLight");l(this,"DirectionalLight2");l(this,"_resolution",512);l(this,"_textureResolution",512);l(this,"_canvas");l(this,"_isColorized",!1);this.CreateRenderer(),this.Scene=new xt,this.Scene.environmentNode=Ls("#ffffff"),this.Scene.environmentIntensity=.05,this.Camera=new Ts(75,1,.01,1e3),this.Camera.position.z=10,this.Camera.position.y=10,this.CreateMaterial(),this.CreateTexture(this._resolution),this.CreateTerrainMesh(this.Resolution),this.CreateLight();const e=new ni;this.GridMesh=e.GridMesh,this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2),this.Scene.add(this.GridMesh);var t=new oi;this.Scene.add(t.Mesh);const s=ve();s.SetRenderer(this),s.Resolution=this.Resolution}get Resolution(){return this._resolution}get TextureResolution(){return this._textureResolution}CreateMaterial(){this.TerrainMaterial=new Wt({color:"#a2a2a2"}),this.TerrainMaterial.side=Ke,this.TerrainMaterial.needsUpdate=!0,this.TerrainMaterial.metalness=0,this.TerrainMaterial.roughness=1,this.TerrainMaterial.positionNode=T(()=>{const e=g(1/this.Resolution),t=g(1).sub(e).toVar(),s=De.xyz.toVar(),n=ge(this.HeightTexture,De.xz.add(.5).mul(t)).mul(this.Height);return s.y.addAssign(n),s})(),this.TerrainMaterial.normalNode=T(()=>{const e=g(1/this.TextureResolution).toVar(),t=g(1).sub(e).toVar(),s=De.xyz.add(Rt(e,0,0)).toVar(),n=De.xyz.add(Rt(0,0,e.negate())).toVar(),a=De.xyz.toVar(),i=ge(this.HeightTexture,De.xz.add(.5).mul(t)).mul(this.Height);a.y.addAssign(i),s.y.addAssign(ge(this.HeightTexture,s.xz.add(.5)).mul(t).mul(this.Height)),n.y.addAssign(ge(this.HeightTexture,n.xz.add(.5)).mul(t).mul(this.Height));const r=s.sub(a).normalize(),c=n.sub(a).normalize();return Ds(Bs(r,c))})()}CreateRenderer(){this.GPURenderer=new As({alpha:!0,antialias:!0}),this.GPURenderer.shadowMap.enabled=!0,this.GPURenderer.shadowMap.type=Es,this.GPURenderer.toneMapping=Gs,this.GPURenderer.setClearColor(0,0),this.GPURenderer.setPixelRatio(window.devicePixelRatio)}CreateTexture(e){this.HeightTexture=new Pt(Math.floor(this.TextureResolution),Math.floor(this.TextureResolution)),this.HeightTexture.format=He,this.HeightTexture.type=Re}CreateLight(){const e=new Lt(16777215,2);e.position.set(-10,10,0),e.castShadow=!0,e.shadow.autoUpdate=!0,e.shadow.camera.near=.1,e.shadow.camera.far=30,e.shadow.camera.top=8,e.shadow.camera.right=8,e.shadow.camera.bottom=-8,e.shadow.camera.left=-8,e.shadow.mapSize.set(8192,8192),e.shadow.radius=5,e.shadow.blurSamples=25,e.shadow.normalBias=.05,this.DirectionalLight=e;const t=new Lt(16777215,.5);t.position.set(10,10,0),this.DirectionalLight2=t}SetIsMeshGenerated(e){this.IsMeshGenerated.value=e}CreateTerrainMesh(e){this.SetIsMeshGenerated(!1),ai.Generate(1,1,e,e).then(t=>{t.rotateX(-Math.PI/2),this.TerrainMesh=new je(t,this.TerrainMaterial),this.TerrainMesh.castShadow=!0,this.TerrainMesh.receiveShadow=!0,this.TerrainMesh.scale.set(10,1,10),this.TerrainMesh.position.set(0,.006,0),this.GPURenderer.compile(this.TerrainMesh,this.Camera).finally(()=>{this.Scene.add(this.TerrainMesh),this.SetIsMeshGenerated(!0)})})}ChangeResolution(e){this._textureResolution=e,this.TerrainMaterial.dispose(),this.HeightTexture.dispose(),this.CreateTexture(this.TextureResolution),this.CreateMaterial(),this.TerrainMesh.material=this.TerrainMaterial,this.Scene.remove(this.DirectionalLight),this.Scene.remove(this.DirectionalLight2),this.DirectionalLight.dispose(),this.DirectionalLight2.dispose(),this.CreateLight(),this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2);const t=ve();t.Resolution=this.TextureResolution;const s=pe();s.LockedNode!=null?this.Recalculate(s.LockedNode):s.SelectedNode!=null&&this.Recalculate(s.SelectedNode),requestAnimationFrame(()=>this.Render())}OnWindowResize(){if(this.GPURenderer==null||this.Camera==null||this._canvas==null)return;var e=this._canvas.offsetHeight,t=this._canvas.offsetWidth;this.GPURenderer.setSize(t,e);const s=t/e;this.Camera.aspect=s,this.Camera.updateProjectionMatrix(),requestAnimationFrame(()=>this.Render())}async Render(){await this.GPURenderer.renderAsync(this.Scene,this.Camera)}Mount(e){this._canvas=e;var t=this._canvas.offsetHeight,s=this._canvas.offsetWidth;this._canvas.appendChild(this.GPURenderer.domElement),this.GPURenderer.setSize(s,t),this.Camera.aspect=s/t,this.Controls=new Xs(this.Camera,this.GPURenderer.domElement),this.Controls.enablePan=!1,this.Controls.update(),window.addEventListener("resize",()=>this.OnWindowResize()),this.Render(),requestAnimationFrame(()=>this.Render)}RequestRender(){requestAnimationFrame(()=>this.Render)}async Recalculate(e,t=!1){if(this.IsMeshGenerated.value==!1||e.Outputs.length==0)return;t||await e.Calculate();var s=e.Outputs[e.DefaultOutput].Value;const a=T(()=>{const i=Ge.modInt(this.TextureResolution),r=Ge.div(this.TextureResolution),c=Nt(i,r),u=C(c.x,c.y).div(this.TextureResolution).toVar(),f=s(u).toVar();f.assign(Le(f,0,1)),kt(this.HeightTexture,c,f).toWriteOnly()})().compute(this.TextureResolution*this.TextureResolution);this.GPURenderer.computeAsync(a).then(()=>{e.CalculationState=be.Calculated,requestAnimationFrame(()=>this.Render())})}SetGridVisible(e){this.GridMesh.visible=e,requestAnimationFrame(()=>this.Render())}}const ri={class:"container"},li={key:0,style:{position:"relative",height:"100%",width:"100%"}},ui={style:{position:"absolute !important",top:"calc(50% + 30px)",width:"100%","text-align":"center"}},di=X({__name:"Preview3D",setup(o){const e=O();e.value=new ii;const t=O();var s=ve();const n=ce(()=>s.ChangeEvent);var a=pe();const i=ce(()=>a.SelectedNode),r=ce(()=>{var y;return(y=e.value)==null?void 0:y.IsMeshGenerated});ze(r,async(y,p)=>{requestAnimationFrame(()=>{var x;return(x=e.value)==null?void 0:x.Render()})}),ze(n,async(y,p)=>{var x,S;a.LockedNode!=null?(x=e.value)==null||x.Recalculate(a.LockedNode,!1):i.value!=null&&((S=e.value)==null||S.Recalculate(i.value,!1))}),ze(i,async y=>{var x,S;if(a.LockedNode!=null)(x=e.value)==null||x.Recalculate(a.LockedNode);else if(y!=null){var p=y;await((S=e.value)==null?void 0:S.Recalculate(p))}}),Ze(()=>{ye(()=>{var y;(y=e.value)==null||y.Mount(t.value)})});let c=!1;const u=()=>{c=!0},f=()=>{c=!1};window.addEventListener("mouseup",f),window.addEventListener("pointerup",f);const _=()=>{c&&requestAnimationFrame(()=>{var y;return(y=e.value)==null?void 0:y.Render()})},h=()=>{requestAnimationFrame(()=>{var y;return(y=e.value)==null?void 0:y.Render()})},d=O(!0),m=()=>{var y;d.value=!d.value,(y=e.value)==null||y.SetGridVisible(d.value)};return(y,p)=>{var D;const x=J("font-awesome-icon"),S=Ce("tooltip");return w(),V("div",ri,[(D=e.value)!=null&&D.IsMeshGenerated?se("",!0):(w(),V("div",li,[v(es,{style:{scale:"2"}}),b("span",ui,I(y.$t("hints.initializingMesh")),1)])),b("div",{onMousedown:u,onMousemove:_,onWheel:h,onPointerdown:u,onPointermove:_,ref_key:"canvas",ref:t,style:{height:"100%",width:"100%"}},[v(wt,{class:"top-left"},{default:M(()=>[v(Se,null,{default:M(()=>[z((w(),V("a",{onClick:m},[v(x,{icon:["fas","hashtag"]})])),[[S,"Switch Grid visibility",void 0,{bottom:!0}]])]),_:1})]),_:1})],544)])}}}),ci=F(di,[["__scopeId","data-v-64b096ee"]]),fi={style:{width:"100%",height:"100%"}},hi={style:{height:"calc(100% - 80px)",display:"flex","flex-direction":"row"}},pi={style:{width:"80%",height:"100%"}},vi={style:{height:"50%",width:"100%",display:"block"}},mi={style:{"margin-left":"5px"}},gi={style:{height:"50%"}},wi={style:{width:"20%",height:"100%"}},yi={style:{"margin-left":"5px"}},_i=X({__name:"LayoutView",setup(o){return(e,t)=>{const s=J("font-awesome-icon");return w(),V("div",fi,[v(Ra,{style:{height:"50px"}}),b("div",hi,[b("div",pi,[b("div",vi,[v(at,{style:{display:"inline-block",width:"100%"}},{header:M(()=>[v(s,{icon:["fas","mountain-sun"]}),b("span",mi,I(e.$t("windows.thirdPreview")),1)]),default:M(()=>[v(ci)]),_:1})]),b("div",gi,[v(ko)])]),b("div",wi,[v(at,{style:{width:"100%"},"wheel-focus":!1},{header:M(()=>[v(s,{icon:["fas","sliders"]}),b("span",yi,I(e.$t("windows.properties")),1)]),default:M(()=>[v(si)]),_:1})])]),v(un,{style:{height:"30px"}})])}}}),bi=F(_i,[["__scopeId","data-v-96fdc7ac"]]),Vi=hs({history:ps("/"),routes:[{path:"/",name:"home",component:bi}]});class Si extends Q{constructor(){super(...arguments);l(this,"Name","nodes.clamp");l(this,"Inputs",[new E(!0,this,"Source")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Min",0,0,1),new P("Max",1,0,1)]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value),s=N(this.Properties[1].Value);this.Outputs[0].Value=T(([n])=>{var i;if(!this.Inputs[0].IsConnected)return g(0);const a=(i=this.Inputs[0].Links[0].In)==null?void 0:i.Value(n);return Le(a,t,s)})}}class xi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.constant");l(this,"Outputs",[new E(!1,this,"Output")]);l(this,"Properties",[new P("Height",0,0,1)]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value);this.Outputs[0].Value=T(([s])=>g(t))}}class Ci extends Q{constructor(){super(...arguments);l(this,"Name","nodes.cracks");l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Scale",10,0,100,0,"Transform","%"),new P("Angle",0,0,100,0,"Noise",""),new P("Thickness",.03,0,1,0,"Noise",""),new P("Distortion",0,0,100,0,"Distortion",""),new P("Octaves",10,0,100,1,"Distortion",""),new P("Scale",10,0,100,0,"Distortion",""),new P("Offset X",0,-100,100,0,"Distortion",""),new P("Offset Y",0,-100,100,0,"Distortion","")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value),i=N(this.Properties[4].Value),r=N(this.Properties[5].Value),c=N(this.Properties[6].Value),u=N(this.Properties[7].Value);this.Outputs[0].Value=T(([f])=>{const _=C(f.x,f.y).toVar(),h=C(lt(_.mul(2).mul(.5),i,C(c,u),r)).mul(a).mul(.2);return vn({uv:_.add(h),angle:s,scale:t,thickness:n})})}}const Pi=T(([o,e,t])=>{const s=g(t).toVar(),n=g(e).toVar(),a=g(o).toVar();s.assign(Oe(0,s));const i=g(Oe(0,Ve(1,n.sub(a).add(s).div(g(2).mul(s))))).toVar();return a.mul(i).add(n.mul(g(1).sub(i)).sub(s.mul(i).mul(g(1).sub(i))))}).setLayout({name:"smoothMin",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),Ni=T(([o,e,t])=>{const s=g(t).toVar(),n=g(e).toVar(),a=g(o).toVar();s.assign(Ve(0,s.negate()));const i=g(Oe(0,Ve(1,n.sub(a).add(s).div(g(2).mul(s))))).toVar();return a.mul(i).add(n.mul(g(1).sub(i)).sub(s.mul(i).mul(g(1).sub(i))))}).setLayout({name:"smoothMax",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),ki=T(([o])=>{const e=C(o).toVar();return xe(_e(Ne(e.xy,C(12.9898,78.233))).mul(43758.5453123))}).setLayout({name:"random",type:"float",inputs:[{name:"st",type:"vec2"}]}),Ii=T(([o,e,t])=>{const s=g(t).toVar(),n=g(e).toVar(),a=C(o).toVar(),i=C(a.mul(n)).toVar(),r=C($e(i)).toVar(),c=C(xe(i)).toVar(),u=g(ki(r).mul(2).sub(1).mul(s)).toVar(),f=g(_e(u)).toVar(),_=g(st(u)).toVar(),h=C(c.sub(.5)).toVar(),d=C().toVar();return d.x.assign(h.x.mul(_).sub(h.y.mul(f))),d.y.assign(h.x.mul(f).add(h.y.mul(_))),d.add(.5).add(r).mod(1)}).setLayout({name:"tilingWithLimitedRotation",type:"vec2",inputs:[{name:"uv",type:"vec2"},{name:"tileCount",type:"float"},{name:"maxAngle",type:"float"}]});class Mi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.crater");l(this,"Outputs",[new E(!1,this,"Output")]);l(this,"Properties",[new P("Smoothness",.5,0,1,0,"Crater params",""),new P("FloorHeight",-1,-5,5,0,"Crater params",""),new P("Radius",.16,0,1,0,"Crater params",""),new P("RimWidth",1.35,0,100,0,"Crater params",""),new P("RimSteepness",4,0,100,0,"Crater params",""),new P("X",.5,0,1,0,"Transform",""),new P("Y",.5,0,1,0,"Transform","")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value),i=N(this.Properties[4].Value),r=N(this.Properties[5].Value),c=N(this.Properties[6].Value);this.Outputs[0].Value=T(([u])=>{const f=C(u.x,u.y).toVar(),_=C(r,c).toVar(),h=g(It(f.sub(_)).div(Oe(n,1e-4))).toVar(),d=g(h.mul(h).sub(1)).toVar(),m=g(Ve(h.sub(1).sub(a),0)).toVar(),y=g(i.mul(m).mul(m)).toVar(),p=g(Ni(d,s,t)).toVar();return p.assign(Pi(p,y,t)),p.mul(n).add(.5).toVar()})}}class Oi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.fake");l(this,"Position",new L(1e3,1e3))}}class $i extends Q{constructor(){super(...arguments);l(this,"Name","nodes.falloff");l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Strength",0,0,10)]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value);this.Outputs[0].Value=T(([s])=>{const n=C(s.x,s.y).toVar(),a=g(qt(C(.5),n.mod(1))).mul(t).toVar(),i=U(g(1),g(0),a).toVar();return nt(Le(i,0,1),2)})}}const Ri=T(([o,e])=>{const t=o.mul(e).toVar();return $e(t).add(.5).toVar().div(e)});class Li extends Q{constructor(){super(...arguments);l(this,"Name","nodes.fastErosion");l(this,"Inputs",[new E(!0,this,"Inpute Height")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Power",.1,0,1,0,"Erosion","")]);l(this,"IsRealtimeUpdate",!1);l(this,"terrainHeight")}async Calculate(){await this.BaseCalculate();const t=ve(),s=t.GetRenderer(),n=t.Resolution;if(this.terrainHeight=new Pt(Math.floor(n),Math.floor(n)),this.terrainHeight.type=Re,!this.IsCalculated){const r=T(()=>{var h;const c=Ge.modInt(n),u=Ge.div(n),f=Nt(c,u);C(1/n).toVar();const _=C(f.x,f.y).div(n).toVar();if(this.Inputs[0].IsConnected){const m=((h=this.Inputs[0].Links[0].In)==null?void 0:h.Value)(_).toVar();kt(this.terrainHeight,f,m).toWriteOnly()}})().compute(n*n);s==null||s.GPURenderer.computeAsync(r)}this.CalculationState=be.Calculation;for(let i=0;i<1e8;i++)this.CalculationState,i%1e5==0&&await new Promise(r=>setTimeout(r,0));const a=N(this.Properties[0].Value);this.Outputs[0].Value=T(([i])=>{if(this.Inputs[0].IsConnected){const r=C(i.x,i.y).toVar(),c=Ri(r,n).toVar(),u=ge(this.terrainHeight,c),f=u.r,_=u.g,h=u.b,d=ge(this.terrainHeight,c.add(ut(Xt(-1),0))).r,m=ge(this.terrainHeight,c.add(ut(1,0))).r,y=ge(this.terrainHeight,c.add(ut(0,1))).r,p=C(m.sub(d),y.sub(f));_.addAssign(5e-4);const S=It(p).mul(_).mul(10).mul(a);return f.subAssign(S),h.addAssign(S),_.mulAssign(.95),h.mulAssign(.99),f}else return 0})}}class Ti extends Q{constructor(){super(...arguments);l(this,"Name","nodes.gradientNoise");l(this,"Outputs",[new E(!1,this,"Output")]);l(this,"Properties",[new P("Scale",10,0,100),new P("Offset X",0,0,100),new P("Offset Y",0,0,100)]);l(this,"IsRealtimeUpdate",!0);l(this,"DefaultOutput",0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value);this.Outputs[0].Value=T(([a])=>{const i=C(a.x,a.y).mul(t).toVar(),r=C(s,n).toVar();return i.addAssign(r),Qt(i)})}}class Di extends Q{constructor(){super(...arguments);l(this,"Name","nodes.invert");l(this,"Inputs",[new E(!0,this,"Source")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate(),this.Outputs[0].Value=T(([t])=>{var n;if(!this.Inputs[0].IsConnected)return g(0);const s=(n=this.Inputs[0].Links[0].In)==null?void 0:n.Value(t);return g(1).sub(s)})}}class Bi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.mountain");l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Scale",3.55,0,100,0,"Noise Transform","%"),new P("Octaves Count",10,1,50,1,"Noise Params",""),new P("Offset X",-.08,-100,100,0,"Noise Transform",""),new P("Offset Y",-.54,-100,100,0,"Noise Transform",""),new P("Falloff",3,0,20,0,"Mountain",""),new P("Height",1,0,1,0,"Mountain",""),new P("Position X",.5,0,1,0,"Mountain Transform",""),new P("Position Y",.5,0,1,0,"Mountain Transform","")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value),i=N(this.Properties[4].Value),r=N(this.Properties[5].Value),c=N(this.Properties[6].Value),u=N(this.Properties[7].Value);this.Outputs[0].Value=T(([f])=>{const _=C(f.x,f.y).toVar(),h=g(qt(C(c,u),_)).mul(i).toVar(),d=U(g(1),g(0),h).toVar(),m=nt(Le(d,0,1),2),y=_.sub(C(c,u).sub(.5)).toVar(),p=lt(y,s,C(n,a),t).toVar();return Le(m.mul(p).mul(g(1.45).mul(r)),0,1)})}}class Ai extends Q{constructor(){super(...arguments);l(this,"Name","nodes.redistribution");l(this,"Inputs",[new E(!0,this,"Source")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Exponent",1,1,10)]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value);this.Outputs[0].Value=T(([s])=>{var a;return this.Inputs[0].IsConnected?((a=this.Inputs[0].Links[0].In)==null?void 0:a.Value(s)).pow(t):g(0)})}}class Ei extends Q{constructor(){super(...arguments);l(this,"Name","nodes.terrace");l(this,"Inputs",[new E(!0,this,"Param 1")]);l(this,"Outputs",[new E(!1,this,"Output")]);l(this,"Properties",[new P("Smoothness",.1,0,1),new P("Count",3,0,100,1)]);l(this,"IsRealtimeUpdate",!0);l(this,"DefaultOutput",0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value);this.Outputs[0].Value=T(([n])=>{var a;if(this.Inputs[0].IsConnected){const r=((a=this.Inputs[0].Links[0].In)==null?void 0:a.Value)(n).toVar();if(this.Properties[1].Value==0)return r;const c=g(1).div(s).toVar(),u=$e(r.div(c)).toVar(),f=r.sub(u.mul(c)).div(c).toVar(),_=Ve(g(2).mul(f),g(1)).toVar(),h=u.add(_).mul(c).toVar(),d=ht(1,g(s)),m=$e(r.div(d)),y=xe(r.div(d)),p=m.mul(d).add(Ye(0,1,y).mul(d));return U(h,p,t)}else return 0})}}class Gi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.voronoi");l(this,"Outputs",[new E(!1,this,"Output"),new E(!1,this,"Cells"),new E(!1,this,"Bubbles")]);l(this,"Properties",[new P("Scale",10,1,100,0,"Transform","%"),new P("OffsetX",0,0,100,0,"Transform",""),new P("OffsetY",0,0,100,0,"Transform",""),new P("Angle",5,0,100,0,"Noise","")]);l(this,"IsRealtimeUpdate",!0);l(this,"DefaultOutput",0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value);this.Outputs[0].Value=T(([i])=>{const r=C(i.x,i.y).toVar(),c=C(s,n).toVar();r.addAssign(c);const u=dt({UV:r,angleOffset:a,cellDensity:t}).toVar();return nt(u.x,2)}),this.Outputs[1].Value=T(([i])=>{const r=C(i.x,i.y).toVar(),c=C(s,n).toVar();return r.addAssign(c),dt({UV:r,angleOffset:a,cellDensity:t}).toVar().y}),this.Outputs[2].Value=T(([i])=>{const r=C(i.x,i.y).toVar(),c=C(s,n).toVar();r.addAssign(c);const u=dt({UV:r,angleOffset:a,cellDensity:t}).toVar();return Us(nt(u.x,2))})}}class Xi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.transform");l(this,"Inputs",[new E(!0,this,"Input")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Properties",[new P("Scale X",1,0,100,0,"Scale",""),new P("Scale Y",1,0,100,0,"Scale",""),new P("Position X",0,-100,100,0,"Position",""),new P("Position Y",0,-100,100,0,"Position",""),new P("Midpoint X",.5,0,1,0,"Rotation",""),new P("Midpoint Y",.5,0,1,0,"Rotation",""),new P("Angle",0,-360,360,0,"Rotation","")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value),i=N(this.Properties[4].Value),r=N(this.Properties[5].Value),c=N(this.Properties[6].Value);this.Outputs[0].Value=T(([u])=>{var x;const f=C(u.x,u.y).toVar(),_=C(t,s).toVar(),h=C(n,a).toVar(),d=C(i,r).toVar(),m=c.mul(Zt.div(180)).toVar(),y=C(st(m).mul(f.x.sub(d.x)).add(_e(m).mul(f.y.sub(d.y))).add(d.x),st(m).mul(f.y.sub(d.y)).sub(_e(m).mul(f.x.sub(d.x))).add(d.y));return f.assign(y),f.addAssign(h),f.mulAssign(_),(x=this.Inputs[0].Links[0].In)==null?void 0:x.Value(f).toVar()})}}class Ui extends Q{constructor(){super(...arguments);l(this,"Inputs",[new E(!0,this,"Input")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Name","nodes.tile");l(this,"Properties",[new P("Tile Count",1,0,100,1),new P("Angle Threshold",0,0,360,0)]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value),s=N(this.Properties[1].Value);this.Outputs[0].Value=T(([n])=>{var u;var a=C(n).toVar(),i=s.mul(Zt.div(180));const r=Ii(a,t,i).toVar();return(u=this.Inputs[0].Links[0].In)==null?void 0:u.Value(r).toVar()})}}class Yi extends Q{constructor(){super(...arguments);l(this,"Inputs",[new E(!0,this,"Input")]);l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Name","nodes.height");l(this,"IsRealtimeUpdate",!0);l(this,"Properties",[new P("Height",1,0,100,0,"","%")])}async Calculate(){this.BaseCalculate();const t=N(this.Properties[0].Value);this.Outputs[0].Value=T(([s])=>{var i;if(!this.Inputs[0].IsConnected)return g(0);var n=C(s).toVar();return((i=this.Inputs[0].Links[0].In)==null?void 0:i.Value(n).toVar()).mul(t.mul(.01))})}}class Fi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.distortion");l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Inputs",[new E(!0,this,"Input")]);l(this,"Properties",[new P("Distortion",0,0,100,0,"Distortion",""),new P("Octaves",10,0,100,1,"Distortion",""),new P("Scale",10,0,100,0,"Distortion",""),new P("Offset X",0,-100,100,0,"Distortion",""),new P("Offset Y",0,-100,100,0,"Distortion","")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();var t=N(this.Properties[0].Value),s=N(this.Properties[1].Value),n=N(this.Properties[2].Value),a=N(this.Properties[3].Value),i=N(this.Properties[4].Value);this.Outputs[0].Value=T(([r])=>{var c;if(this.Inputs[0].IsConnected){const u=(c=this.Inputs[0].Links[0].In)==null?void 0:c.Value,f=C(r.x,r.y).toVar(),_=C(lt(f.mul(2).mul(.5),s,C(a,i),n)).mul(t).mul(.2);return u(f.add(_)).toVar()}else return 0})}}class zi extends Q{constructor(){super(...arguments);l(this,"Name","nodes.dune");l(this,"Outputs",[new E(!1,this,"Result")]);l(this,"Inputs",[]);l(this,"Properties",[new P("Scale",0,0,0,0,"Tramsform","%"),new P("Height",0,0,0,0,"Tramsform","%"),new P("Wind Direction",0,0,0,0,"Tramsform","%"),new P("Octaves",0,0,0,0,"Noise","%"),new P("Sand Roughness",0,0,0,0,"Noise","%"),new P("Seed",0,0,0,0,"Random","%"),new P("Time",0,0,0,0,"Random","%")]);l(this,"IsRealtimeUpdate",!0)}async Calculate(){this.BaseCalculate();const t=N(this.Properties[6].Value),s=N(this.Properties[5].Value),n=N(this.Properties[0].Value),a=N(this.Properties[1].Value),i=N(this.Properties[4].Value),r=N(this.Properties[2].Value);N(this.Properties[3].Value);const c=T(([d])=>{const m=d.toVar();return m.assign(C(Ne(m,C(127.1,311.7)),Ne(m,C(269.5,183.3)))),g(-1).add(oe(2,xe(_e(m.x.add(m.y)).mul(g(43758.5453123)))))}),u=T(([d])=>{const m=$e(d),y=xe(d),p=y.mul(y).mul(K(3,oe(2,y))),x=c(m),S=c(m.add(C(1,0))),D=c(m.add(C(0,1))),Y=c(m.add(C(1,1)));return U(U(x,S,p.x),U(D,Y,p.x),p.y)}),f=T(([d,m,y])=>{const p=g(0),x=g(1),S=g(1),D=g(0);return Ut(m,({i:Y})=>{p.addAssign(x.mul(u(d.mul(S).add(s)))),D.addAssign(x),x.mulAssign(y),S.mulAssign(2)}),p.div(D)}),_=T(([d,m])=>K(1,Ee(_e(d.mul(3.14159).mul(m))))),h=T(([d,m])=>{const y=C(st(m),_e(m)),p=f(d.mul(n).add(y.mul(.5)),4,.5);C(y.y.negate(),y.x);const x=_e(d.x.mul(n).mul(.3).add(u(d.mul(2)).mul(2))).mul(_e(d.y.mul(n).mul(.2))).mul(.3),S=p.mul(.7).add(x.mul(.3));S.assign(U(S,_(S,1.5),.4));const D=f(d.mul(n).mul(4),2,.3).mul(i);return S.add(D.mul(.1))});this.Outputs[0].Value=T(([d])=>{const m=d,y=C(t.mul(.01),0),p=h(m.mul(C(2,1)).add(y),r);return p.assign(p.mul(.5).add(.5).mul(a)),p})}}function Hi(){j.registerStr("nodes.buffer","",Me),j.registerStr("nodes.fake","",Oi),j.registerStr("nodes.constant","nodeCategories.testNodes",xi),j.registerStr("nodes.perlinNoise","nodeCategories.testNodes",mn),j.registerStr("nodes.mountain","nodeCategories.testNodes",Bi),j.registerStr("nodes.terrace","nodeCategories.testNodes",Ei),j.registerStr("nodes.combine","nodeCategories.testNodes",et),j.registerStr("nodes.clamp","nodeCategories.testNodes",Si),j.registerStr("nodes.invert","nodeCategories.testNodes",Di),j.registerStr("nodes.redistribution","nodeCategories.testNodes",Ai),j.registerStr("nodes.gradientNoise","nodeCategories.testNodes",Ti),j.registerStr("nodes.voronoi","nodeCategories.testNodes",Gi),j.registerStr("nodes.crater","nodeCategories.testNodes",Mi),j.registerStr("nodes.falloff","nodeCategories.testNodes",$i),j.registerStr("nodes.fastErosion","nodeCategories.testNodes",Li),j.registerStr("nodes.cracks","nodeCategories.testNodes",Ci),j.registerStr("nodes.transform","nodeCategories.testNodes",Xi),j.registerStr("nodes.tile","nodeCategories.testNodes",Ui),j.registerStr("nodes.height","nodeCategories.testNodes",Yi),j.registerStr("nodes.distortion","nodeCategories.testNodes",Fi),j.registerStr("nodes.dune","nodeCategories.testNodes",zi),j.registerStr("nodes.export","nodeCategories.testNodes",Ae)}const Wi={en:{"":"",logo:"Mashuk",windows:{thirdPreview:"3D Preview",secondPreview:"2D Preview",properties:"Node properties",graph:"Graph",nodesList:"Nodes list"},tt:{undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",delete:"Delete node/selected",fullscreen:"Fullscreen",save:"Save project",cancel:"Cancel",load:"Load project",presets:"Presets",resetView:"Reset view",resetParams:"Reset node parameters to default",lockPreview:"Lock Preview",unlockPreview:"Unlock Preview",mesh_resolution:"Resolution",new:"New project",settings:"Project settings",menu:"Menu",resolutionWarning:"Warning! Selecting a high resolution will increase video memory consumption and processing speed.",build:"Build project",buildSettings:"Build settings",clickForEdit:"Click for edit",saveSettings:"Save settings"},hints:{graphLmb:"LMB: Select/Drag node",graphWheel:"Wheel: Zoom/Drag work space",placeHere:"PLACE HERE",initializingMesh:"Initializing Mesh..."},nodes:{constant:"Constant",perlinNoise:"Perlin Noise",mountain:"Mountain",terrace:"Terrace",combine:"Combine",clamp:"Clamp",invert:"Invert",redistribution:"Redistribution",gradientNoise:"Gradient Noise",voronoi:"Voronoi",crater:"Crater",falloff:"Falloff",fastErosion:"Fast Erosion",cracks:"Cracks",transform:"Transform",tile:"Tile",height:"Height",distortion:"Distortion",dune:"Dunes",export:"Export"},buildModal:{resolution:"Resolution",tiles:"Tiles",terrain:"Terrain",build:"Build",nodes:"Nodes"},nodeCategories:{testNodes:"Test nodes",colorNodes:"Color nodes"}},ru:{logo:"Машук",windows:{thirdPreview:"3D Просмотр",secondPreview:"2D Просмотр",properties:"Параметры узла",graph:"Граф",nodesList:"Список узлов"},tt:{undo:"Отменить",redo:"Повторить",copy:"Копировать",paste:"Вставить",delete:"Удалить узел/выделенные",fullscreen:"На весь экран",save:"Сохранить проект",cancel:"Отменить",load:"Загрузить проект",presets:"Предустановки",resetView:"Сбросить вид",resetParams:"Сбросить параметры узла до значений по умолчанию",lockPreview:"Закрепить отображение",unlockPreview:"Открепить отображение",mesh_resolution:"Разрешение",new:"Новый проект",settings:"Настройки проекта",menu:"Меню",resolutionWarning:"Внимание! Выбор высокого разрешения влечет за собой увеличение потребления видеопамяти и скорости обработки",build:"Собрать проект",buildSettings:"Настройка сборки",clickForEdit:"Нажмите что-бы отредактировать",saveSettings:"Сохранить настройки"},hints:{graphLmb:"ЛКМ: Выделить/Передвинуть узел",graphWheel:"Колесо мыши: Приближение/Перемещение рабочей области",placeHere:"РАЗМЕСТИТЕ ЗЕСЬ",initializingMesh:"Инициализация Меша..."},nodes:{constant:"Константа",perlinNoise:"Шум Перлина",mountain:"Гора",terrace:"Террасы",combine:"Комбинирование",clamp:"Ограничение",invert:"Инверсия",redistribution:"Перераспределение",gradientNoise:"Градиентный Шум",voronoi:"Шум Вороного",crater:"Кратер",falloff:"Спад",fastErosion:"Быстрая Эрозия",cracks:"Трещины",transform:"Преобразование",tile:"Плитка",height:"Высота",distortion:"Искажения",dune:"Дюны",export:"Экспорт"},buildModal:{resolution:"Разрешение",tiles:"Тайлы",terrain:"Ландшафт",build:"Сборка",nodes:"Узлы"},nodeCategories:{testNodes:"Тестовые узлы",colorNodes:"Красящие узлы"}}};St.options.themes.tooltip.delay.show=0;St.options.distance=10;vs.add(Ys,ms);const qi=gs({legacy:!1,locale:"en",fallbackLocale:"en",messages:Wi}),Pe=ws(Ks);Pe.component("font-awesome-icon",ys);Pe.component("font-awesome-layers",_s);Pe.component("font-awesome-layers-text",bs);Pe.use(Vs());Pe.use(Vi);Pe.use(St);Pe.use(qi);Pe.use(Ss);Pe.mount("#app");Hi();
