var jt=Object.defineProperty;var Jt=(o,e,t)=>e in o?jt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var r=(o,e,t)=>Jt(o,typeof e!="symbol"?e+"":e,t);import{d as T,g as vt,c as ye,r as Q,a as H,b as g,o as f,u as J,R as Qt,e as _,f as p,_ as X,v as gt,h as wt,i as O,j as at,k as _e,w as ie,l as E,m as R,t as k,n as ee,p as de,F as q,q as pe,s as N,x as we,y as Ne,z as Pt,T as es,A as ts,B as $t,C as It,D as Ue,E as Vt,G as Dt,H as Ct,I as ss,J as os,K as yt,L as ns,M as is,N as as,O as rs,P as ls,Q as us,V as ds}from"./vendor-D6AU9-WO.js";import{w as Rt,F as M,i as ne,f as d,v as w,L as Tt,a as rt,b as xe,d as Xe,m as A,n as At,c as ze,s as Be,u as y,e as st,g as ht,h as Y,j as Xt,k as te,p as cs,l as He,o as hs,q as Fe,r as Z,t as Bt,M as Gt,D as St,P as Yt,x as _t,y as fs,z as ps,A as Ke,B as Se,S as ms,C as vs,E as gs,G as Pe,H as Ee,I as je,J as ws,K as Vs,W as ys,N as Ss,O as _s,Q as bs,R as Ps,T as Is,U as Nt,V as Cs,X as Je,Y as Ns,Z as ge,_ as tt,$ as xs,a0 as Re,a1 as Ms,a2 as ue,a3 as ks,a4 as ft,a5 as Et,a6 as ot,a7 as Te,a8 as Qe,a9 as Ae,aa as xt,ab as dt,ac as Os,ad as Ht}from"./three-CJGEr-Sp.js";import{i as Ls}from"./icons-CNPGi31y.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const $s={key:1,class:"gpu-error-box disable-user-select"},Ds={class:"gpu-error-message-box"},Rs={style:{"font-size":"100px","text-align":"center",color:"var(--vt-c-red)"}},Ts=T({__name:"App",setup(o){const e=vt(),t=localStorage.getItem("userLang");t&&e!=null&&(e.appContext.config.globalProperties.$i18n.locale=t);const s=ye(()=>navigator.gpu);return(n,i)=>{const a=Q("font-awesome-icon");return s.value?(f(),H(J(Qt),{key:0})):(f(),g("div",$s,[_("div",Ds,[_("div",Rs,[p(a,{icon:["fas","circle-xmark"]})]),i[0]||(i[0]=_("h1",null,"WebGPU is not supported on this browser.",-1))])]))}}}),As=X(Ts,[["__scopeId","data-v-286205d8"]]);class Ut{constructor(){r(this,"Id",gt());r(this,"In",null);r(this,"Out",null);r(this,"IsSelected",!1)}SetSelected(e){var s,n,i;var t=this.In!=null?(s=this.In.ParentNode)==null?void 0:s.ParentGraph:(i=(n=this.Out)==null?void 0:n.ParentNode)==null?void 0:i.ParentGraph;t!=null&&e==!0&&t.DeselectAll(),this.IsSelected=e}DeleteLinkFromTerminals(){var s,n;var e=(s=this.In)==null?void 0:s.Links.indexOf(this);e!=null&&this.In!=null&&this.In.Links.splice(e,1);var t=(n=this.Out)==null?void 0:n.Links.indexOf(this);t!=null&&this.Out!=null&&this.Out.Links.splice(t,1)}}class C{constructor(e,t){r(this,"X",0);r(this,"Y",0);this.X=e,this.Y=t}get Length(){return Math.sqrt(this.X*this.X+this.Y*this.Y)}get Normalized(){return C.Div(this,this.Length)}Reset(){this.X=0,this.Y=0}static Add(e,t){return t instanceof C?new C(e.X+t.X,e.Y+t.Y):typeof t=="number"?new C(e.X+t,e.Y+t):e}static Sub(e,t){return t instanceof C?new C(e.X-t.X,e.Y-t.Y):typeof t=="number"?new C(e.X-t,e.Y-t):e}static Mul(e,t){return t instanceof C?new C(e.X*t.X,e.Y*t.Y):typeof t=="number"?new C(e.X*t,e.Y*t):e}static Div(e,t){return t instanceof C?new C(e.X/t.X,e.Y/t.Y):typeof t=="number"?new C(e.X/t,e.Y/t):e}}var Wt=(o=>(o[o.none=0]="none",o[o.Buffer=1]="Buffer",o[o.Primitives=2]="Primitives",o[o.GeoPrimitives=3]="GeoPrimitives",o[o.Warps=4]="Warps",o[o.Adjastments=5]="Adjastments",o[o.Profile=6]="Profile",o[o.Filters=7]="Filters",o[o.Erosion=8]="Erosion",o[o.Snow=9]="Snow",o[o.Water=10]="Water",o[o.Data=11]="Data",o[o.Color=12]="Color",o[o.Render=13]="Render",o[o.Output=14]="Output",o))(Wt||{}),Ce=(o=>(o[o.NotCalculated=0]="NotCalculated",o[o.Calculation=1]="Calculation",o[o.Calculated=2]="Calculated",o))(Ce||{});class b{constructor(e,t,s,n=0,i=0,a="",l=""){r(this,"Name","");r(this,"Description","");r(this,"Value");r(this,"Min",-10);r(this,"Max",10);r(this,"Suffix");r(this,"Category");r(this,"Step");r(this,"valueList");r(this,"Default");this.Name=e,this.Value=t,this.Default=t,this.Min=typeof s=="number"?s:0,this.Max=n,this.Suffix=l,this.Category=a,this.Step=i,this.valueList=s instanceof Array?s:void 0}Reset(){this.Value=this.Default}}class K{constructor(){r(this,"Id",gt());r(this,"Position",new C(0,0));r(this,"LastPosition",new C(0,0));r(this,"Name","");r(this,"Category",Wt.none);r(this,"Properties");r(this,"Inputs",[]);r(this,"Outputs",[]);r(this,"IsSelected",!1);r(this,"Height",0);r(this,"Width",0);r(this,"IsCalculated",!1);r(this,"ParentGraph",null);r(this,"CalculationState",Ce.NotCalculated);r(this,"IsRealtimeUpdate",!1);r(this,"DefaultOutput",0)}Move(e,t){this.Position=new C(e,t)}SetSize(e,t){this.Height=e,this.Width=t}SetSelected(e){this.IsSelected=e;const t=fe();e?t.SelectedNode=this:t.SelectedNode==this&&(t.SelectedNode=null)}SetLastPosition(e,t){this.LastPosition.X=e,this.LastPosition.Y=t}BaseCalculate(){this.Outputs.forEach(e=>{e.Links.forEach(t=>{var s,n;(n=(s=t==null?void 0:t.Out)==null?void 0:s.ParentNode)==null||n.SetNotCalculated()})}),this.Inputs.forEach(e=>{var t,s,n,i;e.IsConnected&&((s=(t=e.Links[0].In)==null?void 0:t.ParentNode)==null||s.Calculate(),(i=(n=e.Links[0].In)==null?void 0:n.ParentNode)==null||i.SetCalculated())})}SetNotCalculated(){this.CalculationState=Ce.NotCalculated,this.Outputs.forEach(e=>{e.Links.forEach(t=>{var s,n;(n=(s=t==null?void 0:t.Out)==null?void 0:s.ParentNode)==null||n.SetNotCalculated()})})}SetCalculated(){this.CalculationState=Ce.Calculated}Calculate(){}}class L{constructor(e,t,s){r(this,"Guid",gt());r(this,"Links",new Array);r(this,"IsInput",!1);r(this,"ParentNode",null);r(this,"Position",new C(0,0));r(this,"OffsetPosition",new C(0,0));r(this,"Value",null);r(this,"Name","");this.ParentNode=t,this.IsInput=e,this.Name=s}get IsConnected(){return this.Links.length>0}SetOffset(e,t){this.OffsetPosition=new C(e,t)}SetPosition(e,t){this.Position=new C(e,t)}}const nt=wt("drag",()=>{const o=O(!1),e=O(),t=O(),s=O();function n(a){s.value=a}function i(){return s.value}return{setNode:n,getNode:i,SourceTerminal:e,DestinationTerminal:t,IsDragging:o}}),fe=wt("nodes",()=>{const o=O(),e=O();return{SelectedNode:o,LockedNode:e}}),ce=wt("renderer",()=>{const o=O(!1),e=O(),t=i=>{e.value=i},s=()=>e.value,n=O();return{ChangeEvent:o,Resolution:n,SetRenderer:t,GetRenderer:s}}),Xs=T({__name:"HeapMonitor",setup(o){const e=O(0),t=O(0),s=()=>{setInterval(n,1e3)};at(()=>{s()});const n=()=>{performance&&performance.memory&&(e.value=performance.memory.usedJSHeapSize/1024/1024/1024,t.value=performance.memory.jsHeapSizeLimit/1024/1024/1024)};return(i,a)=>{const l=Q("font-awesome-icon"),c=_e("tooltip");return f(),g("div",{onContextmenu:a[0]||(a[0]=ie(()=>{},["prevent"])),class:"memory-usage"},[E((f(),g("span",null,[p(l,{icon:["fas","memory"]}),R(" "+k(e.value.toFixed(2))+" / "+k(t.value.toFixed(2))+" ",1),a[1]||(a[1]=_("span",null," GB",-1))])),[[c,"Heap memory usage",void 0,{up:!0}]])],32)}}}),Bs=X(Xs,[["__scopeId","data-v-72365581"]]),Gs={class:"status-bar-grid disable-user-select"},Ys={class:"working-status"},Es=T({__name:"StatusBar",setup(o){ce();const e=O(0);return ye(()=>e.value),(t,s)=>{const n=Q("font-awesome-icon");return f(),g("div",Gs,[_("div",Ys,[p(n,{icon:["fas","bars-progress"]}),s[0]||(s[0]=R(" Idle "))]),_("div",null,[p(Bs)])])}}}),Hs=X(Es,[["__scopeId","data-v-ddd0f7cf"]]),Us={class:"collapse"},Ws={class:"carete"},zs={key:0,class:"collapse-body"},Fs=T({__name:"Collapse",setup(o){var e=O(!1);const t=()=>{e.value=!e.value};return(s,n)=>{const i=Q("font-awesome-icon");return f(),g("div",Us,[_("div",{onClick:t,class:"header"},[_("div",Ws,[J(e)?(f(),H(i,{key:0,icon:["fas","angle-right"]})):(f(),H(i,{key:1,icon:["fas","angle-down"]}))]),de(s.$slots,"header",{},void 0,!0)]),J(e)?ee("",!0):(f(),g("div",zs,[de(s.$slots,"default",{},void 0,!0)]))])}}}),zt=X(Fs,[["__scopeId","data-v-ed8ad461"]]),et=M(([o])=>{const e=w(o).toVar();e.assign(e.modInt(d(289)));const t=d(d(34).mul(e.x).add(1).mul(e.x).modInt(289).add(e.y)).toVar();return t.assign(d(34).mul(t).add(d(1)).mul(t).modInt(289)),t.assign(xe(t.div(d(41))).mul(d(2)).sub(1)),At(w(t.sub(rt(t.add(.5))),ze(t).sub(.5)))}).setLayout({name:"gradientNoiseDir",type:"vec2",inputs:[{name:"p",type:"vec2"}]}),Zs=M(([o])=>{const e=w(o).toVar(),t=w(rt(e)).toVar(),s=w(xe(e)).toVar(),n=d(Xe(et(t),s)).toVar(),i=d(Xe(et(t.add(w(d(0),d(1)))),s.sub(w(d(0),d(1))))).toVar(),a=d(Xe(et(t.add(w(d(1),d(0)))),s.sub(w(d(1),d(0))))).toVar(),l=d(Xe(et(t.add(w(d(1),d(1)))),s.sub(w(d(1),d(1))))).toVar();return s.assign(s.mul(s).mul(s).mul(s.mul(s.mul(d(6)).sub(d(15))).add(d(10)))),A(A(n,i,s.y),A(a,l,s.y),s.x)}).setLayout({name:"gradientNoise",type:"float",inputs:[{name:"p",type:"vec2"}]}),Ft=M(([o])=>Zs(o).add(.5)),lt=M(([o,e,t,s])=>{const n=ne(e).toVar(),i=d(s).toVar(),a=w(t.x,t.y).toVar(),l=w(o.x,o.y).sub(d(.5)).mul(i).toVar();l.addAssign(a);const c=d(0).toVar(),u=d(1).div(2).toVar();return Tt(n,({i:h})=>{const m=l.mul(d(2).pow(d(h))).toVar(),v=Ft(m).mul(u).toVar();u.divAssign(2),c.addAssign(v)}),c}).setLayout({name:"perlinNoise",type:"float",inputs:[{name:"UV",type:"vec2"},{name:"octaves",type:"int"},{name:"offset",type:"vec2"},{name:"scale",type:"float"}]}),qs=Rt(`
fn cracks(uv: vec2<f32>, angle: f32, scale: f32, thickness: f32) -> f32  {
	let st: vec2<f32> = (uv - 0.5) * scale;
	let i_st: vec2<f32> = floor(st);
	let f_st: vec2<f32> = fract(st);
	var m1: f32 = 1.;
	var m2: f32 = 1.;

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let neighbor: vec2<f32> = vec2<f32>(x, y);
			var point: vec2<f32> = random2(i_st + neighbor);
			point = 0.5 + 0.5 * sin(angle + 6.2831 * point);
			let diff: vec2<f32> = neighbor + point - f_st;
			let dist: f32 = length(diff);
			let cond: f32 = step(dist, m1);
			m2 = mix(min(max(m1, dist), m2), m1, cond);
			m1 = mix(m1, dist, cond);
		}

	}

	let edge: f32 = smoothstep(0.01, thickness, m2 - m1);
	return edge;
} 

fn random2(p: vec2<f32>) -> vec2<f32> {
	return fract(sin(vec2<f32>(dot(p, vec2<f32>(127.1, 311.7)), dot(p, vec2<f32>(269.5, 183.3)))) * 43758.547);
} 
`),ct=Rt(`
fn voronoi(UV: vec2<f32>, angleOffset: f32, cellDensity: f32) -> vec2<f32> {
	let g: vec2<f32> = floor((UV - 0.5) * cellDensity);
	let f: vec2<f32> = fract((UV - 0.5) * cellDensity);
	var res: vec3<f32> = vec3<f32>(8., 0., 0.);

	for (var y: f32 = -1; y <= 1; y = y + 1) {

		for (var x: f32 = -1; x <= 1; x = x + 1) {
			let lattice: vec2<f32> = vec2<f32>(x, y);
			let offset: vec2<f32> = voronoiNoiseRandomVector(lattice + g, angleOffset);
			let d: f32 = distance(lattice + offset, f);
			res = mix(res, vec3<f32>(d, offset.x, offset.y), step(d, res.x));
		}

	}

	return vec2<f32>(res.x, res.y);
} 

fn voronoiNoiseRandomVector(UV: vec2<f32>, offset: f32) -> vec2<f32> {
	var UV_var = UV;
	let m: mat2x2<f32> = mat2x2<f32>(15.27, 47.63, 99.41, 89.98);
	UV_var = fract(sin(UV_var * m) * 46839.32);
	return vec2<f32>(sin(UV_var.y * offset) * 0.5 + 0.5, cos(UV_var.x * offset) * 0.5 + 0.5);
}
`);class Ks extends K{constructor(){super(...arguments);r(this,"Name","nodes.perlinNoise");r(this,"Outputs",[new L(!1,this,"Output")]);r(this,"Properties",[new b("Scale",10,0,100,0,"Transform","%"),new b("Octaves Count",10,1,50,1,"Noise",""),new b("Offset X",0,-100,100,0,"Transform",""),new b("Offset Y",0,-100,100,0,"Transform",""),new b("Warp Scale",0,0,1,.001,"Warp","%"),new b("Seed",0,0,99999,0,"Random",""),new b("Height",.4,0,1,0,"Noise","")]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0);r(this,"Random",M(([t])=>{const s=w(t).toVar();return xe(Be(Xe(s,w(12.9898,78.233))).mul(43758.5453))}))}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value);y(this.Properties[4].Value);const a=y(this.Properties[5].Value),l=y(this.Properties[6].Value);this.Outputs[0].Value=M(([c])=>{const u=w(c.x,c.y).toVar();return u.addAssign(this.Random(w(a).mul(a))),lt(u,s,w(n,i),t).mul(l)})}}const js=T({__name:"DraggableNode",props:{GraphNode:{type:Function,required:!0}},setup(o){const e=nt(),t=o,s=O(),n=u=>{var m;if((m=u.dataTransfer)==null||m.setData("string","1"),t.GraphNode!=null&&t.GraphNode!=null){var h=t.GraphNode;e.setNode(new h)}};var i=void 0;const a=u=>{var v;i=(v=s.value)==null?void 0:v.cloneNode(!0);var h=i.getBoundingClientRect();if(i.style.position="fixed",i.style.left=`${u.touches[0].pageX-h.width/2}px`,i.style.top=`${u.touches[0].pageY-h.height/2}px`,i.style.zIndex="1000",document.body.appendChild(i),t.GraphNode!=null&&t.GraphNode!=null){var m=t.GraphNode;e.setNode(new m)}},l=u=>{if(i!=null){var h=i.getBoundingClientRect();i.style.left=`${u.touches[0].pageX-h.width/2}px`,i.style.top=`${u.touches[0].pageY-h.height/2}px`}},c=u=>{if(i!=null){document.body.removeChild(i),i=void 0,u.preventDefault(),u.stopPropagation();var h=u.changedTouches[0],m=document.elementFromPoint(h.clientX,h.clientY);console.log(m)}};return window.addEventListener("touchmove",l),window.addEventListener("touchend",c),(u,h)=>(f(),g("div",{onTouchstart:a,onDragstart:n,draggable:"true",class:"node",ref_key:"selfEl",ref:s},[de(u.$slots,"default",{},void 0,!0)],544))}}),Js=X(js,[["__scopeId","data-v-ee47cd3c"]]);class W{static register(e){var t=new e;this.classMap.set(t.constructor.name,e)}static registerStr(e,t,s){this.classMap.set(e,s),this.groupsMap.has(t)||this.groupsMap.set(t,new Map);var n=this.groupsMap.get(t);n==null||n.set(e,s)}static create(e,...t){const s=this.classMap.get(e);if(!s)throw new Error(`Class ${e} not registered`);return new s(...t)}static getGroups(){return this.groupsMap}}r(W,"classMap",new Map),r(W,"groupsMap",new Map);const Qs={class:"node-list"},eo=T({__name:"NodeList",setup(o){var e=W.getGroups();return(t,s)=>{const n=Q("font-awesome-icon");return f(),g("div",Qs,[(f(!0),g(q,null,pe(J(e),([i,a])=>(f(),g(q,null,[i!=""?(f(),H(zt,{key:0},{header:N(()=>[R(k(t.$t(i)),1)]),default:N(()=>[(f(!0),g(q,null,pe(a,([l,c])=>(f(),H(Js,{"-graph-node":c},{default:N(()=>[p(n,{icon:["fas","circle-nodes"]}),R(" "+k(t.$t(l)),1)]),_:2},1032,["-graph-node"]))),256))]),_:2},1024)):ee("",!0)],64))),256))])}}}),to=X(eo,[["__scopeId","data-v-ff1a0b3e"]]),so={class:"padding"},oo={class:"header disable-user-select"},no={class:"body disable-user-select"},io=T({__name:"FrameTab",props:{wheelFocus:{type:Boolean,default:!0}},setup(o){const e=o,t=O(),s=n=>{t.value&&e.wheelFocus&&t.value.focus()};return(n,i)=>(f(),g("div",so,[_("div",{class:"main",tabindex:"0",ref_key:"selfEl",ref:t,onWheel:s},[_("div",oo,[de(n.$slots,"header",{},void 0,!0)]),_("div",no,[de(n.$slots,"default",{},void 0,!0)])],544)]))}}),it=X(io,[["__scopeId","data-v-1982f366"]]);class Mt{static pathExists(e,t){if(e===t)return!0;const s=new Set;return this.dfs(e,t,s)}static dfs(e,t,s){if(e===t)return!0;if(s.has(e))return!1;s.add(e);for(const n of e.Outputs)for(const i of n.Links)if(i.Out!=null&&i.Out!=null){const a=i.Out.ParentNode;if(this.dfs(a,t,s))return!0}return!1}}const ao=T({__name:"TerminalRenderer",props:{Term:{type:L,required:!0}},setup(o,{expose:e}){const t=nt(),s=o,n=h=>{t.SourceTerminal=s.Term,t.IsDragging=!0,window.addEventListener("mouseup",i)},i=h=>{var S,V,P;window.removeEventListener("mouseup",i),t.IsDragging=!1;var m=t.DestinationTerminal,v=t.SourceTerminal;if(m!=null&&m!=v&&!(v!=null&&v.IsInput&&m.IsInput)&&(v==null?void 0:v.ParentNode)!=m.ParentNode){if(v!=null&&v.IsInput){if(Mt.pathExists(v==null?void 0:v.ParentNode,m.ParentNode))return;v.Links.forEach(x=>{var B,se;(se=(B=v==null?void 0:v.ParentNode)==null?void 0:B.ParentGraph)==null||se.DeleteLink(x)})}if(m.IsInput){if(Mt.pathExists(m==null?void 0:m.ParentNode,v==null?void 0:v.ParentNode))return;m.Links.forEach(x=>{var B,se;(se=(B=m==null?void 0:m.ParentNode)==null?void 0:B.ParentGraph)==null||se.DeleteLink(x)})}(V=(S=s.Term.ParentNode)==null?void 0:S.ParentGraph)==null||V.AddLink(m,v);var I=ce();(P=s.Term.ParentNode)!=null&&P.IsRealtimeUpdate&&(I.ChangeEvent=!I.ChangeEvent)}},a=h=>{t.IsDragging&&(t.DestinationTerminal=s.Term)},l=h=>{t.IsDragging&&(t.DestinationTerminal=null)},c=O();at(()=>{we(()=>{u()})});const u=()=>{var v,I,S,V;var h=((v=c.value)==null?void 0:v.offsetLeft)+((I=c.value)==null?void 0:I.offsetWidth)/2+2,m=((S=c.value)==null?void 0:S.offsetTop)+((V=c.value)==null?void 0:V.offsetHeight)/2+2;s.Term.SetOffset(h,m)};return e({SetOffset:u}),(h,m)=>{const v=_e("tooltip");return E((f(),g("div",{class:Ne(["node-terminal",{connected:s.Term.IsConnected},"disable-user-select"]),onMousedown:[m[0]||(m[0]=ie(()=>{},["right","stop"])),ie(n,["left"])],onMouseover:a,onMouseleave:l,ref_key:"selfEl",ref:c},null,34)),[[v,{content:s.Term.Name,placement:s.Term.IsInput?"left":"right"}]])}}}),kt=X(ao,[["__scopeId","data-v-278bc81c"]]);class Ie extends K{constructor(){super(...arguments);r(this,"Name","nodes.buffer");r(this,"Inputs",[new L(!0,this,"")]);r(this,"Outputs",[new L(!1,this,"")])}Calculate(){this.BaseCalculate();var t=this.Inputs[0].Links[0].In,s=this.Outputs[0];s.Value=t==null?void 0:t.Value}}const ro={},lo={class:"loader"};function uo(o,e){return f(),g("span",lo)}const Zt=X(ro,[["render",uo],["__scopeId","data-v-8c5c5c6f"]]);class qt{constructor(){r(this,"IsSubGraph",!1);r(this,"Nodes",new Array);r(this,"Links",new Array)}get HasSelected(){return this.Nodes.some(e=>e.IsSelected)||this.Links.some(e=>e.IsSelected)}AddNode(e,t=!0){var s=this.Nodes.indexOf(e);s==-1&&(e.ParentGraph=this,this.Nodes.push(e),t&&le.PushState(this))}DeleteLink(e,t=!0){var s=this.Links.indexOf(e);s!=-1&&(e.DeleteLinkFromTerminals(),this.Links.splice(s,1),t&&le.PushState(this))}AddLink(e,t,s=!0){if(!(e.IsInput&&t.IsInput||!e.IsInput&&!t.IsInput)){var n=new Ut;e.IsInput?(n.In=t,n.Out=e):(n.In=e,n.Out=t),t.Links.push(n),e.Links.push(n),this.Links.push(n),s&&le.PushState(this)}}DeleteNode(e,t=!0){if(e!=null){var s=fe();s.SelectedNode==e&&(s.SelectedNode=null),s.LockedNode==e&&(s.LockedNode=null),e.Inputs.forEach(i=>{var a=i.Links.map(l=>l);a.forEach(l=>{this.DeleteLink(l)})}),e.Outputs.forEach(i=>{var a=i.Links.map(l=>l);a.forEach(l=>{this.DeleteLink(l)})});var n=this.Nodes.indexOf(e);n!=-1&&this.Nodes.splice(n,1),t&&le.PushState(this)}}DeleteSelected(e=!0){this.Nodes.filter(s=>s.IsSelected).forEach(s=>this.DeleteNode(s,!1));var t=fe();t.SelectedNode=void 0,this.Links.filter(s=>s.IsSelected).forEach(s=>this.DeleteLink(s,!1)),e&&le.PushState(this)}DeselectAll(){var e=fe();e.SelectedNode=void 0,this.Nodes.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1)),this.Links.filter(t=>t.IsSelected).forEach(t=>t.SetSelected(!1))}SelectAll(){this.Nodes.forEach(e=>e.SetSelected(!0))}}class We{static Serialize(e){var a,l,c,u,h,m,v,I;var t=new co;if(e.Nodes!=null&&e.Nodes.length>0)for(const S of e.Nodes){var s=new ho;if(s.NodeType=S.Name,s.NodeGuid=S.Id,s.NodePostition=S.Position,S.Properties!=null&&S.Properties.length>0)for(const V of S.Properties){var n=new fo;n.Value=V.Value,s.Properties==null&&(s.Properties=new Array),s.Properties.push(n)}t.Nodes==null&&(t.Nodes=new Array),t.Nodes.push(s)}if(e.Links!=null&&e.Links.length>0)for(const S of e.Links){var i=new po;i.FromNodeGuid=(l=(a=S.In)==null?void 0:a.ParentNode)==null?void 0:l.Id,i.ToNodeGuid=(u=(c=S.Out)==null?void 0:c.ParentNode)==null?void 0:u.Id,i.FromTerminalIndex=(m=(h=S.In)==null?void 0:h.ParentNode)==null?void 0:m.Outputs.indexOf(S.In),i.ToTerminalIndex=(I=(v=S.Out)==null?void 0:v.ParentNode)==null?void 0:I.Inputs.indexOf(S.Out),t.Links==null&&(t.Links=new Array),t.Links.push(i)}return t}static Deserialize(e){var t=new qt;if(e.Nodes!=null&&e.Nodes.length>0)for(var s of e.Nodes){var n=W.create(s.NodeType);if(n.Id=s.NodeGuid,n.Move(s.NodePostition.X,s.NodePostition.Y),s.Properties!=null&&s.Properties.length>0)for(var i=0;i<s.Properties.length;i++)n.Properties[i].Value=s.Properties[i].Value;t.AddNode(n,!1)}if(e.Links!=null&&e.Links.length>0)for(var a of e.Links){var l=Pt(t.Nodes).firstOrDefault(u=>u.Id==a.FromNodeGuid),c=Pt(t.Nodes).firstOrDefault(u=>u.Id==a.ToNodeGuid);l==null||c==null||t.AddLink(l.Outputs[a.FromTerminalIndex],c.Inputs[a.ToTerminalIndex],!1)}return t}}class co{constructor(){r(this,"Nodes");r(this,"Links")}static ToJson(e){return JSON.stringify(e)}}class ho{constructor(){r(this,"NodeGuid");r(this,"NodeType");r(this,"NodePostition");r(this,"Properties")}}class fo{constructor(){r(this,"Value")}}class po{constructor(){r(this,"FromNodeGuid");r(this,"ToNodeGuid");r(this,"FromTerminalIndex");r(this,"ToTerminalIndex")}}class mo{constructor(e){r(this,"buffer");r(this,"capacity");r(this,"head",0);r(this,"tail",0);r(this,"size",0);r(this,"poppedItems",[]);if(e<=0)throw new Error("Capacity must be greater than 0");this.capacity=e,this.buffer=new Array(e)}get hasValues(){return this.size>0}get hasPoppedItems(){return this.poppedItems.length>0}push(e){this.poppedItems=[],this.size===this.capacity?(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.head=(this.head+1)%this.capacity):(this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++)}pop(){if(!this.hasValues)return;this.tail=(this.tail-1+this.capacity)%this.capacity;const e=this.buffer[this.tail];return this.size--,this.poppedItems.push(e),e}unpop(){if(!this.hasPoppedItems)return;const e=this.poppedItems.pop();return this.size===this.capacity&&(this.head=(this.head+1)%this.capacity),this.buffer[this.tail]=e,this.tail=(this.tail+1)%this.capacity,this.size++,e}toArray(){const e=[];for(let t=0;t<this.size;t++){const s=(this.head+t)%this.capacity;e.push(this.buffer[s])}return e}peek(){if(this.hasValues)return this.buffer[(this.tail-1+this.capacity)%this.capacity]}get length(){return this.size}}class le{static get HasValues(){return this.ActionHistoryBuffer.hasValues}static get HasPopped(){return this.ActionHistoryBuffer.hasPoppedItems}static PushState(e){this.ActionHistoryBuffer.push(We.Serialize(e))}static UnpopState(){if(this.ActionHistoryBuffer.hasPoppedItems){var e=this.ActionHistoryBuffer.unpop();return We.Deserialize(e)}return null}static PopState(){if(this.ActionHistoryBuffer.hasValues){var e=this.ActionHistoryBuffer.pop();return We.Deserialize(e)}return null}}r(le,"ActionHistoryBuffer",new mo(25));class pt{constructor(e,t,s,n){r(this,"X",0);r(this,"Y",0);r(this,"Height",0);r(this,"Width",0);this.X=e,this.Y=t,this.Height=s,this.Width=n}ContainsRect(e){return this.X<=e.X&&e.X+e.Width<=this.X+this.Width&&this.Y<=e.Y&&e.Y+e.Height<=this.Y+this.Height}ContainsPoint(e,t){return this.X<=e&&e<this.X+this.Width&&this.Y<=t&&t<this.Y+this.Height}IntersectsWith(e){return e.X<this.X+this.Width&&this.X<e.X+e.Width&&e.Y<this.Y+this.Height&&this.Y<e.Y+e.Height}static Intersects(e,t){return e.X<t.X+t.Width&&t.X<e.X+e.Width&&e.Y<t.Y+t.Height&&t.Y<e.Y+e.Height}}const vo=T({__name:"ContextMenu",props:{CloseOnAnyClick:{type:Boolean,default:!0},CloseOnMouseOut:{type:Boolean,default:!0}},emits:["lost-focus"],setup(o,{expose:e,emit:t}){const s=O(!1),n=O(),i=t,a=o,l=V=>{s.value=!0,we(()=>{n.value!=null&&n.value!=null&&(n.value.style.left=V.pageX+"px",n.value.style.top=V.pageY+"px",u(),window.addEventListener("mousedown",S))})},c=V=>{we(()=>{n.value!=null&&(n.value.style.width=V+"px")})},u=()=>{if(n.value!=null&&n.value!=null){const P=n.value.getBoundingClientRect();if(P.y+P.height>window.innerHeight){var V=P.y+P.height-window.innerHeight;n.value.style.top=P.y-V+"px"}if(P.y<0&&(n.value.style.top="0px"),P.x+P.width>window.innerWidth){var V=P.x+P.width-window.innerWidth;n.value.style.left=P.x-V+"px"}P.x<0&&(n.value.style.left="0px")}},h=V=>{s.value=!0,we(()=>{if(n.value!=null&&n.value!=null){var P=V.getBoundingClientRect();n.value.style.left=P.x+"px",n.value.style.top=P.y+P.height+"px",u(),window.addEventListener("mousedown",S)}})},m=V=>{s.value=!0,we(()=>{if(n.value!=null&&n.value!=null){var P=V.getBoundingClientRect(),x=n.value.getBoundingClientRect();n.value.style.left=P.x-x.width+"px",n.value.style.top=P.y+"px",u(),window.addEventListener("mousedown",S)}})},v=V=>{s.value=!0,we(()=>{if(n.value!=null&&n.value!=null){var P=V.getBoundingClientRect();n.value.style.left=P.x+P.width+"px",n.value.style.top=P.y+"px",u(),window.addEventListener("mousedown",S)}})},I=()=>{window.removeEventListener("mousedown",S),s.value=!1},S=V=>{if(a.CloseOnMouseOut&&n.value!=null){var P=n.value.getBoundingClientRect(),x=new pt(P.x,P.y,P.height,P.width);x.ContainsPoint(V.clientX,V.clientY)||(s.value=!1,window.removeEventListener("mousedown",S),i("lost-focus"))}};return e({Open:l,Close:I,OpenUnder:h,OpenLeft:m,OpenRight:v,SetWidth:c,isOpened:s}),(V,P)=>(f(),H(ts,{name:"open"},{default:N(()=>[(f(),H(es,{to:"body"},[s.value?(f(),g("div",{key:0,onContextmenu:P[0]||(P[0]=ie(()=>{},["prevent"])),onMousedown:P[1]||(P[1]=ie(()=>{},["stop"])),ref_key:"ContextMenu",ref:n,class:"context-menu disable-user-select"},[de(V.$slots,"default",{},void 0,!0)],544)):ee("",!0)]))]),_:3}))}}),ut=X(vo,[["__scopeId","data-v-bc41e1a3"]]),go=T({__name:"ContextMenuItem",props:{Active:{type:Boolean,default:!1}},setup(o){return(e,t)=>(f(),g("button",{class:Ne([["btn",{active:o.Active}],"btn"]),style:{padding:"5px"}},[de(e.$slots,"default",{},void 0,!0)],2))}}),ae=X(go,[["__scopeId","data-v-3e13e567"]]),wo={class:"node-container"},Vo={class:"node-terminals left"},yo={class:"node-center"},So={class:"node-name"},_o={class:"node-terminals right"},bo=T({props:{Offset:{type:C,required:!0},Zoom:{type:Number,required:!0},Node:{type:K,required:!0},AllNodes:{type:Array,default:new Array}},data(){return{LastMousePosition:new C(0,0),IsDragging:!1,ContextMenu:!1}},created:function(){window.addEventListener("mousemove",this.OnMouseMove),window.addEventListener("mouseup",this.OnMouseUp)},mounted:function(){this.$nextTick(()=>{var o=this.$el;this.Node.SetSize(o.offsetHeight,o.offsetWidth),this.Node.Move(this.Node.Position.X-this.Node.Width/2,this.Node.Position.Y-this.Node.Height/2);var e=new ResizeObserver(this.OnNodeResize);e.observe(this.$refs.node)})},computed:{PriviewLocked:function(){var o=fe();return o.LockedNode==this.Node},Top:function(){var o=this.Node.Position.Y;return o+"px"},Left:function(){var o=this.Node.Position.X;return o+"px"},Cursor:function(){return this.IsDragging?"grabbing":"default"},ZIndex:function(){return this.Node.IsSelected?"1":"0"},Blur:function(){return 4/this.Zoom+"px"},Border:function(){return this.Node.IsCalculated?"solid":"dashed"},IsNodeLocked:function(){var o=fe(),e=o.LockedNode;return e!=null&&e==this.Node}},methods:{OpenContextMenu(o){this.$refs.contextMenu.Open(o)},CloseContextMenu(){this.$refs.contextMenu.Close()},OnNodeResize:function(){if(this.$refs.terminals!=null){var o=this.$refs.terminals;o.forEach(e=>{e.SetOffset()})}},LockNode:function(){var o=fe(),e=ce();o.LockedNode==this.Node?o.LockedNode=null:(o.LockedNode=this.Node,this.Node.SetSelected(!0),e.ChangeEvent=!e.ChangeEvent)},Down:function(o,e,t){var n,i,a,l,c;if(this.IsDragging=!0,this.LastMousePosition.X=o,this.LastMousePosition.Y=e,t)this.Node.SetSelected(!((n=this.Node)!=null&&n.IsSelected));else{var s=(i=this.Node.ParentGraph)==null?void 0:i.Nodes.filter(u=>u.IsSelected);s.length>1?this.Node.IsSelected==!1&&((a=this.Node.ParentGraph)==null||a.DeselectAll(),this.Node.SetSelected(!0)):((l=this.Node.ParentGraph)==null||l.DeselectAll(),this.Node.SetSelected(!0))}(c=this.Node.ParentGraph)==null||c.Nodes.filter(u=>u.IsSelected).forEach(u=>{u.SetLastPosition(u.Position.X,u.Position.Y)}),le.PushState(this.Node.ParentGraph)},OnTouchDown:function(o){if(this.$refs.terminals!=null&&this.$refs.terminals.some(s=>s.$el==o.target||s==o.target))return;let e=o.touches[0].clientX,t=o.touches[0].clientY;this.Down(e,t,!1)},OnMouseDown:function(o){this.$refs.terminals!=null&&this.$refs.terminals.some(e=>e.$el==o.target||e==o.target)||this.Down(o.clientX,o.clientY,o.shiftKey)},OnMouseUp:function(o){this.IsDragging=!1},OnTouchUp:function(o){this.IsDragging=!1},OnTouchMove:function(o){let e=o.touches[0].clientX,t=o.touches[0].clientY;this.Move(e,t)},Move:function(o,e){var n;if(this.IsDragging){var t=(o-this.LastMousePosition.X)/this.Zoom,s=(e-this.LastMousePosition.Y)/this.Zoom;(n=this.Node.ParentGraph)==null||n.Nodes.filter(i=>i.IsSelected).forEach(i=>{i.Move(i.LastPosition.X+t,i.LastPosition.Y+s)})}},OnMouseMove:function(o){this.Move(o.clientX,o.clientY)}}}),Po=T({...bo,__name:"NodeRenderer",setup(o){return $t(e=>({"565ed938":e.Cursor,f3d0d29a:e.Top,"3cd77669":e.Left,"7b303a5a":e.ZIndex})),(e,t)=>{const s=Q("font-awesome-icon"),n=_e("tooltip");return f(),g("div",{class:Ne([{node:!(e.Node instanceof J(Ie))},{"node-buffer":e.Node instanceof J(Ie)},"disable-user-select",{"not-calculated":e.Node.CalculationState==J(Ce).NotCalculated&&!(e.Node instanceof J(Ie))},{selected:e.Node.IsSelected},{lockedPreview:e.PriviewLocked},{"node-without-inputs":e.Node.Inputs.length==0}]),ref:"node",onMousedown:[t[3]||(t[3]=ie((...i)=>e.OnMouseDown&&e.OnMouseDown(...i),["left"])),t[7]||(t[7]=ie((...i)=>e.OpenContextMenu&&e.OpenContextMenu(...i),["right"]))],onTouchmove:t[4]||(t[4]=(...i)=>e.OnTouchMove&&e.OnTouchMove(...i)),onTouchstart:t[5]||(t[5]=(...i)=>e.OnTouchDown&&e.OnTouchDown(...i)),onTouchend:t[6]||(t[6]=(...i)=>e.OnTouchUp&&e.OnTouchUp(...i))},[_("div",wo,[_("div",Vo,[(f(!0),g(q,null,pe(e.Node.Inputs,i=>(f(),H(kt,{ref_for:!0,ref:"terminals",key:i.Guid,Term:i},null,8,["Term"]))),128))]),_("div",yo,[e.Node instanceof J(Ie)?ee("",!0):(f(),g(q,{key:0},[E((f(),g("a",{class:"lock-icon",onClick:t[0]||(t[0]=i=>e.LockNode())},[e.IsNodeLocked?(f(),H(s,{key:0,icon:["fas","lock"]})):(f(),H(s,{key:1,icon:["fas","lock-open"]}))])),[[n,{content:e.$t("tt.lockPreview"),placement:"bottom"}]]),_("div",So,k(e.$t(e.Node.Name)),1),e.Node.CalculationState==J(Ce).Calculation?(f(),H(Zt,{key:0})):ee("",!0)],64))]),_("div",_o,[(f(!0),g(q,null,pe(e.Node.Outputs,i=>(f(),H(kt,{ref_for:!0,ref:"terminals",key:i.Guid,Term:i},null,8,["Term"]))),128))])]),p(ut,{ref:"contextMenu",CloseOnAnyClick:!0},{default:N(()=>[p(ae,null,{default:N(()=>[p(s,{icon:["far","copy"]}),R(" "+k(e.$t("tt.copy")),1)]),_:1}),p(ae,{onClick:t[1]||(t[1]=i=>{var a,l;(a=e.Node.ParentGraph)==null||a.DeleteNode(e.Node),(l=e.Node.ParentGraph)==null||l.DeleteSelected(),e.CloseContextMenu()}),style:{color:"var(--vt-c-red)"}},{default:N(()=>[p(s,{icon:["far","trash-can"]}),R(" "+k(e.$t("tt.delete")),1)]),_:1}),t[8]||(t[8]=_("hr",null,null,-1)),p(ae,{onClick:t[2]||(t[2]=i=>{e.LockNode(),e.CloseContextMenu()})},{default:N(()=>[e.IsNodeLocked?(f(),H(s,{key:0,icon:["fas","lock"]})):(f(),H(s,{key:1,icon:["fas","lock-open"]})),e.IsNodeLocked?(f(),g(q,{key:2},[R("  "+k(e.$t("tt.unlockPreview")),1)],64)):(f(),g(q,{key:3},[R("  "+k(e.$t("tt.lockPreview")),1)],64))]),_:1})]),_:1,__:[8]},512)],34)}}}),Ot=X(Po,[["__scopeId","data-v-1d778793"]]),Io={},Co={class:"canvas",xmlns:"http://www.w3.org/2000/svg"};function No(o,e){return f(),g("svg",Co,[de(o.$slots,"default",{},void 0,!0)])}const xo=X(Io,[["render",No],["__scopeId","data-v-81940268"]]),Mo=["points"],ko=T({computed:{Points(){var t,s,n,i,a,l;var o=C.Add((s=(t=this.Link.In)==null?void 0:t.ParentNode)==null?void 0:s.Position,(n=this.Link.In)==null?void 0:n.OffsetPosition),e=C.Add((a=(i=this.Link.Out)==null?void 0:i.ParentNode)==null?void 0:a.Position,(l=this.Link.Out)==null?void 0:l.OffsetPosition);return`${o.X},${o.Y} ${o.X+20},${o.Y} ${e.X-20},${e.Y} ${e.X},${e.Y}`}}}),Oo=T({...ko,__name:"LinkRenderer",props:{Link:{type:Ut,required:!0}},setup(o){const e=o,t=()=>{e.Link.SetSelected(!0)},s=n=>{var u;var i=e.Link.In,a=e.Link.Out;if(!(i==null||a==null)){var l=new Ie;l.Move(n.offsetX,n.offsetY);var c=(u=i.ParentNode)==null?void 0:u.ParentGraph;c!=null&&(c.DeleteLink(e.Link),c.AddNode(l),c.AddLink(i,l.Inputs[0]),c.AddLink(l.Outputs[0],a))}};return(n,i)=>(f(),g("polyline",{onClick:t,onDblclick:s,points:n.Points,class:Ne(["line",{selected:e.Link.IsSelected}])},null,42,Mo))}}),Lo=X(Oo,[["__scopeId","data-v-a61d9acd"]]),$o={},Do={class:"tool-bar-container"};function Ro(o,e){return f(),g("div",Do,[de(o.$slots,"default",{},void 0,!0)])}const mt=X($o,[["render",Ro],["__scopeId","data-v-b20ca96b"]]),To={},Ao={class:"tool-bar-body"};function Xo(o,e){return f(),g("div",Ao,[de(o.$slots,"default")])}const ve=X(To,[["render",Xo]]);class Kt extends K{constructor(){super(...arguments);r(this,"Name","nodes.fake");r(this,"Position",new C(1e3,1e3))}}const Bo={key:0,class:"selection-box"},Go={class:"offset-container",ref:"offset_container"},Yo=["points"],Eo={key:1,style:{"pointer-events":"none",height:"100%",width:"100%",padding:"30px"}},Ho=T({props:{MinScale:{type:Number,default:.5},MaxScale:{type:Number,default:2}},data(){return{Offset:new C(0,0),SelectionBox:new pt(0,0,0,0),SelectionBoxVisibility:!1,LastMouse:new C(0,0),LastOffset:new C(0,0),Zoom:1,isDragging:!1,_Graph:new qt,dragStore:nt(),points:"",GridSize:20,isDragOver:!1,fakeNode:new Kt}},computed:{Nodes:function(){return this._Graph.Nodes},OffsetXStyle:function(){return this.Offset.X+"px"},OffsetYStyle:function(){return this.Offset.Y+"px"},EditorCursor:function(){return this.isDragging?"grabbing":"default"},SelectionBoxX:function(){return this.SelectionBox.X+"px"},SelectionBoxY:function(){return this.SelectionBox.Y+"px"},SelectionBoxHeight:function(){return this.SelectionBox.Height+"px"},SelectionBoxWidth:function(){return this.SelectionBox.Width+"px"},OffsetStyle:function(){var o=this.GridSize/2*this.Zoom;return this.Offset.X-o+"px "+(this.Offset.Y-o)+"px"},ScaleGridStyle:function(){var o=(this.GridSize*this.Zoom).toString();return`${o}px ${o}px`}},created(){window.addEventListener("mousemove",this.OnMouseMove),window.addEventListener("mouseup",this.OnMouseUp)},mounted(){this.$nextTick(()=>{var e;this.$el;var o=((e=this.$parent)==null?void 0:e.$el).parentElement;o!=null&&(o.onkeydown=this.KeysHandler)})},methods:{SaveGraph(){var o=We.Serialize(this._Graph),e=JSON.stringify(o);console.log(e);var t=JSON.parse(e);console.log(t);var s=We.Deserialize(t);console.log(s)},Undo(){var o=le.PopState();o!=null&&(this._Graph=o)},Redo(){var o=le.UnpopState();o!=null&&(this._Graph=o)},isChild(o,e){for(var t=e.parentNode;t!=null;){if(t==o)return!0;t=t.parentNode}return!1},dragenter(){this.isDragOver=!0},dragleave(o){var e=this.$el,t=o.target;this.isChild(e,t)||(this.isDragOver=!1)},drop(o){this.isDragOver=!1;var e=nt(),t=e.getNode();if(t!=null){var s=this.$refs.editor,n=s.getBoundingClientRect();if(n!=null){le.PushState(this._Graph);var i=C.Div(new C(o.clientX-n.x-this.Offset.X,o.clientY-n.y-this.Offset.Y),this.Zoom);t==null||t.Move(i.X,i.Y),this._Graph.AddNode(t)}}},KeysHandler(o){o.key=="Delete"&&(le.PushState(this._Graph),this._Graph.DeleteSelected())},UpdateOffsetStyle(){var o=this.$refs.offset_container;o.style.left=this.OffsetXStyle,o.style.top=this.OffsetYStyle,o.style.scale=this.Zoom.toString()},OnMouseDownLeft:function(o){this.DrawGhostLine(o),o.target==this.$refs.editor&&(this.LastMouse=new C(o.clientX,o.clientY),this.SelectionBox.X=0,this.SelectionBox.Y=0,this.SelectionBox.Width=0,this.SelectionBox.Height=0,this.SelectionBoxVisibility=!0,this._Graph.DeselectAll())},OnMouseDownMiddle:function(o){this.isDragging=!0,this.LastMouse=new C(o.clientX,o.clientY),this.LastOffset={...this.Offset}},OnMouseMove:function(o){if(this.isDragging){o.preventDefault();var e=o.clientX-this.LastMouse.X,t=o.clientY-this.LastMouse.Y;this.Offset.X=this.LastOffset.X+e,this.Offset.Y=this.LastOffset.Y+t,this.UpdateOffsetStyle()}if(this.SelectionBoxVisibility){o.preventDefault();var s=new C(o.clientX,o.clientY),n=new C(Math.min(this.LastMouse.X,s.X),Math.min(this.LastMouse.Y,s.Y)),i=new C(Math.abs(this.LastMouse.X-s.X),Math.abs(this.LastMouse.Y-s.Y)),a=this.$refs.editor,l=a.getBoundingClientRect();this.SelectionBox.X=n.X-l.left,this.SelectionBox.Y=n.Y-l.top,this.SelectionBox.Width=i.X,this.SelectionBox.Height=i.Y,this._Graph.Nodes.forEach(c=>{var u=new pt(this.Offset.X+c.Position.X*this.Zoom,this.Offset.Y+c.Position.Y*this.Zoom,c.Height*this.Zoom,c.Width*this.Zoom);this.SelectionBox.IntersectsWith(u)?c.SetSelected(!0):c.SetSelected(!1)})}this.DrawGhostLine(o)},OnMouseUp:function(o){this.isDragging=!1,this.SelectionBoxVisibility=!1},OnWheel:function(o){let t=this.$refs.editor.getBoundingClientRect(),s=o.deltaY*.001,n=this.Zoom;this.Zoom=this.Clamp(this.Zoom-s,this.MinScale,this.MaxScale);let i=new C(o.clientX-t.left,o.clientY-t.top),a=(n-this.Zoom)/n;this.Offset=C.Add(this.Offset,C.Mul(C.Sub(i,this.Offset),a)),this.UpdateOffsetStyle()},DisableContextMenu(o){o.preventDefault()},Clamp:function(o,e,t){return Math.min(Math.max(o,e),t)},DrawGhostLine(o){var c;if(this.dragStore.IsDragging){var e=this.$refs.editor,t=e.getBoundingClientRect();if(o.preventDefault(),t!=null){var s=this.dragStore.SourceTerminal,n=C.Add((c=s.ParentNode)==null?void 0:c.Position,s.OffsetPosition),i=C.Div(new C(o.clientX-t.x-this.Offset.X,o.clientY-t.y-this.Offset.Y),this.Zoom),a=s.IsInput?i:n,l=s.IsInput?n:i;this.points=`${a.X},${a.Y} ${a.X+20},${a.Y} ${l.X-20},${l.Y} ${l.X},${l.Y}`}}}}}),Uo=T({...Ho,__name:"GraphRenderer",setup(o){return $t(e=>({"215df84a":e.EditorCursor,"37cbc353":e.SelectionBoxY,"37cbc352":e.SelectionBoxX,"2676868d":e.SelectionBoxHeight,"1ad8f3a0":e.SelectionBoxWidth,57915170:e.ScaleGridStyle,cc90e252:e.OffsetStyle})),(e,t)=>{const s=Q("font-awesome-icon"),n=_e("tooltip");return f(),g("div",{class:"graph-renderer dot",ref:"editor",onWheel:t[4]||(t[4]=(...i)=>e.OnWheel&&e.OnWheel(...i)),onMousedown:[t[5]||(t[5]=ie((...i)=>e.OnMouseDownLeft&&e.OnMouseDownLeft(...i),["left"])),t[6]||(t[6]=ie((...i)=>e.OnMouseDownMiddle&&e.OnMouseDownMiddle(...i),["middle"]))],onContextmenu:ie(()=>!1,["prevent","right"]),onDragover:t[7]||(t[7]=ie(()=>{},["prevent"])),onDragenter:t[8]||(t[8]=(...i)=>e.dragenter&&e.dragenter(...i)),onDragleave:t[9]||(t[9]=(...i)=>e.dragleave&&e.dragleave(...i)),onDrop:t[10]||(t[10]=(...i)=>e.drop&&e.drop(...i))},[p(mt,{class:"top-left"},{default:N(()=>[p(ve,null,{default:N(()=>[E((f(),g("a",{onClick:t[0]||(t[0]=i=>e.Undo())},[p(s,{icon:["fas","rotate-left"]})])),[[n,e.$t("tt.undo"),void 0,{bottom:!0}]]),E((f(),g("a",{onClick:t[1]||(t[1]=i=>e.Redo())},[p(s,{icon:["fas","rotate-right"]})])),[[n,e.$t("tt.redo"),void 0,{bottom:!0}]])]),_:1}),p(ve,null,{default:N(()=>[E((f(),g("a",null,[p(s,{icon:["far","copy"]})])),[[n,e.$t("tt.copy"),void 0,{bottom:!0}]]),E((f(),g("a",null,[p(s,{icon:["far","paste"]})])),[[n,e.$t("tt.paste"),void 0,{bottom:!0}]]),E((f(),g("a",{class:Ne([{disabled:!e._Graph.HasSelected}]),style:{color:"var(--vt-c-red)"},onClick:t[2]||(t[2]=i=>e._Graph.DeleteSelected())},[p(s,{icon:["far","trash-can"]})],2)),[[n,e.$t("tt.delete"),void 0,{bottom:!0}]])]),_:1}),p(ve,null,{default:N(()=>[E((f(),g("a",null,[p(s,{icon:["fas","expand"]})])),[[n,e.$t("tt.fullscreen"),void 0,{bottom:!0}]])]),_:1})]),_:1}),p(mt,{class:"bottom-left"},{default:N(()=>[p(ve,null,{default:N(()=>[_("span",null,[e.Zoom<1?(f(),H(s,{key:0,icon:["fas","magnifying-glass-minus"]})):(f(),H(s,{key:1,icon:["fas","magnifying-glass-plus"]})),R(" "+k((e.Zoom*100).toFixed(0))+"%",1)])]),_:1}),p(ve,null,{default:N(()=>[_("span",null,[p(s,{icon:["fas","up-down-left-right"]}),R(" X: "+k(e.Offset.X.toFixed())+" Y: "+k(e.Offset.Y.toFixed()),1)])]),_:1}),p(ve,null,{default:N(()=>[E((f(),g("a",{onClick:t[3]||(t[3]=i=>{e.Offset.Reset(),e.Zoom=1,e.UpdateOffsetStyle()})},[p(s,{icon:["fas","arrows-rotate"]})])),[[n,e.$t("tt.resetView")]])]),_:1}),p(ve,null,{default:N(()=>[_("span",null,[p(s,{icon:["fas","circle-info"]}),R(" "+k(e.$t("hints.graphLmb")),1)])]),_:1}),p(ve,null,{default:N(()=>[_("span",null,[p(s,{icon:["fas","circle-info"]}),R(" "+k(e.$t("hints.graphWheel")),1)])]),_:1})]),_:1}),e.SelectionBoxVisibility?(f(),g("div",Bo)):ee("",!0),_("div",Go,[p(xo,{id:"links-container"},{default:N(()=>[p(It,{name:"link"},{default:N(()=>[(f(!0),g(q,null,pe(e._Graph.Links,i=>(f(),H(Lo,{key:i.Id,Link:i},null,8,["Link"]))),128))]),_:1}),e.dragStore.IsDragging?(f(),g("polyline",{key:0,class:"ghost-line",points:e.points},null,8,Yo)):ee("",!0)]),_:1}),p(It,{name:"delete",tag:"div"},{default:N(()=>[(f(!0),g(q,null,pe(e.Nodes,i=>(f(),H(Ot,{key:i.Id,Offset:e.Offset,Zoom:e.Zoom,Node:i},null,8,["Offset","Zoom","Node"]))),128))]),_:1}),p(Ot,{Offset:e.Offset,Zoom:e.Zoom,Node:e.fakeNode},null,8,["Offset","Zoom","Node"])],512),e.isDragOver?(f(),g("div",Eo,t[11]||(t[11]=[_("div",{style:{height:"100%",width:"100%","border-radius":"50px",border:"4px dashed var(--vt-c-black-mute)"}},null,-1)]))):ee("",!0)],544)}}}),Wo=X(Uo,[["__scopeId","data-v-a00ad599"]]),zo={style:{height:"100%",display:"flex","flex-direction":"row"}},Fo={style:{"margin-left":"5px"}},Zo={style:{"margin-left":"5px"}},qo=T({__name:"EditorView",setup(o){return(e,t)=>{const s=Q("font-awesome-icon");return f(),g("div",zo,[p(it,{style:{width:"20%","min-width":"300px"}},{header:N(()=>[p(s,{icon:["fas","list"]}),t[0]||(t[0]=R()),_("span",Fo,k(e.$t("windows.nodesList")),1)]),default:N(()=>[p(to)]),_:1}),p(it,{style:{width:"80%"}},{header:N(()=>[p(s,{icon:["fas","circle-nodes"]}),t[1]||(t[1]=R()),_("span",Zo,k(e.$t("windows.graph")),1)]),default:N(()=>[p(Wo)]),_:1})])}}}),Ko={style:{display:"flex","flex-direction":"row"}},jo={style:{width:"100%","font-weight":"bold","text-align":"left","margin-left":"10px"}},Jo={style:{width:"100%","font-weight":"bold","text-align":"right","margin-right":"10px"}},Qo={style:{width:"10px","margin-right":"10px"}},en={key:0,class:"dropdown"},tn=["onClick"],sn=T({__name:"SelectDropdown",props:{options:{type:Array,required:!1,default:[]},title:{type:String,required:!1,default:""},default:{type:String,required:!1,default:null},modelValue:{type:String,default:""},RealtimeChange:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(o,{emit:e}){O(!1);const t=o,s=O(t.default?t.default:t.options.length>0?t.options[0]:null),n=O(!1);Ue(()=>t.modelValue,a=>{s.value=a});const i=()=>{var a=ce();t.RealtimeChange&&(a.ChangeEvent=!a.ChangeEvent)};return(a,l)=>{const c=Q("font-awesome-icon");return f(),g("div",{class:"dropdown-head input-element value",tabindex:"0",onBlur:l[1]||(l[1]=u=>n.value=!1),style:{width:"100%",position:"relative"}},[_("div",{onClick:l[0]||(l[0]=u=>n.value=!n.value),style:{height:"100%"}},[_("div",Ko,[_("div",jo,k(t.title)+k(t.title==""?"":":"),1),_("div",Jo,k(s.value),1),_("div",Qo,[n.value?(f(),H(c,{key:1,icon:["fas","angle-up"]})):(f(),H(c,{key:0,icon:["fas","angle-down"]}))])])]),n.value?(f(),g("ul",en,[(f(!0),g(q,null,pe(o.options,(u,h)=>(f(),g("li",{class:Ne({selected:u==s.value}),key:h,onClick:m=>{s.value=u,n.value=!1,a.$emit("update:modelValue",s.value),i()}},k(u),11,tn))),128))])):ee("",!0)],32)}}}),on=X(sn,[["__scopeId","data-v-61887904"]]),nn=T({__name:"LangSwitch",setup(o){const e=vt(),t=O("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);const s=c=>{e!=null&&(e.appContext.config.globalProperties.$i18n.locale=c,localStorage.setItem("userLang",c),t.value=c)},n=Vt("langContextMenu"),i=O(),a=c=>{var u;(i!=null||i!=null)&&((u=n.value)==null||u.OpenUnder(i.value))};var l=new Map;return l.set("en","English"),l.set("ru","Русский"),(c,u)=>{const h=Q("flag");return f(),g(q,null,[_("button",{ref_key:"langSwitchBtn",ref:i,class:"btn disable-user-select",onClick:a},[p(h,{iso:t.value=="en"?"gb":t.value},null,8,["iso"]),R(" "+k(J(l).get(t.value)),1)],512),p(ut,{ref:"langContextMenu"},{default:N(()=>[_("button",{class:"btn btnContextMenuPadding",onClick:u[0]||(u[0]=m=>{var v;s("ru"),(v=n.value)==null||v.Close()})},[p(h,{iso:"ru"}),u[2]||(u[2]=R(" Русский"))]),_("button",{class:"btn btnContextMenuPadding",onClick:u[1]||(u[1]=m=>{var v;s("en"),(v=n.value)==null||v.Close()})},[p(h,{iso:"gb"}),u[3]||(u[3]=R(" English"))])]),_:1},512)],64)}}}),an=T({__name:"ToggleButton",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=Dt(o,"modelValue");return(t,s)=>(f(),g("button",{class:Ne(["btn",{toggled:e.value}]),onClick:s[0]||(s[0]=n=>e.value=!e.value)},[de(t.$slots,"default",{},void 0,!0)],2))}}),rn=X(an,[["__scopeId","data-v-4a53f642"]]),ln=T({__name:"ResolutionSwitcher",setup(o){const e=vt(),t=O("English");e!=null&&(t.value=e.appContext.config.globalProperties.$i18n.locale);var s=ce();const n=Vt("contextMenu"),i=O(),a=m=>{var I,S,V;if(i!=null||i!=null){var v=(I=i.value)==null?void 0:I.getBoundingClientRect();(S=n.value)==null||S.OpenUnder(i.value),v!=null&&((V=n.value)==null||V.SetWidth(v.width))}},l=["0.5K","1K","2K","4K","8K"],c=[512,1024,2048,4096,8192],u=O(0),h=m=>{u.value=m;var v=s.GetRenderer();v!=null&&(v.ChangeResolution(c[m]),requestAnimationFrame(()=>v==null?void 0:v.Render()))};return(m,v)=>{const I=Q("font-awesome-icon"),S=_e("tooltip");return f(),g(q,null,[E((f(),g("button",{ref_key:"switcher",ref:i,class:"btn disable-user-select",onClick:a},[p(I,{icon:["fas","vector-square"]}),R(" "+k(l[u.value])+" ",1),p(I,{icon:["fas","angle-down"]})])),[[S,m.$t("tt.mesh_resolution"),void 0,{bottom:!0}]]),p(ut,{ref_key:"contextMenu",ref:n},{default:N(()=>[(f(),g(q,null,pe(l,(V,P)=>(f(),g(q,null,[P>2?E((f(),H(ae,{key:0,class:"waringText",Active:P==u.value,onClick:x=>{var B;h(P),(B=n.value)==null||B.Close()}},{default:N(()=>[p(I,{icon:["fas","vector-square"]}),R(" "+k(V),1)]),_:2},1032,["Active","onClick"])),[[S,{content:m.$t("tt.resolutionWarning"),html:!0,distance:15},void 0,{right:!0}]]):(f(),H(ae,{key:1,Active:P==u.value,onClick:x=>{var B;h(P),(B=n.value)==null||B.Close()}},{default:N(()=>[p(I,{icon:["fas","vector-square"]}),R(" "+k(V),1)]),_:2},1032,["Active","onClick"]))],64))),64))]),_:1},512)],64)}}}),Lt=X(ln,[["__scopeId","data-v-97dd3ce3"]]),un={style:{height:"100%",width:"100%",position:"relative"}},dn=["value"],cn=T({__name:"ProjectNameEditor",props:Ct({modelValue:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:Ct(["update:modelValue"],["update:modelValue"]),setup(o,{emit:e}){const t=Dt(o,"modelValue"),s=e,n=O(!1),i=O(),a=O(),l=()=>{n.value=!0,we(()=>{var m;a.value=t.value,(m=i.value)==null||m.focus()})},c=m=>{s("update:modelValue",a.value),n.value=!1},u=m=>{m.target!=null&&(a.value=m.target.value,s("update:modelValue",a.value))},h=m=>{m.key=="Enter"&&(m.target!=null&&(a.value=m.target.value,s("update:modelValue",a.value)),n.value=!1)};return(m,v)=>{const I=Q("font-awesome-icon");return f(),g("div",un,[n.value?(f(),g("input",{key:0,ref_key:"input",ref:i,onFocusout:c,onInput:u,onKeypress:h,class:"editor",value:t.value},null,40,dn)):(f(),g("div",{key:1,class:"label",onClick:l},k(t.value),1)),p(I,{class:"icon",icon:["fas","pen"]})])}}}),hn=X(cn,[["__scopeId","data-v-1b5ff080"]]),fn={style:{"margin-left":"auto",right:"0px",height:"100%","white-space":"nowrap",overflow:"hidden"}},pn={class:"btn"},mn={class:"btn"},vn={class:"btn"},gn={class:"btn"},wn={class:"btn"},Vn={class:"btn"},yn={class:"btn"},Sn={class:"btn"},_n={class:"btn"},bn=450,Pn=T({__name:"ActionButtonsBar",setup(o){const e=O(),t=Vt("contextMenu"),s=O(),n=O(),i=l=>{var c;(s!=null||s!=null)&&((c=t.value)==null||c.OpenUnder(s.value))},a=()=>{var u;var l=(u=e.value)==null?void 0:u.getBoundingClientRect();if(l!=null){var c=l==null?void 0:l.width;c!=null&&c<bn?n.value=!0:n.value=!1}};return at(()=>{we(()=>{a(),window.addEventListener("resize",()=>{a()})})}),(l,c)=>{const u=Q("font-awesome-icon"),h=_e("tooltip");return f(),g("div",{ref_key:"menuContainer",ref:e,style:{display:"flex",height:"100%",width:"100%","white-space":"nowrap",overflow:"hidden"}},[_("div",fn,[n.value?(f(),g(q,{key:0},[p(Lt),c[3]||(c[3]=_("div",{class:"separator"},null,-1)),E((f(),g("button",{onClick:i,ref_key:"contextMenuButton",ref:s,class:"btn"},[p(u,{icon:["fas","fa-bars"]})])),[[h,l.$t("tt.menu"),void 0,{bottom:!0}]]),p(ut,{ref_key:"contextMenu",ref:t},{default:N(()=>[p(ae,null,{default:N(()=>[p(u,{icon:["fas","file"]}),R(" "+k(l.$t("tt.new")),1)]),_:1}),p(ae,null,{default:N(()=>[p(u,{icon:["fas","floppy-disk"]}),R(" "+k(l.$t("tt.save")),1)]),_:1}),p(ae,null,{default:N(()=>[p(u,{icon:["fas","folder-open"]}),R(" "+k(l.$t("tt.load")),1)]),_:1}),c[0]||(c[0]=_("hr",null,null,-1)),p(ae,null,{default:N(()=>[p(u,{icon:["fas","rotate-left"]}),R(" "+k(l.$t("tt.undo")),1)]),_:1}),p(ae,null,{default:N(()=>[p(u,{icon:["fas","rotate-right"]}),R(" "+k(l.$t("tt.redo")),1)]),_:1}),c[1]||(c[1]=_("hr",null,null,-1)),p(ae,null,{default:N(()=>[p(u,{icon:["fas","gear"]}),R(" "+k(l.$t("tt.settings")),1)]),_:1}),c[2]||(c[2]=_("hr",null,null,-1)),p(ae,null,{default:N(()=>[p(u,{icon:["fas","expand"]}),R(" "+k(l.$t("tt.fullscreen")),1)]),_:1})]),_:1,__:[0,1,2]},512),c[4]||(c[4]=_("div",{class:"separator"},null,-1)),E((f(),g("button",pn,[p(u,{icon:["fas","rotate-left"]})])),[[h,l.$t("tt.undo"),void 0,{bottom:!0}]]),E((f(),g("button",mn,[p(u,{icon:["fas","rotate-right"]})])),[[h,l.$t("tt.redo"),void 0,{bottom:!0}]])],64)):(f(),g(q,{key:1},[p(Lt),c[5]||(c[5]=_("div",{class:"separator"},null,-1)),E((f(),g("button",vn,[p(u,{icon:["fas","file"]})])),[[h,l.$t("tt.new"),void 0,{bottom:!0}]]),E((f(),g("button",gn,[p(u,{icon:["fas","floppy-disk"]})])),[[h,l.$t("tt.save"),void 0,{bottom:!0}]]),E((f(),g("button",wn,[p(u,{icon:["fas","folder-open"]})])),[[h,l.$t("tt.load"),void 0,{bottom:!0}]]),c[6]||(c[6]=_("div",{class:"separator"},null,-1)),E((f(),g("button",Vn,[p(u,{icon:["fas","rotate-left"]})])),[[h,l.$t("tt.undo"),void 0,{bottom:!0}]]),E((f(),g("button",yn,[p(u,{icon:["fas","rotate-right"]})])),[[h,l.$t("tt.redo"),void 0,{bottom:!0}]]),c[7]||(c[7]=_("div",{class:"separator"},null,-1)),E((f(),g("button",Sn,[p(u,{icon:["fas","gear"]})])),[[h,l.$t("tt.settings"),void 0,{bottom:!0}]]),E((f(),g("button",_n,[p(u,{icon:"fa-solid fa-hammer"})])),[[h,l.$t("tt.build"),void 0,{bottom:!0}]]),c[8]||(c[8]=_("div",{class:"separator"},null,-1)),E((f(),H(rn,null,{default:N(()=>[p(u,{icon:["fas","expand"]})]),_:1})),[[h,l.$t("tt.fullscreen"),void 0,{bottom:!0}]])],64))])],512)}}}),In=X(Pn,[["__scopeId","data-v-e3fe024b"]]),Cn={class:"disable-user-select left-section",style:{display:"flex","flex-direction":"row"}},Nn={class:"logo disable-user-select",style:{"text-transform":"uppercase"}},xn={class:"padding"},Mn={class:"middle-actions",style:{}},kn={style:{display:"flex","flex-direction":"row"}},On=T({__name:"MainMenuBar",setup(o){const e=O(!1);Ue(e,(s,n)=>{s?document.documentElement.requestFullscreen():document.exitFullscreen()});const t=O("Untitled");return(s,n)=>(f(),g("div",{class:"main",onContextmenu:n[1]||(n[1]=ie(()=>{},["prevent"]))},[_("div",Cn,[_("div",Nn,k(s.$t("logo")),1),p(In)]),_("div",xn,[_("div",Mn,[p(hn,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=i=>t.value=i)},null,8,["modelValue"])])]),_("div",kn,[p(nn)])],32))}}),Ln=X(On,[["__scopeId","data-v-58738f50"]]);class $n{constructor(e,t,s){r(this,"R",0);r(this,"G",0);r(this,"B",0);this.R=e,this.G=t,this.B=s}}const Dn={ref:"inputRange",class:"input-range"},Rn=["value"],Tn={class:"title"},An={class:"valueText"},Xn=T({props:{Min:Number,Max:Number,Suffix:String,Title:String,RealtimeChange:{type:Boolean,default:!0},Step:{type:Number,default:0},modelValue:{type:Number,default:0}},emits:["update:modelValue"],data(){return{IsDragging:!1,Value:0,lastPosition:new C(0,0),lastValue:0,IsInputVisible:!1,moveDistance:0}},created(){document.addEventListener("mousemove",this.OnMouseMove),document.addEventListener("mouseup",this.OnMouseUp),this.Value=this.modelValue},watch:{modelValue(o,e){this.Value=o}},methods:{ClickValue(o){this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+o,this.Min,this.Max):this.Value=this.Clamp(this.Value+(o>0?this.Step:-this.Step),this.Min,this.Max):this.Step==0?this.Value+=o:this.Value+=o>0?this.Step:-this.Step,this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnInput(o){this.Value=Number(o.target.value),this.Min!=null&&this.Max!=null&&(this.Value=this.Clamp(this.Value,this.Min,this.Max)),this.$emit("update:modelValue",this.Value),this.UpdateEvent()},OnMouseDown(o){this.IsInputVisible||(this.$el.requestPointerLock(),this.IsDragging=!0,this.lastPosition=new C(o.clientX,o.clientY),this.lastValue=this.Value,this.moveDistance=0)},OnMouseMove(o){this.IsDragging&&(this.moveDistance+=o.movementX,this.Min!=null&&this.Max!=null?this.Step==0?this.Value=this.Clamp(this.Value+o.movementX/(o.shiftKey?25:50),this.Min,this.Max):o.movementX!=0&&Math.abs(this.moveDistance)>=(o.shiftKey?25:50)&&(this.moveDistance=0,this.Value=this.Clamp(this.Value+(o.movementX>0?this.Step:-this.Step),this.Min,this.Max)):this.Step==0?this.Value+=o.movementX/(o.shiftKey?25:50):o.movementX!=0&&Math.abs(this.moveDistance)>=(o.shiftKey?25:50)&&(this.moveDistance=0,this.Value+=o.movementX>0?this.Step:-this.Step),this.$emit("update:modelValue",this.Value),this.UpdateEvent())},OnMouseUp(o){var e=new C(o.clientX,o.clientY);e.X==this.lastPosition.X&&e.Y==this.lastPosition.Y&&this.Value==this.lastValue&&(this.IsInputVisible=!0,this.$nextTick(()=>{var t=this.$refs.input;t.focus(),t.select()})),this.IsDragging=!1,document.exitPointerLock()},UpdateEvent(){var o=ce();this.RealtimeChange&&(o.ChangeEvent=!o.ChangeEvent)},validate(o){o.key=="Enter"&&o.target.blur();var e=/[0-9-]|\./;e.test(o.key)||o.preventDefault()},Clamp(o,e,t){return Math.min(Math.max(o,e),t)}}}),Bn=T({...Xn,__name:"InputRange",setup(o){return(e,t)=>{const s=Q("font-awesome-icon");return f(),g("div",Dn,[_("div",{class:"button",onClick:t[0]||(t[0]=n=>e.ClickValue(-.1))},[p(s,{icon:["fas","caret-left"]})]),_("div",{class:"value",onMousedown:t[4]||(t[4]=ie((...n)=>e.OnMouseDown&&e.OnMouseDown(...n),["left"]))},[e.IsInputVisible?(f(),g("input",{key:0,onKeypress:t[1]||(t[1]=(...n)=>e.validate&&e.validate(...n)),ref:"input",class:"input-element",value:e.modelValue,onInput:t[2]||(t[2]=(...n)=>e.OnInput&&e.OnInput(...n)),onBlur:t[3]||(t[3]=n=>e.IsInputVisible=!1)},null,40,Rn)):(f(),g(q,{key:1},[_("div",Tn,k(e.Title)+": ",1),_("div",An,k(Number(e.Value.toFixed(4)))+" "+k(e.Suffix),1)],64))],32),_("div",{class:"button",onClick:t[5]||(t[5]=n=>e.ClickValue(.1))},[p(s,{icon:["fas","caret-right"]})])],512)}}}),Gn=X(Bn,[["__scopeId","data-v-5ba96ddd"]]),Yn={class:"properties"},En={key:0,class:"not-selected"},Hn={class:"header"},Un={style:{width:"100%",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Wn={class:"buttons",style:{display:"flex","font-weight":"bold"}},zn={class:"btn"},Fn={key:0,style:{margin:"0px 10px"}},Zn={class:"input-group",style:{width:"100%",padding:"0px"}},qn={key:1,style:{padding:"10px"}},Kn={class:"notice"},jn=T({__name:"PropertiesView",setup(o){const e=fe();O(new $n(0,0,1));var t=ye(()=>e.SelectedNode),s=ye(()=>e.SelectedNode==null||e.SelectedNode instanceof Ie),n=ye(()=>{var l;return a((l=t.value)==null?void 0:l.Properties)});const i=()=>{if(e.SelectedNode!=null&&e.SelectedNode!=null&&e.SelectedNode){for(var l of e.SelectedNode.Properties)l.Reset();var c=ce();c.ChangeEvent=!c.ChangeEvent}};var a=l=>{var c=new Map;return l==null||l.length==0||l.forEach(u=>{var h;c.has(u.Category)||c.set(u.Category,new Array),(h=c.get(u.Category))==null||h.push(u)}),c};return(l,c)=>{var m;const u=Q("font-awesome-icon"),h=_e("tooltip");return f(),g("div",Yn,[J(s)?(f(),g("div",En,[p(u,{icon:["fas","sliders"]})])):ee("",!0),J(s)?ee("",!0):(f(),g(q,{key:1},[_("div",Hn,[_("div",Un,k(l.$t((m=J(t))==null?void 0:m.Name)),1),_("div",Wn,[E((f(),g("button",zn,[p(u,{icon:["fas","sliders"]})])),[[h,l.$t("tt.presets"),void 0,{bottom:!0}]]),E((f(),g("button",{class:"btn",onClick:i},[p(u,{icon:["fas","arrows-rotate"]})])),[[h,l.$t("tt.resetParams"),void 0,{bottom:!0}]])])]),J(t).Name?(f(),g("hr",Fn)):ee("",!0),(f(!0),g(q,null,pe(J(n),([v,I])=>(f(),H(zt,{style:{"background-color":"transparent",padding:"0px"}},{header:N(()=>[R(k(v),1)]),default:N(()=>[_("div",Zn,[(f(!0),g(q,null,pe(I,S=>(f(),g(q,null,[typeof S.Value=="number"?(f(),H(Gn,{key:0,modelValue:S.Value,"onUpdate:modelValue":V=>S.Value=V,Min:S.Min,Max:S.Max,Step:S.Step,Suffix:S.Suffix,Title:S.Name},null,8,["modelValue","onUpdate:modelValue","Min","Max","Step","Suffix","Title"])):ee("",!0),S.valueList!=null?(f(),H(on,{key:1,modelValue:S.Value,"onUpdate:modelValue":V=>S.Value=V,default:S.Value,title:S.Name,options:S.valueList},null,8,["modelValue","onUpdate:modelValue","default","title","options"])):ee("",!0)],64))),256))])]),_:2},1024))),256)),J(t).IsRealtimeUpdate==!1?(f(),g("div",qn,[c[1]||(c[1]=_("button",{class:"btn apply-btn"}," Apply changes ",-1)),_("div",Kn,[p(u,{icon:["fas","circle-exclamation"]}),c[0]||(c[0]=R(' This node performs a heavy operation, so the update occurs when you click the "Apply Changes" button and is cached. '))])])):ee("",!0)],64))])}}}),Jn=X(jn,[["__scopeId","data-v-46464937"]]);function Qn(o){return new Worker("/assets/MeshGenerationWorker-DdK6sfo-.js",{name:o==null?void 0:o.name})}class ei{constructor(){r(this,"GridMaterial");r(this,"GridMesh");const e=d(.5).toVar(),t=d(5).toVar(),s=d(1*window.devicePixelRatio).toVar(),n=d(500).toVar(),i=d(200).toVar(),a=st(.2,.2,.2,.2).toVar(),l=st(.05,.05,.05,.2).toVar(),c=cs,u=hs,h=M(([G,$])=>{const D=ht(G,$),j=ze(Y(xe(Y(D,.5)),.5)),z=ht(j,Xt(D));return te(z.x,z.y)}),m=h(c.xz,e),v=h(c.xz,t),I=Y(1,He(0,s,m)),S=Y(1,He(0,s,v)),V=Y(c,u),P=Fe(V),x=He(d(n),d(0),P),B=He(d(i),d(0),P),se=Z(a,Z(I,B)).toVar(),ke=Z(l,Z(S,x)).toVar(),Oe=Bt(ke,se),he=new Gt;he.colorNode=Oe,he.transparent=!0,he.side=St,he.lights=!1;const F=new Yt(1e3,1e3,1,1);F.rotateX(-Math.PI/2);const U=new _t(F,he);this.GridMesh=U,this.GridMaterial=he}}class ti{constructor(){r(this,"Mesh");const e=M(([i,a,l])=>{const c=w(i.x,i.y).toVar(),u=w(ze(c.mul(2).sub(1)).sub(w(a,l))).toVar();return u.assign(d(1).sub(u.div(Xt(u)))),fs(te(u.x,u.y))});var t=new ps({color:"#fff",transparent:!0,side:St});t.colorNode=M(()=>{const i=e(Ke(),1,1).toVar(),a=e(Ke(),.9,1).toVar(),l=e(Ke(),1,.9).toVar(),c=e(Ke(),.98,.98).toVar(),u=Se(0,1,i.sub(a).sub(l).sub(c)).toVar();return st(.8,.8,.8,u)})();var s=new Yt(1,1,1,1);s.rotateX(-Math.PI/2);var n=new _t(s,t);n.castShadow=!1,n.receiveShadow=!1,n.scale.set(10,1,10),n.position.set(0,.005,0),this.Mesh=n}}class si{constructor(){r(this,"Height",2);r(this,"GPURenderer");r(this,"HeightTexture");r(this,"TerrainMaterial");r(this,"IsMeshGenerated",O(!1));r(this,"Scene");r(this,"Camera");r(this,"Controls");r(this,"TerrainMesh");r(this,"GridMesh");r(this,"DirectionalLight");r(this,"DirectionalLight2");r(this,"_resolution",512);r(this,"_textureResolution",512);r(this,"_canvas");r(this,"_isColorized",!1);this.CreateRenderer(),this.Scene=new ms,this.Scene.environmentNode=vs("#ffffff"),this.Scene.environmentIntensity=.05,this.Camera=new gs(75,1,.01,1e3),this.Camera.position.z=10,this.Camera.position.y=10,this.CreateMaterial(),this.CreateTexture(this._resolution),this.CreateTerrainMesh(this.Resolution),this.CreateLight();const e=new ei;this.GridMesh=e.GridMesh,this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2),this.Scene.add(this.GridMesh);var t=new ti;this.Scene.add(t.Mesh);const s=ce();s.SetRenderer(this),s.Resolution=this.Resolution}get Resolution(){return this._resolution}get TextureResolution(){return this._textureResolution}CreateMaterial(){this.TerrainMaterial=new Gt({color:"#a2a2a2"}),this.TerrainMaterial.side=St,this.TerrainMaterial.needsUpdate=!0,this.TerrainMaterial.metalness=0,this.TerrainMaterial.roughness=1,this.TerrainMaterial.positionNode=M(()=>{const e=d(1/this.Resolution),t=d(1).sub(e).toVar(),s=Pe.xyz.toVar(),n=Ee(this.HeightTexture,Pe.xz.add(.5).mul(t)).mul(this.Height);return s.y.addAssign(n),s})(),this.TerrainMaterial.normalNode=M(()=>{const e=d(1/this.TextureResolution).toVar(),t=d(1).sub(e).toVar(),s=Pe.xyz.add(je(e,0,0)).toVar(),n=Pe.xyz.add(je(0,0,e.negate())).toVar(),i=Pe.xyz.toVar(),a=Ee(this.HeightTexture,Pe.xz.add(.5).mul(t)).mul(this.Height);i.y.addAssign(a),s.y.addAssign(Ee(this.HeightTexture,s.xz.add(.5)).mul(t).mul(this.Height)),n.y.addAssign(Ee(this.HeightTexture,n.xz.add(.5)).mul(t).mul(this.Height));const l=s.sub(i).normalize(),c=n.sub(i).normalize();return ws(Vs(l,c))})(),this.TerrainMaterial.colorNode=M(()=>{const e=d(1/this.TextureResolution).toVar(),t=d(1).sub(e).toVar(),s=Ee(this.HeightTexture),n=d(this.Height).toVar(),i=d(.01).toVar(),a=je(0,.2,0).toVar(),l=je(.6,.4,.2).toVar(),c=w(this.TextureResolution),u=ht(1,w(c)),h=Pe.xz.add(.5).mul(t).toVar(),m=s.sample(h.add(w(u.x.negate(),u.y.negate()))).r.toVar(),v=s.sample(h.add(w(0,u.y.negate()))).r.toVar(),I=s.sample(h.add(w(u.x,u.y.negate()))).r.toVar(),S=s.sample(h.add(w(u.x.negate(),0))).r.toVar(),V=s.sample(h).r.toVar(),P=s.sample(h.add(w(u.x,0))).r.toVar(),x=s.sample(h.add(w(u.x.negate(),u.y))).r.toVar(),B=s.sample(h.add(w(0,u.y))).r.toVar(),se=s.sample(h.add(w(u.x,u.y))).r.toVar(),ke=I.add(Z(2,P)).add(se).sub(m.add(Z(2,S)).add(x)).toVar(),Oe=x.add(Z(2,B)).add(se).sub(m.add(Z(2,v)).add(I)).toVar();ke.mulAssign(n),Oe.mulAssign(n);const he=Fe(w(ke,Oe)),F=He(0,i,he),U=A(a,l,F).toVar(),G=V;return U.mulAssign(Bt(.8,Z(.4,G))),st(U,1)})()}CreateRenderer(){this.GPURenderer=new ys({alpha:!0,antialias:!0}),this.GPURenderer.shadowMap.enabled=!0,this.GPURenderer.shadowMap.type=Ss,this.GPURenderer.toneMapping=_s,this.GPURenderer.setClearColor(0,0),this.GPURenderer.setPixelRatio(window.devicePixelRatio)}CreateTexture(e){this.HeightTexture=new bs(Math.floor(this.TextureResolution),Math.floor(this.TextureResolution)),this.HeightTexture.format=Ps,this.HeightTexture.type=Is}CreateLight(){const e=new Nt(16777215,2);e.position.set(-10,10,0),e.castShadow=!0,e.shadow.autoUpdate=!0,e.shadow.camera.near=.1,e.shadow.camera.far=30,e.shadow.camera.top=8,e.shadow.camera.right=8,e.shadow.camera.bottom=-8,e.shadow.camera.left=-8,e.shadow.mapSize.set(8192,8192),e.shadow.radius=5,e.shadow.blurSamples=25,e.shadow.normalBias=.05,this.DirectionalLight=e;const t=new Nt(16777215,.5);t.position.set(10,10,0),this.DirectionalLight2=t}SetIsMeshGenerated(e){this.IsMeshGenerated.value=e}CreateTerrainMesh(e){this.SetIsMeshGenerated(!1);let t=new Qn;t.onmessage=async s=>{var n=new Cs;n.setIndex(new Je(new Uint32Array(s.data.indices),1)),n.setAttribute("position",new Je(new Float32Array(s.data.position),3)),n.setAttribute("normal",new Je(new Float32Array(s.data.normal),3)),n.setAttribute("uv",new Je(new Float32Array(s.data.uv),2)),this.TerrainMesh=new _t(n,this.TerrainMaterial),this.TerrainMesh.castShadow=!0,this.TerrainMesh.receiveShadow=!0,this.TerrainMesh.scale.set(10,1,10),this.TerrainMesh.position.set(0,.006,0),this.Scene.add(this.TerrainMesh),this.SetIsMeshGenerated(!0)},t.postMessage(e)}ChangeResolution(e){this._textureResolution=e,this.TerrainMaterial.dispose(),this.HeightTexture.dispose(),this.CreateTexture(this.TextureResolution),this.CreateMaterial(),this.TerrainMesh.material=this.TerrainMaterial,this.Scene.remove(this.DirectionalLight),this.Scene.remove(this.DirectionalLight2),this.DirectionalLight.dispose(),this.DirectionalLight2.dispose(),this.CreateLight(),this.Scene.add(this.DirectionalLight),this.Scene.add(this.DirectionalLight2);const t=ce();t.Resolution=this.TextureResolution;const s=fe();s.LockedNode!=null?this.Recalculate(s.LockedNode):s.SelectedNode!=null&&this.Recalculate(s.SelectedNode),requestAnimationFrame(()=>this.Render())}OnWindowResize(){if(this.GPURenderer==null||this.Camera==null||this._canvas==null)return;var e=this._canvas.offsetHeight,t=this._canvas.offsetWidth;this.GPURenderer.setSize(t,e);const s=t/e;this.Camera.aspect=s,this.Camera.updateProjectionMatrix(),requestAnimationFrame(()=>this.Render())}async Render(){await this.GPURenderer.renderAsync(this.Scene,this.Camera)}Mount(e){this._canvas=e;var t=this._canvas.offsetHeight,s=this._canvas.offsetWidth;this._canvas.appendChild(this.GPURenderer.domElement),this.GPURenderer.setSize(s,t),this.Camera.aspect=s/t,this.Controls=new Ns(this.Camera,this.GPURenderer.domElement),this.Controls.enablePan=!1,this.Controls.update(),window.addEventListener("resize",()=>this.OnWindowResize()),this.Render(),requestAnimationFrame(()=>this.Render)}RequestRender(){requestAnimationFrame(()=>this.Render)}async Recalculate(e,t=!1){t||e.Calculate();var s=e.Outputs[e.DefaultOutput].Value;const i=M(()=>{const a=ge.modInt(this.TextureResolution),l=ge.div(this.TextureResolution),c=tt(a,l),u=w(c.x,c.y).div(this.TextureResolution).toVar(),h=s(u).toVar();h.assign(Se(h,0,1)),xs(this.HeightTexture,c,h).toWriteOnly()})().compute(this.TextureResolution*this.TextureResolution);this.GPURenderer.computeAsync(i).then(()=>{e.CalculationState=Ce.Calculated,requestAnimationFrame(()=>this.Render())})}SetGridVisible(e){this.GridMesh.visible=e,requestAnimationFrame(()=>this.Render())}}const oi={class:"container"},ni={key:0,style:{position:"relative",height:"100%",width:"100%"}},ii=T({__name:"Preview3D",setup(o){const e=O();e.value=new si;const t=O();var s=ce();const n=ye(()=>s.ChangeEvent);var i=fe();const a=ye(()=>i.SelectedNode),l=ye(()=>{var V;return(V=e.value)==null?void 0:V.IsMeshGenerated});Ue(l,async(V,P)=>{requestAnimationFrame(()=>{var x;return(x=e.value)==null?void 0:x.Render()})}),Ue(n,async(V,P)=>{var x,B;i.LockedNode!=null?(x=e.value)==null||x.Recalculate(i.LockedNode,!1):a.value!=null&&((B=e.value)==null||B.Recalculate(a.value,!1))}),Ue(a,async V=>{var x,B;if(i.LockedNode!=null)(x=e.value)==null||x.Recalculate(i.LockedNode);else if(V!=null){var P=V;await((B=e.value)==null?void 0:B.Recalculate(P))}}),at(()=>{we(()=>{var V;(V=e.value)==null||V.Mount(t.value)})});let c=!1;const u=()=>{c=!0},h=()=>{c=!1};window.addEventListener("mouseup",h),window.addEventListener("pointerup",h);const m=()=>{c&&requestAnimationFrame(()=>{var V;return(V=e.value)==null?void 0:V.Render()})},v=()=>{requestAnimationFrame(()=>{var V;return(V=e.value)==null?void 0:V.Render()})},I=O(!0),S=()=>{var V;I.value=!I.value,(V=e.value)==null||V.SetGridVisible(I.value)};return(V,P)=>{var se;const x=Q("font-awesome-icon"),B=_e("tooltip");return f(),g("div",oi,[(se=e.value)!=null&&se.IsMeshGenerated?ee("",!0):(f(),g("div",ni,[p(Zt,{style:{scale:"2"}}),P[0]||(P[0]=_("span",{style:{position:"absolute !important",top:"calc(50% + 20px)",width:"100%","text-align":"center"}}," Initializing mesh...",-1))])),_("div",{onMousedown:u,onMousemove:m,onWheel:v,onPointerdown:u,onPointermove:m,ref_key:"canvas",ref:t,style:{height:"100%",width:"100%"}},[p(mt,{class:"top-left"},{default:N(()=>[p(ve,null,{default:N(()=>[E((f(),g("a",{onClick:S},[p(x,{icon:["fas","hashtag"]})])),[[B,"Switch Grid visibility",void 0,{bottom:!0}]])]),_:1})]),_:1})],544)])}}}),ai=X(ii,[["__scopeId","data-v-f4b894cd"]]),ri={style:{width:"100%",height:"100%"}},li={style:{height:"calc(100% - 80px)",display:"flex","flex-direction":"row"}},ui={style:{width:"80%",height:"100%"}},di={style:{height:"50%",width:"100%",display:"block"}},ci={style:{"margin-left":"5px"}},hi={style:{height:"50%"}},fi={style:{width:"20%",height:"100%"}},pi={style:{"margin-left":"5px"}},mi=T({__name:"LayoutView",setup(o){return(e,t)=>{const s=Q("font-awesome-icon");return f(),g("div",ri,[p(Ln,{style:{height:"50px"}}),_("div",li,[_("div",ui,[_("div",di,[p(it,{style:{display:"inline-block",width:"100%"}},{header:N(()=>[p(s,{icon:["fas","mountain-sun"]}),_("span",ci,k(e.$t("windows.thirdPreview")),1)]),default:N(()=>[p(ai)]),_:1})]),_("div",hi,[p(qo)])]),_("div",fi,[p(it,{style:{width:"100%"},"wheel-focus":!1},{header:N(()=>[p(s,{icon:["fas","sliders"]}),_("span",pi,k(e.$t("windows.properties")),1)]),default:N(()=>[p(Jn)]),_:1})])]),p(Hs,{style:{height:"30px"}})])}}}),vi=X(mi,[["__scopeId","data-v-415e308f"]]),gi=ss({history:os("/"),routes:[{path:"/",name:"home",component:vi}]});class wi extends K{constructor(){super(...arguments);r(this,"Name","nodes.clamp");r(this,"Inputs",[new L(!0,this,"Source")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Min",0,0,1),new b("Max",1,0,1)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value),s=y(this.Properties[1].Value);this.Outputs[0].Value=M(([n])=>{var a;if(!this.Inputs[0].IsConnected)return d(0);const i=(a=this.Inputs[0].Links[0].In)==null?void 0:a.Value(n);return Se(i,t,s)})}}class Vi extends K{constructor(){super(...arguments);r(this,"Name","nodes.combine");r(this,"Inputs",[new L(!0,this,"Source 1"),new L(!0,this,"Source 2")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Mode","Burn",["Burn","Darken","Difference","Dodge","Divide","Exclusion","HardLight","HardMix","Lighten","LinearBurn","LinearDodge","LinearLight","LinearLightAddSub","Multiply","Negation","Overlay","PinLight","Screen","SoftLight","Subtract","VividLight","Overwrite"]),new b("Strength",0,0,100,0,"","%")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=this.Properties[0].Value,s=y(this.Properties[1].Value);this.Outputs[0].Value=M(([n])=>{var c,u;if(!this.Inputs[0].IsConnected||!this.Inputs[1].IsConnected)return d(0);const i=(c=this.Inputs[0].Links[0].In)==null?void 0:c.Value(n).toVar(),a=(u=this.Inputs[1].Links[0].In)==null?void 0:u.Value(n).toVar(),l=s.mul(.01);switch(t){case"Burn":{const h=d(1).sub(d(1).sub(a).div(i)).toVar();return A(i,h,l)}case"Darken":{const h=te(i,a).toVar();return A(i,h,l)}case"Difference":{const h=ze(a.sub(i)).toVar();return A(i,h,l)}case"Dodge":{const h=i.div(a.add(d(1e-12))).toVar();return A(i,h,l)}case"Divide":{const h=i.div(d(1).sub(a)).toVar();return A(i,h,l)}case"Exclusion":{const h=a.add(i).sub(d(2).mul(a).mul(i)).toVar();return A(i,h,l)}case"HardLight":{const h=d(Y(1,Z(2,Y(1,i)).mul(Y(1,a)))).toVar(),m=d(Z(2,i).mul(a)).toVar(),v=d(Re(a,.5)).toVar(),I=d(m.mul(v).add(d(1).sub(v).mul(h))).toVar();return A(i,I,l)}case"HardMix":{const h=d(Re(d(1).sub(i),a)).toVar();return A(i,h,l)}case"Lighten":{const h=ue(a,i).toVar();return A(i,h,l)}case"LinearBurn":{const h=d(i.add(a.sub(1))).toVar();return A(i,h,l)}case"LinearDodge":{const h=i.add(a).toVar();return A(i,h,l)}case"LinearLight":{const h=d(ks(a.lessThan(.5),ue(i.add(d(2).mul(a).sub(d(1))),d(0)),te(i.add(d(2).mul(a.sub(.5))),d(1)))).toVar();return A(i,h,l)}case"LinearLightAddSub":{const h=d(a.add(Z(2,i).sub(1))).toVar();return A(i,h,l)}case"Multiply":{const h=i.mul(a).toVar();return A(i,h,l)}case"Negation":{const h=d(Y(1,ze(Y(1,a).sub(i)))).toVar();return A(i,h,l)}case"Overlay":{const h=d(Y(1,Z(2,Y(1,i)).mul(Y(1,a)))).toVar(),m=d(Z(2,i).mul(a)).toVar(),v=d(Re(i,.5)).toVar(),I=d(m.mul(v).add(d(1).sub(v).mul(h))).toVar();return A(i,I,l)}case"PinLight":{const h=d(Re(.5,a)).toVar(),m=d(h.mul(ue(Z(2,i.sub(.5)),a))).toVar(),v=d(m.add(Y(1,h).mul(te(Z(2,i),a)))).toVar();return A(i,v,l)}case"Screen":{const h=d(Y(1,Y(1,a).mul(Y(1,i)))).toVar();return A(i,h,l)}case"SoftLight":{const h=d(Y(1,Z(2,Y(1,i)).mul(Y(1,a)))).toVar(),m=d(Ms(i).mul(Z(2,a).sub(1)).add(Z(2,i).mul(Y(1,a)))).toVar(),v=d(Re(a,.5)).toVar(),I=d(m.mul(v).add(d(1).sub(v).mul(h))).toVar();return A(i,I,l)}case"Subtract":{const h=i.sub(a).toVar();return A(i,h,l)}case"VividLight":{const h=d(Y(1,Y(1,a).div(Z(2,i)))).toVar(),m=d(a.div(Z(2,Y(1,i)))).toVar(),v=d(Re(.5,i)).toVar(),I=d(m.mul(v).add(d(1).sub(v).mul(h))).toVar();return A(i,I,l)}case"Overwrite":return A(i,a,l)}return d(0)})}}class yi extends K{constructor(){super(...arguments);r(this,"Name","nodes.constant");r(this,"Outputs",[new L(!1,this,"Output")]);r(this,"Properties",[new b("Height",0,0,1)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value);this.Outputs[0].Value=M(([s])=>d(t))}}class Si extends K{constructor(){super(...arguments);r(this,"Name","nodes.cracks");r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Scale",10,0,100,0,"Transform","%"),new b("Angle",0,0,100,0,"Noise",""),new b("Thickness",.03,0,1,0,"Noise",""),new b("Distortion",0,0,100,0,"Distortion",""),new b("Octaves",10,0,100,1,"Distortion",""),new b("Scale",10,0,100,0,"Distortion",""),new b("Offset X",0,-100,100,0,"Distortion",""),new b("Offset Y",0,-100,100,0,"Distortion","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value),a=y(this.Properties[4].Value),l=y(this.Properties[5].Value),c=y(this.Properties[6].Value),u=y(this.Properties[7].Value);this.Outputs[0].Value=M(([h])=>{const m=w(h.x,h.y).toVar(),v=w(lt(m.mul(2).mul(.5),a,w(c,u),l)).mul(i).mul(.2);return qs({uv:m.add(v),angle:s,scale:t,thickness:n})})}}const _i=M(([o,e,t])=>{const s=d(t).toVar(),n=d(e).toVar(),i=d(o).toVar();s.assign(ue(0,s));const a=d(ue(0,te(1,n.sub(i).add(s).div(d(2).mul(s))))).toVar();return i.mul(a).add(n.mul(d(1).sub(a)).sub(s.mul(a).mul(d(1).sub(a))))}).setLayout({name:"smoothMin",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),bi=M(([o,e,t])=>{const s=d(t).toVar(),n=d(e).toVar(),i=d(o).toVar();s.assign(te(0,s.negate()));const a=d(ue(0,te(1,n.sub(i).add(s).div(d(2).mul(s))))).toVar();return i.mul(a).add(n.mul(d(1).sub(a)).sub(s.mul(a).mul(d(1).sub(a))))}).setLayout({name:"smoothMax",type:"float",inputs:[{name:"a",type:"float"},{name:"b",type:"float"},{name:"k",type:"float"}]}),Pi=M(([o])=>{const e=w(o).toVar();return xe(Be(Xe(e.xy,w(12.9898,78.233))).mul(43758.5453123))}).setLayout({name:"random",type:"float",inputs:[{name:"st",type:"vec2"}]}),Ii=M(([o,e,t])=>{const s=d(t).toVar(),n=d(e).toVar(),i=w(o).toVar(),a=w(i.mul(n)).toVar(),l=w(rt(a)).toVar(),c=w(xe(a)).toVar(),u=d(Pi(l).mul(2).sub(1).mul(s)).toVar(),h=d(Be(u)).toVar(),m=d(ft(u)).toVar(),v=w(c.sub(.5)).toVar(),I=w().toVar();return I.x.assign(v.x.mul(m).sub(v.y.mul(h))),I.y.assign(v.x.mul(h).add(v.y.mul(m))),I.add(.5).add(l).mod(1)}).setLayout({name:"tilingWithLimitedRotation",type:"vec2",inputs:[{name:"uv",type:"vec2"},{name:"tileCount",type:"float"},{name:"maxAngle",type:"float"}]});class Ci extends K{constructor(){super(...arguments);r(this,"Name","nodes.crater");r(this,"Outputs",[new L(!1,this,"Output")]);r(this,"Properties",[new b("Smoothness",.5,0,1,0,"Crater params",""),new b("FloorHeight",-1,-5,5,0,"Crater params",""),new b("Radius",.16,0,1,0,"Crater params",""),new b("RimWidth",1.35,0,100,0,"Crater params",""),new b("RimSteepness",4,0,100,0,"Crater params",""),new b("X",.5,0,1,0,"Transform",""),new b("Y",.5,0,1,0,"Transform","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value),a=y(this.Properties[4].Value),l=y(this.Properties[5].Value),c=y(this.Properties[6].Value);this.Outputs[0].Value=M(([u])=>{const h=w(u.x,u.y).toVar(),m=w(l,c).toVar(),v=d(Fe(h.sub(m)).div(ue(n,1e-4))).toVar(),I=d(v.mul(v).sub(1)).toVar(),S=d(te(v.sub(1).sub(i),0)).toVar(),V=d(a.mul(S).mul(S)).toVar(),P=d(bi(I,s,t)).toVar();return P.assign(_i(P,V,t)),P.mul(n).add(.5).toVar()})}}class Ni extends K{constructor(){super(...arguments);r(this,"Name","nodes.falloff");r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Strength",0,0,10)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value);this.Outputs[0].Value=M(([s])=>{const n=w(s.x,s.y).toVar(),i=d(Et(w(.5),n.mod(1))).mul(t).toVar(),a=A(d(1),d(0),i).toVar();return ot(Se(a,0,1),2)})}}class xi extends K{constructor(){super(...arguments);r(this,"Name","nodes.fastErosion");r(this,"Inputs",[new L(!0,this,"Inpute Height")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Tiles",4,0,20,0,"Erosion",""),new b("Octaves",5,0,20,1,"Erosion",""),new b("Gain",.5,0,1,0,"Erosion",""),new b("Lacunarity",2,0,10,0,"Erosion",""),new b("Slope strength",3,0,10,0,"Erosion",""),new b("Branch strength",3,0,10,0,"Erosion",""),new b("Erosion Strength",.04,0,1,0,"Erosion","")]);r(this,"IsRealtimeUpdate",!1);r(this,"terrainHeight");r(this,"waterVolume");r(this,"sedimentAmount");r(this,"tempTerrainHeight");r(this,"tempWaterVolume");r(this,"tempSedimentAmount")}Calculate(){this.BaseCalculate();const t=ce(),s=t.GetRenderer(),n=t.Resolution,i=y(.1),a=y(.1),l=y(.1),c=y(1),u=y(.1),h=y(.1),m=y(9.8),v=y(.01),I=y(3),S=y(n),V=y(n);this.terrainHeight=Te(n*n,"float"),this.waterVolume=Te(n*n,"float"),this.sedimentAmount=Te(n*n,"float"),this.tempTerrainHeight=Te(n*n,"float"),this.tempWaterVolume=Te(n*n,"float"),this.tempSedimentAmount=Te(n*n,"float");const P=M(()=>{var D;const F=ge.modInt(n),U=ge.div(n),G=tt(F,U),$=w(G.x,G.y).div(n).toVar();if(this.Inputs[0].IsConnected){const z=((D=this.Inputs[0].Links[0].In)==null?void 0:D.Value)($).toVar();this.terrainHeight.element(ge).assign(z)}}),x=M(([F,U])=>{const G=d(U).toVar(),$=d(F).toVar();return $.assign(Se($,ne(0),S.sub(ne(1)))),G.assign(Se(G,ne(0),V.sub(ne(1)))),G.mul(S).add($)}),B=M(([F,U])=>{const G=d(U).toVar(),$=w(F).toVar(),D=d(Z(.01,xe(Be(d(G).mul(12.9898)).mul(43758.5453)).mul(2).sub(1))).toVar();return At($.add(w(D)))});M(([F,U,G])=>{const $=ne(G).toVar(),D=d(U).toVar(),j=d(F).toVar(),z=d(x(j,D)).toVar(),re=d(this.tempWaterVolume.element(z).add(a.mul(i))).toVar(),oe=d(this.tempSedimentAmount.element(z)).toVar(),be=d(this.tempTerrainHeight.element(z)).toVar(),Ze=w(w(this.tempTerrainHeight.element(x(j.add(1),D)).sub(this.tempTerrainHeight.element(x(j.sub(1),D))),this.tempTerrainHeight.element(x(j,D.add(1))).sub(this.tempTerrainHeight.element(x(j,D.sub(1))))).mul(.5)).toVar(),Ge=d(Fe(Ze)).toVar();Qe(re.greaterThan(0).and(Ge.greaterThan(0)),()=>{const Le=w(B(Ze,$)).toVar(),qe=d(te(re,Ge.mul(m).mul(i))).toVar(),Ve=d(te(re,qe)).toVar(),$e=Ae(Ae(j,D).add(Ae(xt(Le)))).toVar(),De=ne(x($e.x,$e.y)).toVar();this.tempWaterVolume.element(De).addAssign(Ve),re.subAssign(Ve);const me=d(ue(Ge,v).mul(Ve).mul(c)).toVar();Qe(oe.lessThan(me),()=>{const Ye=d(te(me.sub(oe).mul(u),be.sub(this.tempTerrainHeight.element(De)))).toVar();oe.addAssign(Ye),this.tempTerrainHeight.element(z).assign(be.sub(Ye))}).Else(()=>{const Ye=d(oe.sub(me).mul(h)).toVar();oe.subAssign(Ye),this.tempTerrainHeight.element(z).assign(be.add(Ye))});const bt=d(oe.mul(Ve).div(re)).toVar();this.tempSedimentAmount.element(De).addAssign(bt),oe.subAssign(bt)}),re.mulAssign(Y(1,l.mul(i))),oe.assign(ue(0,oe)),this.tempWaterVolume.element(z).assign(re),this.tempSedimentAmount.element(z).assign(oe)});const se=M(([F,U])=>{const G=ne(U).toVar(),$=tt(F.x,F.y).toVar();return $.y.mul(G).add($.x)});M(()=>{this.tempTerrainHeight.element(ge).addAssign(.5)});const ke=M(()=>{const F=ne(ge).toVar(),U=ne(F.modInt(S)).toVar(),G=ne(F.div(S)).toVar(),$=ne(x(U,G)).toVar();this.tempTerrainHeight.element($).assign(this.terrainHeight.element($)),this.tempWaterVolume.element($).assign(this.waterVolume.element($)),this.tempSedimentAmount.element($).assign(this.sedimentAmount.element($)),dt(),Tt(I,()=>{const D=d(x(U,G)).toVar(),j=d(this.tempWaterVolume.element(D).add(a.mul(i))).toVar(),z=d(this.tempSedimentAmount.element(D)).toVar(),re=d(this.tempTerrainHeight.element(D)).toVar(),oe=w(w(this.tempTerrainHeight.element(x(U.add(1),G)).sub(this.tempTerrainHeight.element(x(U.sub(1),G))),this.tempTerrainHeight.element(x(U,G.add(1))).sub(this.tempTerrainHeight.element(x(U,G.sub(1))))).mul(.5)).toVar(),be=d(Fe(oe)).toVar();Qe(j.greaterThan(0).and(be.greaterThan(0)),()=>{const Ze=w(B(oe,F)).toVar(),Ge=d(te(j,be.mul(m).mul(i))).toVar(),Le=d(te(j,Ge)).toVar(),qe=Ae(Ae(U,G).add(Ae(xt(Ze)))).toVar(),Ve=ne(x(qe.x,qe.y)).toVar();this.tempWaterVolume.element(Ve).addAssign(Le),j.subAssign(Le);const $e=d(ue(be,v).mul(Le).mul(c)).toVar();Qe(z.lessThan($e),()=>{const me=d(te($e.sub(z).mul(u),re.sub(this.tempTerrainHeight.element(Ve)))).toVar();z.addAssign(me),this.tempTerrainHeight.element(D).assign(re.sub(me))}).Else(()=>{const me=d(z.sub($e).mul(h)).toVar();z.subAssign(me),this.tempTerrainHeight.element(D).assign(re.add(me))});const De=d(z.mul(Le).div(j)).toVar();this.tempSedimentAmount.element(Ve).addAssign(De),z.subAssign(De)}),j.mulAssign(Y(1,l.mul(i))),z.assign(ue(0,z)),this.tempWaterVolume.element(D).assign(j),this.tempSedimentAmount.element(D).assign(z),dt(),this.terrainHeight.element(D).assign(this.tempTerrainHeight.element(D)),this.waterVolume.element(D).assign(this.tempWaterVolume.element(D)),this.sedimentAmount.element(D).assign(this.tempSedimentAmount.element(D)),dt()}),this.terrainHeight.element($).assign(this.tempTerrainHeight.element($)),this.waterVolume.element($).assign(this.tempWaterVolume.element($)),this.sedimentAmount.element($).assign(this.tempSedimentAmount.element($))}),Oe=P().compute(n*n),he=ke().compute(n*n);s==null||s.GPURenderer.compute(Oe),s==null||s.GPURenderer.computeAsync(he),this.Outputs[0].Value=M(([F])=>{if(this.Inputs[0].IsConnected){w(F.x,F.y).toVar();const U=ge.modInt(n),G=ge.div(n),$=tt(U,G);return this.terrainHeight.element(se($,n)).toVar()}else return 0})}}class Mi extends K{constructor(){super(...arguments);r(this,"Name","nodes.gradientNoise");r(this,"Outputs",[new L(!1,this,"Output")]);r(this,"Properties",[new b("Scale",10,0,100),new b("Offset X",0,0,100),new b("Offset Y",0,0,100)]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value);this.Outputs[0].Value=M(([i])=>{const a=w(i.x,i.y).mul(t).toVar(),l=w(s,n).toVar();return a.addAssign(l),Ft(a)})}}class ki extends K{constructor(){super(...arguments);r(this,"Name","nodes.invert");r(this,"Inputs",[new L(!0,this,"Source")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate(),this.Outputs[0].Value=M(([t])=>{var n;if(!this.Inputs[0].IsConnected)return d(0);const s=(n=this.Inputs[0].Links[0].In)==null?void 0:n.Value(t);return d(1).sub(s)})}}class Oi extends K{constructor(){super(...arguments);r(this,"Name","nodes.mountain");r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Scale",3.55,0,100,0,"Noise Transform","%"),new b("Octaves Count",10,1,50,1,"Noise Params",""),new b("Offset X",-.08,-100,100,0,"Noise Transform",""),new b("Offset Y",-.54,-100,100,0,"Noise Transform",""),new b("Falloff",3,0,20,0,"Mountain",""),new b("Height",1,0,1,0,"Mountain",""),new b("Position X",.5,0,1,0,"Mountain Transform",""),new b("Position Y",.5,0,1,0,"Mountain Transform","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value),a=y(this.Properties[4].Value),l=y(this.Properties[5].Value),c=y(this.Properties[6].Value),u=y(this.Properties[7].Value);this.Outputs[0].Value=M(([h])=>{const m=w(h.x,h.y).toVar(),v=d(Et(w(c,u),m)).mul(a).toVar(),I=A(d(1),d(0),v).toVar(),S=ot(Se(I,0,1),2),V=m.sub(w(c,u).sub(.5)).toVar(),P=lt(V,s,w(n,i),t).toVar();return Se(S.mul(P).mul(d(1.45).mul(l)),0,1)})}}class Li extends K{constructor(){super(...arguments);r(this,"Name","nodes.redistribution");r(this,"Inputs",[new L(!0,this,"Source")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Exponent",1,1,10)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value);this.Outputs[0].Value=M(([s])=>{var i;return this.Inputs[0].IsConnected?((i=this.Inputs[0].Links[0].In)==null?void 0:i.Value(s)).pow(t):d(0)})}}class $i extends K{constructor(){super(...arguments);r(this,"Name","nodes.terrace");r(this,"Inputs",[new L(!0,this,"Param 1")]);r(this,"Outputs",[new L(!1,this,"Output")]);r(this,"Properties",[new b("Count",3,0,10,1)]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value);this.Outputs[0].Value=M(([s])=>{var n;if(this.Inputs[0].IsConnected){const a=((n=this.Inputs[0].Links[0].In)==null?void 0:n.Value)(s).toVar();if(this.Properties[0].Value==0)return a;const l=d(1).div(t).toVar(),c=rt(a.div(l)).toVar(),u=a.sub(c.mul(l)).div(l).toVar(),h=te(d(2).mul(u),d(1)).toVar();return c.add(h).mul(l).toVar()}else return 0})}}class Di extends K{constructor(){super(...arguments);r(this,"Name","nodes.voronoi");r(this,"Outputs",[new L(!1,this,"Output"),new L(!1,this,"Cells"),new L(!1,this,"Bubbles")]);r(this,"Properties",[new b("Scale",10,1,100,0,"Transform","%"),new b("OffsetX",0,0,100,0,"Transform",""),new b("OffsetY",0,0,100,0,"Transform",""),new b("Angle",5,0,100,0,"Noise","")]);r(this,"IsRealtimeUpdate",!0);r(this,"DefaultOutput",0)}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value);this.Outputs[0].Value=M(([a])=>{const l=w(a.x,a.y).toVar(),c=w(s,n).toVar();l.addAssign(c);const u=ct({UV:l,angleOffset:i,cellDensity:t}).toVar();return ot(u.x,2)}),this.Outputs[1].Value=M(([a])=>{const l=w(a.x,a.y).toVar(),c=w(s,n).toVar();return l.addAssign(c),ct({UV:l,angleOffset:i,cellDensity:t}).toVar().y}),this.Outputs[2].Value=M(([a])=>{const l=w(a.x,a.y).toVar(),c=w(s,n).toVar();l.addAssign(c);const u=ct({UV:l,angleOffset:i,cellDensity:t}).toVar();return Os(ot(u.x,2))})}}class Ri extends K{constructor(){super(...arguments);r(this,"Name","nodes.transform");r(this,"Inputs",[new L(!0,this,"Input")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Properties",[new b("Scale X",1,0,100,0,"Scale",""),new b("Scale Y",1,0,100,0,"Scale",""),new b("Position X",0,-100,100,0,"Position",""),new b("Position Y",0,-100,100,0,"Position",""),new b("Midpoint X",.5,0,1,0,"Rotation",""),new b("Midpoint Y",.5,0,1,0,"Rotation",""),new b("Angle",0,-360,360,0,"Rotation","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value),a=y(this.Properties[4].Value),l=y(this.Properties[5].Value),c=y(this.Properties[6].Value);this.Outputs[0].Value=M(([u])=>{var x;const h=w(u.x,u.y).toVar(),m=w(t,s).toVar(),v=w(n,i).toVar(),I=w(a,l).toVar(),S=c.mul(Ht.div(180)).toVar(),V=w(ft(S).mul(h.x.sub(I.x)).add(Be(S).mul(h.y.sub(I.y))).add(I.x),ft(S).mul(h.y.sub(I.y)).sub(Be(S).mul(h.x.sub(I.x))).add(I.y));return h.assign(V),h.addAssign(v),h.mulAssign(m),(x=this.Inputs[0].Links[0].In)==null?void 0:x.Value(h).toVar()})}}class Ti extends K{constructor(){super(...arguments);r(this,"Inputs",[new L(!0,this,"Input")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Name","nodes.tile");r(this,"Properties",[new b("Tile Count",1,0,100,1),new b("Angle Threshold",0,0,360,0)]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value),s=y(this.Properties[1].Value);this.Outputs[0].Value=M(([n])=>{var u;var i=w(n).toVar(),a=s.mul(Ht.div(180));const l=Ii(i,t,a).toVar();return(u=this.Inputs[0].Links[0].In)==null?void 0:u.Value(l).toVar()})}}class Ai extends K{constructor(){super(...arguments);r(this,"Inputs",[new L(!0,this,"Input")]);r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Name","nodes.height");r(this,"IsRealtimeUpdate",!0);r(this,"Properties",[new b("Height",1,0,100,0,"","%")])}Calculate(){this.BaseCalculate();const t=y(this.Properties[0].Value);this.Outputs[0].Value=M(([s])=>{var a;if(!this.Inputs[0].IsConnected)return d(0);var n=w(s).toVar();return((a=this.Inputs[0].Links[0].In)==null?void 0:a.Value(n).toVar()).mul(t.mul(.01))})}}class Xi extends K{constructor(){super(...arguments);r(this,"Name","nodes.distortion");r(this,"Outputs",[new L(!1,this,"Result")]);r(this,"Inputs",[new L(!0,this,"Input")]);r(this,"Properties",[new b("Distortion",0,0,100,0,"Distortion",""),new b("Octaves",10,0,100,1,"Distortion",""),new b("Scale",10,0,100,0,"Distortion",""),new b("Offset X",0,-100,100,0,"Distortion",""),new b("Offset Y",0,-100,100,0,"Distortion","")]);r(this,"IsRealtimeUpdate",!0)}Calculate(){this.BaseCalculate();var t=y(this.Properties[0].Value),s=y(this.Properties[1].Value),n=y(this.Properties[2].Value),i=y(this.Properties[3].Value),a=y(this.Properties[4].Value);this.Outputs[0].Value=M(([l])=>{var c;if(this.Inputs[0].IsConnected){const u=(c=this.Inputs[0].Links[0].In)==null?void 0:c.Value,h=w(l.x,l.y).toVar(),m=w(lt(h.mul(2).mul(.5),s,w(i,a),n)).mul(t).mul(.2);return u(h.add(m)).toVar()}else return 0})}}function Bi(){W.registerStr("nodes.buffer","",Ie),W.registerStr("nodes.fake","",Kt),W.registerStr("nodes.constant","nodeCategories.testNodes",yi),W.registerStr("nodes.perlinNoise","nodeCategories.testNodes",Ks),W.registerStr("nodes.mountain","nodeCategories.testNodes",Oi),W.registerStr("nodes.terrace","nodeCategories.testNodes",$i),W.registerStr("nodes.combine","nodeCategories.testNodes",Vi),W.registerStr("nodes.clamp","nodeCategories.testNodes",wi),W.registerStr("nodes.invert","nodeCategories.testNodes",ki),W.registerStr("nodes.redistribution","nodeCategories.testNodes",Li),W.registerStr("nodes.gradientNoise","nodeCategories.testNodes",Mi),W.registerStr("nodes.voronoi","nodeCategories.testNodes",Di),W.registerStr("nodes.crater","nodeCategories.testNodes",Ci),W.registerStr("nodes.falloff","nodeCategories.testNodes",Ni),W.registerStr("nodes.fastErosion","nodeCategories.testNodes",xi),W.registerStr("nodes.cracks","nodeCategories.testNodes",Si),W.registerStr("nodes.transform","nodeCategories.testNodes",Ri),W.registerStr("nodes.tile","nodeCategories.testNodes",Ti),W.registerStr("nodes.height","nodeCategories.testNodes",Ai),W.registerStr("nodes.distortion","nodeCategories.testNodes",Xi)}const Gi={en:{"":"",logo:"Mashuk",windows:{thirdPreview:"3D Preview",secondPreview:"2D Preview",properties:"Node properties",graph:"Graph",nodesList:"Nodes list"},tt:{undo:"Undo",redo:"Redo",copy:"Copy",paste:"Paste",delete:"Delete node/selected",fullscreen:"Fullscreen",save:"Save",load:"Load",presets:"Presets",resetView:"Reset view",resetParams:"Reset node parameters to default",lockPreview:"Lock Preview",unlockPreview:"Unlock Preview",mesh_resolution:"Resolution",new:"New project",settings:"Settings",menu:"Menu",resolutionWarning:"Warning! Selecting a high resolution will increase video memory consumption and processing speed.",build:"Build"},hints:{graphLmb:"LMB: Select/Drag node",graphWheel:"Wheel: Zoom/Drag work space"},nodes:{constant:"Constant",perlinNoise:"Perlin Noise",mountain:"Mountain",terrace:"Terrace",combine:"Combine",clamp:"Clamp",invert:"Invert",redistribution:"Redistribution",gradientNoise:"Gradient Noise",voronoi:"Voronoi",crater:"Crater",falloff:"Falloff",fastErosion:"Fast Erosion",cracks:"Cracks",transform:"Transform",tile:"Tile",height:"Height",distortion:"Distortion"},nodeCategories:{testNodes:"Test nodes"}},ru:{logo:"Машук",windows:{thirdPreview:"3D Просмотр",secondPreview:"2D Просмотр",properties:"Параметры узла",graph:"Граф",nodesList:"Список узлов"},tt:{undo:"Отменить",redo:"Повторить",copy:"Копировать",paste:"Вставить",delete:"Удалить узел/выделенные",fullscreen:"На весь экран",save:"Сохранить",load:"Загрузить",presets:"Предустановки",resetView:"Сбросить вид",resetParams:"Сбросить параметры узла до значений по умолчанию",lockPreview:"Закрепить отображение",unlockPreview:"Открепить отображение",mesh_resolution:"Разрешение",new:"Новый проект",settings:"Настройки",menu:"Меню",resolutionWarning:"Внимание! Выбор высокого разрешения влечет за собой увеличение потребления видеопамяти и скорости обработки",build:"Сборка"},hints:{graphLmb:"ЛКМ: Выделить/Передвинуть узел",graphWheel:"Колесо мыши: Приближение/Перемещение рабочей области"},nodes:{constant:"Константа",perlinNoise:"Шум Перлина",mountain:"Гора",terrace:"Террасы",combine:"Комбинирование",clamp:"Ограничение",invert:"Инверсия",redistribution:"Перераспределение",gradientNoise:"Градиентный Шум",voronoi:"Шум Вороного",crater:"Кратер",falloff:"Спад",fastErosion:"Быстрая Эрозия",cracks:"Трещины",transform:"Преобразование",tile:"Плитка",height:"Высота",distortion:"Искажения"},nodeCategories:{testNodes:"Тестовые узлы"}}};yt.options.themes.tooltip.delay.show=0;yt.options.distance=10;ns.add(Ls,is);const Yi=as({legacy:!1,locale:"en",fallbackLocale:"en",messages:Gi}),Me=rs(As);Me.component("font-awesome-icon",ls);Me.use(us());Me.use(gi);Me.use(yt);Me.use(Yi);Me.use(ds);Me.mount("#app");Bi();
